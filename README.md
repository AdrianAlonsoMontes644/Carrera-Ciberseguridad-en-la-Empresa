# Carrera Ciberseguridad en la Empresa
Comentarios propios que surgiran a lo largo del curso -> |(Iran dispuestos de esta manera, ayudaran a que sea más ameno de llevar a cabo y si lo leo un futuro no sera un simple resumen aburrido en texto)|

#### Carrera Proyecto de clases Día 1: 09/10/2023

## "Curso de Onboarding en Ciberseguridad: Bienvenid@ a bordo":

● 1. Ciberseguridad

● 2. Términos que debemos conocer

● 3. Dispositivos ¿Qué debemos conocer de ellos?

● 4. Dispositivos corporativos vs BYOD

● 5. Usuarios y contraseñas

● 6. Políticas de Contraseñas

● 7. Copias de Seguridad (Backup)

● 8. Carpetas Compartidas

● 9. Navegación Segura

● 10. Correo electrónico Seguro

● 11. Descarga desde Internet

● 12. Bloqueo de Sesión

● 13. Datos Sensibles

● 14. Notificación de Incidentes de Ciberseguridad

● 15. Desconexión cuando no se está utilizando la red

● 16. Cierres de Sesiones

● 17. Apagado del dispositivo

##

### Terminos a conocer y su significado:

-La Vulnerabilidad: Un problema conocido como "agujero de seguridad" que permite acceder a otros a nuestros dispositivos. ->|(Curiosa analogía usando como simil un huevo o un corredor de motos)|

-La Amenaza: La posibilidad de que se produzca una Vulnerabilidad. Se divide en amenazas internas y externas ->|(¿Analogías con leones? entiendo el punto mas no me parece el mejor ejemplo...)|

● Internas: Conocidas como "Insiders", el caso de que alguien desde dentro de la empresa vulnere las defensas o robe información. ->|(No sabía que tenian un nombre especifico para referirse a estos casos)|

● Externas: Los conocidos "Ciberdelincuentes", que buscan acceder o destruir información de la empresa. 

-Ingeniaría social: Busca manipular a la persona para obtener informacion confidencial usando la estrategia del "eslabón más debil de la cadena", es decir, apuntando a la persona detrás de la maquina -> |(Siempre nos echan las culpas, así no se puede)|->. Se lleva a cabo en 4 pasos:

● paso 1: Contactan con el usuario a través de una conecxión de internet o una llamada telefónica

● paso 2: Usan una falsa identidad para engañarnos

● paso 3: Manipulan a la persona buscando apelar a los sentimientos o empatía del ser humano para conseguir que nos abramos a ellos ->|(Que útil es ser poco sensible, no?)|

● paso 4: Consiguen que les proporcionemos la información que desean.

Como consejo, no confiar de ningun coctacto desconocido y sospechar de actitudes extrañas.

|(En retrospectiva, los sentimientos nos hacen inferiores... Parece una mala pelicula para adolescentes que se creen edgys)|

### Dispositivos ¿Qué debemos conocer de ellos?

Son cualquier aparato electrónico que permita interactuar con otras personas. Más alla de los obvios como los móviles, ordenadores y tablets, también existen las cámaras de fotos que últimamente vienen con la capacidad de conectarse a internet ->|(Que falta de necesidad...)|-> o los cajeros automáticos cuyo uso también posee vulnerabilidades. Otro dispositivo también es el GPS, el cual además de las vulnerabilidades normales, también pueden funciona por satélite que también son vulnerables. ->|(Ya hay que tener ganas de manipular un satélite...)|

-Los sistemas operativos que intervienen y los dispositivos y sus funciones: Conjunto de herramientas para interactuar como usuarios con el hardware. Se encarga por ejemplo de administrar los periféricos como el monitor o el ratón de un ordenador. Los más conocidos son Windows, Linux, IOS y Android.

-La seguridad dentro de estos: Los sistemas de antivirus y las actualizaciones de seguridad. Estos dos son obligatorios para mantener la seguridad del dispositivo. Como recomendación, no ejecutar archivos de origenes desconocidos, mantener el sistema actualizado y usar contraseñas robustas.

-Softwares y Apps, que son y diferencias: Ambos son aplicaciones u herramientas desarrolladas para llevar a cabo una función. Pero las Apps son dirigidas en su mayoría a los móviles y los softwares a los ordenadores.
->|(¡¿Me dices de comprar un móvil nuevo solo por no tener espacio para las actualizaciones de seguridad!? que bien tiene que sentirse eso de tener dinero, esas 7 aplicaciones que no he utilizado ni una vez y no me deja desistalar se pueden quedar de base, muchas gracias)|

-Las contraseñas fuertes: Son aquellas que contienen un alto número de caracteres, mezclan letras minúsculas y mayúsculas, incluyen números y poseen carácteres especiales. ->|(El ejemplo en el que convierte una frase y un mes del año en @gOM5fdTV3JdT¡@ fue bastante satísfactorio)| y como último consejo cambiar las contraseñas cada mes ->|(Ya me cuestó bastante aprenderme las que uso, no pienso rotar mensualmente o me bloquearan por uso excesivo de "contraseñas olvidadas")|

### Dispositivos corporativos vs BYOD

-Dispositivos corporativos: Cualquier dispositivo electrónico que nos facilite la empresa con sus normas y límites de uso junto a sus sistemas de protección. No son 100% seguros y para evitar problemas se aconseja no usarlo de manera personal ni para ocio.

-BYOD: anagrama de "Bring Your Own Device". Se trata de los dispositivos personales que la empresa permite usar para el trabajo. Puede tener un gran impacto corporativo, debido a que en caso de una brecha de seguridad es más dificil identíficarlo y se tiene menos control sobre el dispositivo. También un gran impacto personal debido a que pueden existir nomas de uso obligatorias de la empresa y en caso de avería el costo 
deberá ser una inversión de la persona, es decir, la empresa no es responsable del dispositivo.

####  Proyecto de clases Día 2: 10/10/2023

### Usuarios Y Contraseñas

Los usuarios son un Pseudónimo que utilizamos las personas físicas para identificarnos en los sistemas. Siempre acompañado de una contraseña para corresponder a unas credenciales de acceso de esta forma aumentando la seguridad. Algunos ejemplos pueden ser el nombre solo, acompañado de apellidos o el codigo de empleado en la empresa. Su función es permitirnos una acreditación virtual de acceso para autenticarnos e identificarnos.

Deben utilizarse para controlar los accesos y tener una seguridad estable -> |(Hace bastante incapié en esto y pone unos cuantos ejemplos bastante obvios. Como persona a la que le han robado una cuenta de google que luego aparecía con activaciones en Turquía, ya tengo bastante claro donde no meter mi cuenta)|

-Los gestores de contraseñas: Nos permite guardar contraseñas de manera segura y tambien nuestros usuarios, permitiendo también ordenarlos como queramos. Como ejemplo pone la aplicación KEEPASS, sencillo de instalar localmente y que permite centralizar las contrasañes y guardarlas de forma segura aplicando criptografía cifrandolas.

### Políticas de Contraseñas

Explica porque la mayoría de compañias nos obligan a cambiar de contraseña cada cierto tiempo. Por ejemplo, si alguien obtiene las contraseñas, despues del cambio perderá el acceso. Las empresas prohiben repetir mínimo las 5 contraseñas anteriores pudiendo llegar a 20 o 40 contraseñas. Se recomienda cambiar las contraseñas personales cada 30 a 90 días ->|(Hagamoslo corto, Seguridad)|.

-Beneficios de las políticas de contraseñas: Mejora la seguridad, ayuda a cotrolar las credenciales, ayuda a identificar más rapido un problema y permite llevar a cabo un bloqueo de usuarios. Como tal no existen inconvenientes, solo el tener que adaptarse

### Copias de seguridad(Backup)

No es más que una copia de una información que permita recuperarla en caso de ataque informático o borrados accidentales. No se recomienda hacer las copias en un mismo dispositivo, si no en pendrives o usar la nube por ejemplo ->|(Sinceramente la nube me parece cada día menos segura, al menos si alguien quiere robarme un pendrive se juega el brazo. Y no tengo problemas con los borrados accidentales, guardo cada muy poco tiempo y muchas veces para asegurarme)|

### Carpetas compartidas

Son carpetas a las que se pueda acceder desde distintos perfiles de usuario. Se pueden usar para compartir archivos y trabajar sobre una misma carpeta de ser necesario, tambien tiene como ventaja la actualización en tiempo real de los ficheros. Al mismo tiempo su función principal sigue siendo su mayor peligro, el que muchas personas pueden acceser, lo cual facilita el robo y extracción de información o la entrada de información maliciosa o la posibilidad de que corrompan los archivos. Por estos peligros se recomienda el uso de permisos de acceso y el uso de copias de seguridad.

### Navegación segura

Los navegadores nos permiten movernos por la red para obtener información por ejemplo. Hay que tener cuidado ya que se pueden mostrar recursos tanto locales como remotos ->|(Me he sentido tonto mientras veo como me explican el uso de una barra de búsqueda a lo largo de todo un minuto y medio...)|

-Los navegadores seguros: Son aquellos con medidas de seguridad que preeven la actividad no autorizada -> |(Que ya para eso tenemos Tor y Onion...)|. -> Utilizan metodos de forma proactiva lo que permite que actue antes que se produzca un ataque informático y no después, protegen la identidad y ayuda con las cookies maliciosas. Recomienda no confiarse igualmente por tener un navegador seguro y concienciarnos nosotros mismo de navegar de manera segura.

-Las actualizaciones en los navegadores web: Los navegadores siguen siendo aplicaciones que requieren cambios y mejoras de seguridad constantes al ser la herramienta más expuesta a los ataques informáticos. Se recomienda especial precaución y atención al ser la herramienta con la que navegamos por internet. Dentro de estos podemos comprobar que tenemos todas las actualizaciones en los ajustes.

-Las extensiones: Pequeños programas que se incluyen en la herramienta de nvegación web, los usos y funcionamientos son casi infinitos al ser programas, tambien pueden ser peligrosos e instalar un malware, por lo que hay que revisar bien las que se instalan. Tampoco se recomiendo instalar muchas porque podría realentizar el dispositivo. 

-Las URL: Es el nombre a través del cual nos conectamos a una página web. Se compone de 2 partes el protocolo que es por ejemplo el http que aparece al inicio de las paginas y el dominio que es el resto de la URL, estando separados por dos barras y doble punto //: También existe el subdominio, una tecera parte que se añade delante del dominio y se separan por un punto.

-Como reconocer URL seguras e inseguras: Nunca se puede estar seguro al 100% de que es segura ->|(Ejemplo gracioso, hace unas semanas un amigo y yo descargamos un programa desde su página oficial, otro colega se lo quiso descargar la semana siguiente desde la misma página con la URL que le dimos y termino teniendo que formatear el pc por un troyano que le estaba bloqueando todo el uso del ordenador desde dentro)|-> . Como recomendación verificar a donde redirige, como está escrita la URL y que el protocolo de seguridad esté en uso (https). Si la dirección no es reconocible y no está aplicado el protocolo de seguridad, es decir, aparece http sin la s al final, es más probable que no se trate de una página segura. Nos enseña una página web llamada "VirusTotal" que permite verificar enlaces.

-Códigos QR: Códigos que permiten almacenar información. Hay que tener cuidado ya pueden almacenar enlaces maliciosos o dirigirnos a conecciones que no conocemos, incluso descargar directamente una aplicación. Se recomienda verificar el enlace que contiene el código usando softwares de análisis.

-Certificados en internet: Información relacionada con la página web, que ayuda a verificar al propietario de una web y nos ayuda en la protección contra terceros en el intercambio de información.

####  Proyecto de clases Día 3: 11/10/2023

### Correo electrónico seguro

Un método para enviar y recibir información de manera casi instantanea, esta puede ir en formato de texto tanto en imágenes o en documentos de distinta índole. Hay que tenr ciertas precauciones al usarlo, sobre todo mucho cuidado con remitentes desconocidos. Entre otros peligros se encuentra el envío de información confidencial y el spam. -> |(Está muy bien decir que no abras siquiera este tipo de correos porque les demuestras que la cuenta está activa, pero solo abro correos de clases y algunos mensajes de spam siguen llegando después de años...)| -> Hay que proteger muy bien la cuenta como usuario para evitar accesos no autorizados.

-El phishing: Técnicas que buscan engañar a una persona usando ingeniería social para llevar a cabo robos informáticos, una de las formas es conseguir que accedamos a un enlace. Hay 4 tipos:

Por correo electrónico: El mencionado anteriormente, es el más barato y facil de ejecutar.

Vishing: Se trata de phishing por voz, a través de llamadas telefónicas

Smishing: Se trata de phishing a través de SMS. Por ejemplo, falsos mensajes del banco con enlaces.

Carta Nigeriana: Intenta acercarse a la persona con información fraudulenta ya sea con la muerte de un familiar y una herencia o con falsos premios ganados.

-Documentos adjuntos en el correo electrónico: Son los ficheros enlazados al mensaje para enviar información de diferentes maneras. No se puede saber si son seguros o estar infectados de forma 100% segura. Pudiendo contener información maliciosa o contener ejecutables que instalen malwares.

### Descargas desde Internet

Las solemos asociar a tomas de piratería y descargas ilegales. Pero son cualquier imagen, fichero adjunto o plataforma de streaming que usemos. Durante la navegación también existen descargas de las que no somos conscientes, ya que se puede considerar incluso que al intrar a una página se está descargando en nuestro navegador. -> |(Esas buenas páginas que nada más entrar intentas descargarte 30 archivos desconocidos son exasperantes)|. 

-Es segura la descarga de ficheros desde internet? -> |(spoiler: NO)| -> : Hay dos tipos de descargas

Fuentes conocidas: Correos electrónicos internos de la empresa, Documentos en carpetas corporativas y Webs verificadas.

Fuentes desconocidas: Correos electrónicos de emisores desconocidos, Repositorios de documentos en internet y Webs de dudosa fiabilidad.

Precauciones a tener en cuenta: Verificar siempre la procedencia, analizar siempre con un antivirus y ante cualquier duda no descargar directamente

### Bloqueo de sesión

La sesión hay que recordar que está vinculada con nuestro usuario y contraseña y esta sesión se mantiene activa durante todo el uso hasta que sea detenida por el usuario.

Nos permite acceso a donde tenga permisos el usuario así como la identificación del mismo.

Puede ser peligrosa? Pues como todo. Si nos suplantan la identidad con nuestra sesión pueden interacruar con todo donde tenga permisos el usuario. Como puede ocurrir? Por ejemplo activando el correo electrónico en un dispositivo ajeno y no cerrando la sesión. Otro ejemplo sería dejar el puesto de la oficina dejando la sesión abierta.

### Datos sensibles

Se trata de los datos personales que afectan a la privacidad de la persona, como su información mediatica o médica, opiniones políticas y religiosas, ect... Estos datos han de ser protegidos con medidas de seguridad fuerte y con visualización estricta y recordar que la filtración de datos sensibles puede llegar a multas muy graves ->|(Ya, claro... a mi me robaron mi teléfono en 3º de la ESO y se dedicaron a esparcir toda mi información por el instituto, desde contraseñas y mis datos médicos hasta mi historial de google. Maravillosa actuación por parte del centro 2 semanas después de quejarme que hicieron que se me pagase el movil robado, solo eso e incluso pareció a regañadientes para que no se llevase el caso a la policia... Que buenos docentes tenemos en este país, arriba España o algo así era)|

### Notificación de Incidentes de Ciberseguridad

Que son?: Se trata de un aviso que se lleva a cabo que sucede un problema que afecta a la seguridad virtual como ataques informáticos o los borrados de información. Podemos causarlos voluntariamente subiendo información confidencial a la red o cediendo nuestras credenciales de acceso a otra persona. También se pueden generar de manera involuntaria, ya sea que nos suplanten la identidad sin saberlo, nos roben las credenciales de acceso, que caigamos en una estafa o el caso "Fraude del CEO", un tipo de fsishing donde nos engañan haciendose pasar por un alto cargo en la empresa.

Como lo notificamos: No existe una única respuesta válida ya que cada jefe debe notificar a sus trabajadores el procedimiento a realizar. Un ejemplo podría ser notificar a nuestro resposable más directo en el momento que seamos conscientes del incidente. Otro sería comunicar directamente al equipo de ciberseguridad.

No hay que tener miedo de comunicar un problema de ciberseguridad, debido a que no hacerlo puede acatar a mayores problemas.

### Desconexión cuando no se está utilizando la red

Los dispositivos se mantienen enviando información a la red aunque no los estemos utilizando activamente, lo cual abre una posible brecha de seguridad en la cual no somos conscientes de lo que esta sucediendo. Por esto es recomendable desconectarse de la red cuando no se esté utilizando -> |(Es un problema entonces que vivimos con el movil conectado a internet casi 24/7 y sinceramente a estas alturas no voy a conectarme y desconectarme cada 5 minutos para ver si tengo un mensaje, me quedo conectado y ya sonará)|

### Cierre de sesiones

Liberar por completo la sesión que estuviesemos utilizando bloqueando el acceso a nuestra sesión y dejando que otra persona pueda acceder con su propio usuario y contraseña. Siempre cerrar la sesión al momento de dajar de usar un dispositivo.

### Apagado del dispositivo

Consiste en dejar el dispositivo sin conección a la corriento o la batería para literalmete apagarlo. Los peligros de no hacerlo? El uso indebido sin consentimiento y ser objetivo de ciberdelincuentes

### Conclusiones

-Que se ha visto: Conceptos esenciales de la ciberseguridad y los peligros de la navegación insegura.

-Que se ha aprendido: El uso seguro de los dispositivos electrónicos, la navegación segura, el uso seguro del correo electrónico y la importancia de la actualización continua de los sistemas y las aplicaciones

-Proximos pasos: Continuar aprendiendo sobre los riesgos de internet, mantenerse actualizado sobre la ciberseguridad, conocer los ataque más comunes para evitarlos

## "Curso de análisis y gestión del riesgo":

● 1. Introducción a la terminología

● 2. Definición del marco de gestión del riesgo

● 3. Evaluación del riesgo

● 4. Mitigación del riesgo

● 5. Controles de mitigación: Seguridad administrativa y física

● 6. Controles de mitigación: Seguridad lógica

● 7.Monitorización del riesgo

##
####  Proyecto de clases Día 4: 12/10/2023
### Introducción a la terminología

-Análisis de riesgos informáticos: proceso que comprende la identificación de activos informáticos y de información, sus vulnerabilidades y las amenazas a los que se encuentran expuestos, así como su probabilidad de ocurrencia y el impacto de las mismas. 

-Riesgos de Seguridad de información: deben ser considerados en el contexto del negocio, y las interrelaciones con otras funciones de negocios y los clientes deben ser identificados para lograr una imagen global y completa de estos riesgos.

-Amenaza: Cualquier ocurrencia que pueda tener un impacto negativo en nuestros activos.

-Vulnerabilidad: Es la falta de un control que pueda permitir que la amenaza ocurra.

-Activo: Cualquier cosa con valor para nuestra organización.

-Impacto: La degradación sobre el activo que provoca la amenaza y los daños que provoca.

-Riesgo: Se trata del calculo de Impacto * Probabilidad.

-Gestión del riesgo: Continuación del análisis y el que debemos hacer para tratarlo.

-Informe de estado del riesgo: Se recoge como se encuentra la organización en un momento dado.

-Informe de evaluación de salvaguardas: Nos dice como de bien están funcionando las salvaguardas en función del riesgo.

-Impacto residual: El impácto que queda luego de implementar los controles que tenemos.

-Riesgo acumulado: El riesgo acumulado según la situación actual

-Riesgo potencial: El riesgo que podría ocurrir si no tenemos en cuenta las salvaguardas y protecciones

-Apetito, Tolerancia y Capacidad del riesgo: Se trata de cuanto riesgo está dispuesto a sufrir una organización

-Salvaguarda: Se trata de un control, medida de seguridad o contra-medida a un problema

-Valor de un activo: Se trata de la repercusión, ya sea monetaria o de cara al público que se deberá acatar en caso de que una amenaza de lugar.

->|(El profesor de este curso sinceramente no me gusta, muy tecnico todo y rápido, parece que no respira entre palabras, de casi 5 horas que dura este curso van a ser 7 solo de lo mucho que tendré que volver atras...)|

#### Gestión del riesgo TI vs Gestión de riesgos para proyectos TI

● Gestión de riesgos TI: busca proteger todos los activos de la organización, especialmente la información, en su procesamiento/tratamiento en los sistemas de información.

● Proyectos TI: definidos en el tiempo. Pueden suponer un riesgo a la seguridad de la información. En este caso se puede aplicar la misma metodología general de análisis y gestión del riesgo TI.

#### Gobierno, Riesgo y Cumplimiento (GRC)

Es una estrategia para administrar el gobierno general de una organización, la administración de riesgos empresariales y el cumplimiento de las regulaciones.

Como beneficios: mejora de la toma de decisiones, inversiones óptimas en TI, eliminación de silos y reducción de la fragmentación entre las divisiones y departamentos, entre otros.

Las organizaciones desarrollan un marco de GRC para el liderazgo, organización y operación de las áreas de TI de la organización para asegurar que apoyan y permiten los objetivos estratégicos de la organización. 

#### Gobierno del riesgo vs gestión del riesgo

-El gobierno del riesgo es un framework que introduce los artefactos de gobiernos requeridos para la gestión (como las políticas y procedimientos), así como otros elementos requeridos como el apetito del riesgo. Este dará soporte a la gestión del riesgo.

-La gestión del riesgo es un mecanismo que identifica, cualifica y evalúa el riesgo para determinar dónde se requiere mayor o menor gobierno. Esta retroalimentará a la organización con el mapa de riesgos actual de forma que se pueda decidir sobre la mejor estrategia de tratamiento del riesgo en base a las reglas establecidas por el gobierno (priorización, apetito del riesgo, etc).

El gobierno y la gestión del riesgo deben estar alineadas con los objetivos corporativos como los financieros, estratégicos, de reputación, etc. Con la finalidad se convertirse en un facilitador del negocio en lugar de un centro de coste. 

-> |(La introducción de 19 minutos tomó una hora... este curso va a ser lento...)|
 
### Definición del marco de gestión del riesgo

Para gestionar el riesgo, es necesario contar r con un "framework" o marco para el mismo dentro de la organización que defina los roles y responsabilidades, recursos y tolerancia al riesgo que se tendrá. Su principal salida es la estrategia de gestión del riesgo.

La estrategia también incluye cualquier decisión a nivel estratégico y las consideraciones sobre cómo los riesgos a las operaciones y activos serán gestionadas por el comité de dirección y la gerencia senior. 

#### Marco de gestión ISO 27005

Es un estandar internacional que se ocupa de la gestión de riesgos de seguridad de la información. Suministra directrices para la gestión de riesgos de seguridad en una empresa.

-Gestión de riesgos de seguridad de la información en una empresa. ISO 27001.

Busca un enfoque en "Risk Management" para Tecnologías de la Información.

-Esta norma parte del mismo modelo definido en ISO 31000 (gestión riesgo empresarial general).

Este Marco de gestión ISO 27005 lleva a cabo la identificación del riesgo en un orden:

-Identificación de activos
-Identificación de amenazas
-Identificación de controles existentes
-Identificación de vulnerabilidades 

También analiza los riesgos:

-Metodologías
-Evaluación de las consecuencias
-Evaluación de la probabilidad de los incidentes
-Determinación del riesgo
-Evaluación de riesgos 

#### Estándares NIST 800-39 y 800-30

El propósito de NIST SP 800-39 es proporcionar una guía para la organización en la gestión de riesgos de seguridad de información. Otro factor importante es proporcionar orientación para desplegar un sistema integrado para toda la organización del programa para la gestión de riesgos de seguridad de información. Tiene 4 partes: La evaluación(Assess), la respuesta(respond), la monitorización(Monitor) y por último el marco(Frame) que es el que permite llevar un proceso homogeneo, documentado y conocido por todos que permitirá ser comparable a lo largo del tiempo.

El estándar NIST 800-39 establece un marco y proceso para la gestión del riesgo de sistemas de información en la organización, mientrás que el estándar NIST 800-30 se centra específicamente en ser una guía para realizar evaluación de riesgo en TI.

El objetivo del componente de la evaluación de riesgos es identificar:
-Las amenazas a las organizaciones
-Las vulnerabilidades internas y externas a las organizaciones
-El daño que puede ocurrir dado el potencial de las amenazas explotando vulnerabilidades
-La probabilidad de que el daño se producirá. El resultado final es una determinación del riesgo 

### Definición del marco de gestión del riesgo:

Este modelo de marco de gestión del riesgo se basa en el estándar NIST 800-39.

● Nivel 1 de responsabilidad: los líderes de la organización, con la colaboración del responsable del riesgo deben definir el marco de riesgo organizacional.

● Nivel 2 de responsabilidad: los propietarios de los servicios/procesos (p.e los responsables de cada área funcional y de soporte si fuese necesario) aplicarán su comprensión del marco organizacional del riesgo para dirigir sus preocupaciones específicas a las funciones de negocio.

● Capa 3: los responsables de programas, propietarios de SI y los proveedores comunes de controles (p.e el área de ciberseguridad) aplican su entendimiento del marco de riesgo de la organización en base a cómo los decisores en las capas 1 y 2 decidieron gestionar el riesgo.

El marco de gestión del riesgo es el medio principal para dirigir el riesgo en la capa 3. El marco trata preocupaciones sobre el diseño, desarrollo, implementación, operación y eliminación de los SI organizacionales y los entornos en los que estos operan. 

El trabajo previo para crear este marco estandarizado para la organización será el siguiente:

-Identificar las asunciones que afectan a cómo el riesgo se evalúa, se responde y se monitoriza en la organización: Las organizaciones que identifican, caracterizan y proveen ejemplos representativos de las fuentes de amenazas, vulnerabilidades, consecuencias y determinaciones de probabilidades promocionan una terminología común y un marco de referencia para comparar y tratar el riesgo a través de diferentes áreas, servicios y procesos.
  
-Identificar restricciones para la realización de las actividades de evaluación, respuesta y monitorización del riesgo dentro de la organización.
○ Limitaciones financiera.
○ Requisitos legales, regulatorios y contractuales.
○ La cultura organizacional.

-Identificar el nivel de tolerancia al riesgo de la organización: La tolerancia al riesgo es el nivel de riesgo que una organización está dispuesta a a aceptar en su búsqueda de objetivos estratégicos. Las organizaciones definen la tolerancia al riesgo de
seguridad de la información a nivel organizacional considerando todas las áreas, servicios y procesos. Se pueden utilizar diversas técnicas para identificar el nivel de tolerancia.
  
-Identificar las prioridades y compensaciones consideradas por la organización para la gestión del riesgo: El riesgo se experimenta en diferentes niveles, en diferentes formas y en diferentes tiempos. En la capa 1, las organizaciones realizan concesiones y establecen prioridades para responder a esos riesgos. Las organizaciones tienden a tener múltiples prioridades que a veces entran en conflicto, lo que genera un riesgo potencial.

En muchas organizaciones pequeñas/medianas y/o con poco nivel de madurez respecto a la gestión del riesgo, el marco puede establecerse con una línea base básica y seguir madurando a partir de ahí:

-Metodología de análisis de riesgos, incluyendo valores posibles para la probabilidad e impacto

-Catálogo de activos y amenazas

-Catálogo de potenciales salvaguardas

-Tolerancia al riesgo simplificada 

->|(Llevo un buen rato sin hacer comentarios y me di cuenta ahora, estoy piloto automático de lo soporífero que me parece este profesor, es como si tuviese un audio de loquendo de fondo pero con voz aburrida sumado a que parece no necesitar respirar, termina y parrafo y lleva la mitad del siguiente, no me da para comprender la mitad de las cosas que dice hasta oirlas 3 veces...)|

#### Alineación con el negocio

La gestión de riesgos ayuda a mitigar el aumento de amenazas para las organizaciones. El cambio hacia un enfoque de gestión de riesgos de seguridad se ha estado desarrollando por algún tiempo, según el estudio CISO Insights. 

Los requisitos claves de los programas de gestión el riesgo son: 

-El cumplimiento es solo un factor: El cumplimiento no debe desaparecer en su totalidad incluso en un programa basado en riesgos. Las normas están ahí, pero los jefes y gerentes de un departamento deben empezar a pensar en términos de niveles de riesgo aceptables frente a requisitos de cumplimiento.

-La tolerancia al riesgo evoluciona con el tiempo: Se espera que un plan de evaluación y un perfil de riesgo cambien con el tiempo. Además, es difícil para las empresas evaluar de manera adecuada el riesgo antes de encontrar un problema. Sin embargo, las conversaciones frecuentes sobre con qué están cómodos los gerentes senior y los jefes promueven la conciencia de riesgos en todas las líneas del negocio.

-Hacer funcionar la gestión de riesgos: La gestión de riesgos se divide en tres áreas distintas: estratégica, táctica y operativa. A medida que una empresa se traslada hacia un enfoque basado en riesgos, puede explorar plataformas de evaluación, trabajar para crear perfiles de riesgo y asociarse con proveedores para realizar una evaluación de riesgos.

Para asegurar la madurez del proceso debe quedar alineado con el negocio. En el proceso de identificación del riesgo es necesario que se consulte a los principales líderes de la organización con el objeto de saber qué activos son especialmente importantes para ellos, qué procesos de transformación sufrirá en el corto y medio plazo la organización, cuáles son los escenarios de amenaza/riesgo que les preocupan de verdad, etc.

Este trabajo debe ser bidireccional, de forma que se facilite a la gerencia, y especialmente al consejo de dirección, el entendimiento de los riesgos de la organización y cómo los mismos pueden afectar a los objetivos del negocio. 

#### Cultura del Riesgo

-Es necesario tener una cultura de riesgo que permita reportar, escalar e intervenir los posibles daños o aprovechar las oportunidades.

-La definición de cultura de riesgo abarca los valores, las creencias, las actitudes y el conocimiento sobre el riesgo que se tiene en el interior de una organización.

-Es importante que esta cultura del riesgo de ciberseguridad sea embebida dentro de la cultura de riesgo general de la organización, dado que es parte de este riesgo global.

-Una cultura de riesgos también involucra los cibernéticos, aquí es necesario definir líneas de acción específica en tres áreas:
○ El uso de una metodología alineada con la estrategia de operación
○ Planes flexibles
○ Tener una línea de comunicación con los grupos

#### Roles y Responsabilidades

Dependiendo de la organización, los roles y responsabilidades expresados a continuación podrían variar, aunando algunas personas varios roles o bien estando las responsabilidades de algunos roles diluidas en otros.

-Comité de dirección: El comitñe de dirección es el responsable último de la gestión de riesgos. Si bien delega en la gerencia general su implementación adecuada y eficiente, el directorio tiene la responsabilidad final de la gestión de riesgos.

-Comité de riesgos: El comité de dirección debe conformar un comité de riesgos, el cual se reúna periódicamente y que represente a todas las áreas requeridas (legal, operaciones, financiero, ciberseguridad, TI, etc). 

-Gerencia general: La gerencia general tiene como responsabilidad ejecutar de forma efectiva y eficiente el modelo de gestión de riesgos, todo ello dentro de las políticas, los manuales y los procedimientos previamente establecidos.

-Áreas funcionales y de apoyo: Las distintas áreas de la organización deben involucrarse activamente en la gestión de los riesgos, siendo responsables del funcionamiento del sistema de gestión de riesgos dentro de su área.

-Área especializada en la gestión de riesgos: Las organizaciones deben contar con un área especializada en la gestión de riesgos, generalmente dentro del área de seguridad de la información, la cual debe ser independiente de las áreas funcionales y de
apoyo. El comité debería asegurar que el área especializada en la gestión de riesgos, cuente con recursos suficientes para el pleno desarrollo de sus actividades, así como la independencia suficiente para la toma de decisiones. 

-Auditoría interna: La unidad de auditoría interna, con dependencia directa del comité, debe evaluar el cumplimiento de los procedimientos utilizados para la gestión de cada uno de los riesgos a los que se ve expuesta la organización, de acuerdo a las exigencias contenidas en las presentes instrucciones. 

#### Registro del Riesgo

Documento o herramienta donde se registran todos los nuevos riesgos que afecten a la organización. Deberá ser actualizado de forma regular, tras cada evaluación del riesgos, con cada reunión del comité del comité de riesgos, con los resultados del monitoreo del riesgo y su tratamiento, etc.

Por cada riesgo se debería recopilar la siguiente información: 

-Identificador único

-Fecha de detección

-Probabilidad

-Impacto

-Nivel de riesgo

-Propietario

-Acciones/Salvaguardas de tratamiento

-Acción de contingencia

-Progreso de las acciones

-Estado 

|(Al final de cada parte del modulo hay un mini examen. Las preguntas no se corresponden con el manual, te dicen unas cosas y el manual otras totalmente diferente. Un autentico desastre la verdad...)|

####  Proyecto de clases Día 5: 13/10/2023

### Evaluación del riesgo

Ayuda a la toma de decisiones y entender la gestión de riesgos y cómo pueden afectar a la consecución de sus objetivos, y a la capacidad de eficiencia de los controles ya implantados. Los procedimientos de identificación del riesgo pueden contener:

-Procedimientos en base a evidencias, como por ejemplo las revisiones de datos anteriores.

-Los enfoques metodológicos del equipo, en el que los expertos identifican los riesgos a través de una serie de preguntas.

-Métodos de razonamiento inductivo, como por ejemplo HAZOP. Un razonamiento inductivo es una forma de razonamiento en que la verdad de las premisas apoyan la conclusión, pero no la garantizan. -> |(La única vez que el profesor hace una especie de ejemplo o dinamismo que no le hace parecer un robot y lo hace con cuervos, es esto una señal?)|

En esta primera fase de la metodología se identifican de forma sistemática las posibles causas concretas de los riesgos empresariales (de seguridad), así como los diversos y posibles efectos que debe afrontar la organización

#### Métodos y herramientas para el análisis del riesgo

Se pueden utilizar una serie de herramientas y métodos que facilitarán el análisis de la organización. Entre los más comunes encontramos:

-Check-lists: Se trata de una manera simple de identificar los riesgos. Esta técnica proporciona una lista de las incertidumbres típicas a considerar. Los usuarios se refieren a una lista previamente desarrollada, códigos o normas

-Entrevistas: Se realizan entrevistas con expertos de la organización y/o externos para la dientificaciónd e los riesgos. 

-Análisis Delphi: Los responsables de lograr la ejecución del método Delphi, son varios grupos de expertos dotados de un conocimiento amplio en el tema de gestión de riesgos. Para que esta técnica funcione correctamente se deben lograr opiniones anónimas, individuales y en conjunto, con los miembros encargados.

-Informes de inteligencia externos: A nivel externo a la organización existen diferentes empresas privadas y organismos públicos que producen informes de inteligencia sobre nuevas amenazas y tendencias, ya sea a nivel general o sectorial. Estos informes pueden ser analizados para ver su posible ocurrencia en la organización. Por un lado se dispone de feeds de ciberinteligencia que alertan de nuevo malware, vulnerabilidades y ataques. Por otro, existen organizaciones llamadas ISACs (Information Sharing and Analysis Centers) que proveen de recursos centralizados para la recopilación de información sobre amenazas y que permiten una comunicación bidireccional con sus miembros. 

-What if: El análisis what if se usa en la etapa preliminar de la gestión cuando se comienzan a identificar los riesgos. Este método consiste en programar reuniones con expertos que conozcan en detalle un área, servicio o proceso concreto. En la reunión inicial se plantean interrogantes para evidenciar riesgos futuros. Las reuniones siguientes son para encontrar causas, consecuencias y acciones. Se basa en imaginas casos que impactarían en la organización y validar su probabilidad e impacto final.

Así mismo, existen otra serie de técnicas más avanzadas que pueden utilizarse, si bien requieren de un mayor conocimiento así como de una mayor madurez en la organización:

-Análisis preliminar de riesgos (APR)

-Los 5 por qué

-FME (Failure mode and effective analysis)

-Matriz SWOT (Strenghts, Waknesses, Opportunities and Threats)

-Análisis de árbol de fallas

-Diagrama causa-efecto (o de Ishikawa)

-Cuestionario de análisis de riesgos

-Gráfica de flujos de procesos

-Análisis Modal de Fallos y Efectos (AMFE)

-Análisis funcional de operatividad (HAZOP)

-Análisis de capas de protección (LOPA)

-Análisis de Montecarlo

|(Debido a que son tan avanzados que solo se usan en empresas muy maduras, no los explica, y menos mal, que son un cacho y capaz que cada uno me tomaba 10 minutos resumirlo)|

#### Análisis de impacto del negocio (BIA)

Tiene como principal objetivo identificar las necesidades del negocio en términos de recuperación. Un aspecto importante a tener en cuenta en la elaboración de un BIA son los tiempos:

-RTO (Recovery Time Objective): Tiempo de recuperación de las actividades que hemos identificado bajo unas condiciones mínimas aceptables. Por ejemplo, supongamos que el Responsable del Departamento de Administración nos indica que, en caso de que fallara la plataforma que soporta las aplicaciones para la generación y emisión de la nómina, se deberían recuperar el servicio en un plazo máximo de 24h. En este caso, estableceríamos que el RTO asociado a dicho proceso es de 24h.

-MTD (Maximum Tolerable Downtime): Tiempo máximo tolerable de caída el cual nos determina el tiempo que puede estar caído un proceso antes de que se produzcan efectos desastrosos en la compañía y repercuta en el negocio. Supongamos que el proceso de gestión de nóminas no debe estar interrumpido por un periodo superior a 48h. En este caso, estableceríamos que el MTD asociado a dicho proceso es de 48h.

-RPO (Recovery Point Objective): El grado de dependencia de la actualidad de los datos determina la cantidad máxima de información que se podría perder sin llegar a tener consecuencias inaceptables, formando parte de las políticas de respaldo definidas por la organización. En este sentido, imaginemos que el Responsable del Departamento de Administración nos indica que podrían tolerar una pérdida de información siempre y cuando no se perdieran los datos generados en más de un día completo. Por lo tanto, estableceríamos que el RPO es de 24h.

Por cada servicio o proceso analizado, se debería obtener la siguiente información:

-Identificador y nombre del servicio/proceso.

-Descripción del mismo.

-Datos de contacto del responsable de negocio y técnico junto con sus backups.

-Procesos o servicios que dependen de este: Nombre e identificador, criticidad de la dependencia (p.e. baja, media o alta) y descripción de dicha dependencia.

-Procesos o servicios de los que depende este: Igual que el anterior.

-Las anteriores dependencias permitirán conocer el arbol de interrelaciones entre los servicios/procesos de la organización con el fin de evitar que, en caso de desastre, la falta de un servicio/proceso pueda poner en peligro otros que son críticos.

-Proveedores críticos (externos a la organización): Proveedor, contacto, si existen Acuerdos de Nivel de Servicio y los niveles establecidos. RTO, RPO y MTD.

-Matriz de impacto indisponibilidad servicio / proceso. En las filas las dimensiones de impacto y en las columnas las dimensiones temporales (p.e. 1 hora, 1 día, 1 semana y 1 mes). Así, se podrá saber el impacto de cada periodo de indisponibilidad del servicio o proceso sobre cada dimensión como el daño de imagen o el impacto legal y regulatorio.

#### Identificación de activos

Como mínimo, la evaluación del riesgo deberá determinar los siguientes elementos:

Primero, que activos tenemos, estos interesan por su valor y están expuestos a amenazas que causan cierta degradación que tiene que ver con el impacto, el cual es tanto el valor del activo como la degradación que causaría la amenaza. Las amenazas también tienen cierta probabilidad que da lugar al riesgo

En un sistema de información hay 2 cosas esenciales: la información que manejay los servicios que presta.

Estos activos esenciales marcan los requisitos de seguridad para todos los demás componentes del sistema.

-Subordinados a dicha esencia se pueden identificar otros activos relevantes:

-Datos que materializan la información.

-Servicios auxiliares que se necesitan para poder organizar el sistema.

-Las aplicaciones informáticas (software) que permiten manejar los datos.

-Los equipos informáticos (hardware) y que permiten hospedar datos, aplicaciones y servicios.

-Los soportes de información que son dispositivos de almacenamiento de datos.

-El equipamiento auxiliar que complementa el material informático.

-Las redes de comunicaciones que permiten intercambiar datos.

-Las instalaciones que acogen equipos informáticos y de comunicaciones.

-Las personas que explotan u operan todos los elementos anteriormente citados.

-Los activos esenciales son la información y los servicios prestados; pero estos activos dependen de otros activos más prosaicos como pueden ser los equipos, las comunicaciones, las instalaciones y las frecuentemente olvidadas personas que trabajan con aquellos.

Aunque en cada caso hay que adaptarse a la Organización objeto del análisis, con frecuencia se puede estructurar el conjunto de activos en capas, donde las capas superiores dependen de las inferiores:

-activos esenciales: información que se maneja y servicios prestados.

-servicios internos: que estructuran ordenadamente el sistema de información.

-el equipamiento informático: aplicaciones (software), equipos informáticos (hardware) y comunicaciones.

-soportes de información: discos, cintas, etc.

-el entorno: activos que se precisan para garantizar las siguientes capas: equipamiento y suministros de energía, climatización, etc. mobiliario, los servicios subcontratados a terceros y las instalaciones físicas (edificios, CPDs, etc).

-el personal: usuarios, operadores, administradores y desarrolladores.

#### Amenazas y Vulnerabilidades

|(7:45 Minutos de los cuales los 3 primeros repite el inicio de la identificación de activos que acaba de explicar, este tipo cada vez cae más bajo)|

El siguiente paso consiste en determinar las amenazas que pueden afectar a cada activo. Las amenazas son “cosas que ocurren”. Y, de todo lo que puede ocurrir, interesa lo que puede pasarle a nuestros activos y causar un daño.

-De origen natural: Hay accidentes naturales (terremotos, inundaciones, …). Ante esos avatares el sistema de información es víctima pasiva, pero de todas formas tendremos en cuenta lo que puede suceder: 

-Del entorno (de origen industrial): Hay desastres industriales ante los cuales el sistema de información es víctima pasiva; pero no por ser pasivos hay que permanecer indefensos:

-Causadas por las personas de forma accidental: Las personas con acceso al sistema de información pueden ser causa de problemas no intencionados, típicamente por error o por omisión.

-Causadas por las personas de forma deliberada: Las personas con acceso al sistema de información pueden ser causa de problemas o ataques intencionados, bien con ánimo de beneficiarse indebidamente, bien con ánimo de causar daños y perjuicios a los legítimos propietarios.

Desde el estándar ISO 27001 se dispone de un catálogo de vulnerabilidades generalista que podría servir como base para el trabajo:

-Interfaz de usuario complejas.

-Contraseñas predeterminadas no modificadas.

-Eliminación de medios de almacenamiento sin eliminar datos.

-Sensibilidad del equipo a los cambios de voltaje.

-Sensibilidad del equipo a la humedad, temperatura o contaminantes.

-Inadecuada seguridad del cableado.

-Inadecuada gestión de capacidad del sistema.

-Gestión inadecuada del cambio.

-Clasificación inadecuada de la información.

-Control inadecuado del acceso físico.

-Mantenimiento inadecuado.

-Inadecuada gestión de red.

-Respaldo inapropiado o irregular.

-Inadecuada gestión y protección de contraseñas.

-Protección física no apropiada.

-Reemplazo inadecuado de equipos viejos.

-Falta de formación y conciencia sobre seguridad.

-Inadecuada segregación de funciones.

-Mala segregación de las instalaciones operativas y de prueba.

-Insuficiente supervisión de los empleados y vendedores.

-Especificación incompleta para el desarrollo de software.

-Pruebas de software insuficientes.

-Falta de política de acceso o política de acceso remoto.

-Ausencia de política de escritorio limpio y pantalla clara.

-Falta de control sobre los datos de entrada y salida.

-Falta de documentación interna.

-Carencia o mala implementación de la auditoría interna.

-Falta de políticas para el uso de la criptografía.

-Falta de procedimientos para eliminar los derechos de acceso a la terminación del empleo.

-Desprotección en equipos móviles.

-Falta de redundancia, copia única.

-Ausencia de sistemas de identificación y autenticación.

-No validación de los datos procesados.

-Ubicación vulnerable a inundaciones.

-Mala selección de datos de prueba.

-Copia no controlada de datos.

-Descarga no controlada de Internet.

-Uso incontrolado de sistemas de información.

-Software no documentado.

-Empleados desmotivados.

-Conexiones a red pública desprotegidas.

-Los derechos del usuario no se revisan regularmente.

#### Valoración del riesgo

Una vez identificados los activos y las amenazas a los mismos, es necesario realizar una asignación de valores para los mismos, de forma que podamos saber el valor de un activo, la probabilidad e impacto de una amenaza, y con ello el nivel de riesgo de la organización.

● Valoración de activos:

¿Por qué interesa un activo? Por lo que vale. No se está hablando de lo que cuestan las cosas, sino de lo que valen.

La valoración se puede ver desde la perspectiva de la ‘necesidad de proteger’ pues cuanto más valioso es un activo, mayor nivel de protección requeriremos en la dimensión de seguridad que sea pertinente.

El valor puede ser propio, o puede ser acumulado. Se dice que los activos inferiores en un esquema de dependencias, acumulan el valor de los activos que se apoyan en ellos.

De un activo puede interesar calibrar diferentes dimensiones:

-su confidencialidad: ¿qué daño causaría que lo conociera quien no debe? Esta valoración es típica de datos.

-su integridad: ¿qué perjuicio causaría que estuviera dañado o corrupto? Esta valoración es típica de los datos, que pueden estar manipulados, ser total o parcialmente falsos o, incluso, faltar datos.

-su disponibilidad: ¿qué perjuicio causaría no tenerlo o no poder utilizarlo? Esta valoración es típica de los servicios/procesos.

Adicionalmente, en sistemas dedicados a servicios de la sociedad de la información, frecuentemente es útil valorar:

-la autenticidad: ¿qué perjuicio causaría no saber exactamente quien hace o ha hecho cada acción? Esta valoración es típica de servicios y de los datos.

-la trazabilidad del uso del servicio: ¿qué daño causaría no saber a quién se le presta tal servicio? O sea, ¿quién hace qué y cuándo?

-la trazabilidad del acceso a los datos: ¿qué daño causaría no saber quién accede a qué datos y qué hace con ellos?

Una vez determinadas qué dimensiones interesan de un activo hay que proceder a valorarlo. La valoración es la determinación del coste que supondría recuperarse de una incidencia que destrozara el activo. Hay muchos factores a considerar:

-coste de reposición: adquisición e instalación.

-coste de mano de obra invertida en recuperar el valor del activo.

-lucro cesante: pérdida de ingresos.

-capacidad de operar: confianza de los usuarios y proveedores que se traduce en una pérdida de actividad o en peores condiciones económicas.

-sanciones por incumplimiento de la ley u obligaciones contractuales.

-daño a otros activos, propios o ajenos.

-daño a personas.

-daños medioambientales.

La valoración puede ser cuantitativa (con una cantidad numérica) o cualitativa (en alguna escala de niveles). Los criterios más importantes a respetar son:

-la homogeneidad: es importante poder comparar valores aunque sean de diferentes dimensiones a fin de poder combinar valores propios y valores acumulados, así como poder determinar si es más grave el daño en una dimensión o en otra.

-la relatividad: es importante poder relativizar el valor de un activo en comparación con otros activos.

● Valoración de las amenazas

Cuando un activo es víctima de una amenaza, no se ve afectado en todas sus dimensiones, ni en la misma cuantía. Una vez determinado que una amenaza puede perjudicar a un activo, hay que valorar su influencia en el valor del activo, en dos sentidos:

-Degradación: mide el daño causado por un incidente en el supuesto de que ocurriera. La degradación se suele caracterizar como una fracción del valor del activo y así aparecen expresiones como que un activo se ha visto totalmente degradado o degradado en una pequeña fracción

-Probabilidad: es más compleja de determinar y de expresar. A veces se modela de forma cualitativa por medio de alguna escala nominal o a veces de forma numérica.

● Determinación del impacto potencial

Se denomina impacto a la medida del daño sobre el activo derivado de la materialización de una amenaza. Conociendo el valor de los activos y la degradación que causan las amenazas, es directo derivar el impacto que estas tendrían sobre el sistema

-Impacto acumulado: Es el calculado sobre un activo teniendo en cuenta: su valor acumulado, las amenazas a que está expuesto, el impacto acumulado se calcula para cada activo por cada amenaza y en cada dimensión de valoración, siendo una función del valor acumulado y de la degradación causada:

.El impacto es tanto mayor cuanto mayor es el valor propio o acumulado sobre un activo.

.El impacto es tanto mayor cuanto mayor sea la degradación del activo atacado.

Al calcularse sobre los activos que soportan el peso del sistema de información, permite determinar las salvaguardas de que hay que dotar a los medios de trabajo: protección de los equipos, copias de respaldo, etc.

-Impacto repercutido Es el calculado sobre un activo teniendo en cuenta: su valor propio, las amenazas a que están expuestos los activos de los que depende. El impacto repercutido se calcula para cada activo, por cada amenaza y en cada dimensión de valoración, siendo una función del valor propio y de la degradación causada:

.El impacto es tanto mayor cuanto mayor es el valor propio de un activo.

.El impacto es tanto mayor cuanto mayor sea la degradación y la dependencia del activo atacado.

Al calcularse sobre los activos que tienen valor propio, permite determinar las consecuencias de las incidencias técnicas sobre la misión del sistema de información. Es pues una presentación gerencial que ayuda a tomar una de las decisiones críticas de un análisis de riesgos: aceptar un cierto nivel de riesgo.

-Determinación del riesgo potencial: Se denomina riesgo a la medida del daño probable sobre un sistema. Conociendo el impacto de las amenazas sobre los activos, es directo derivar el riesgo sin más que tener en cuenta la probabilidad de ocurrencia. Por lo general se calcula multiplicando el impacto por la probabilidad, si bien para cada organización se puede adaptar esta formula.

El riesgo crece con el impacto y con la probabilidad, pudiendo distinguirse una serie de zonas a tener en cuenta en el tratamiento del riesgo:

.zona 1 – riesgos muy probables y de muy alto impacto.

.zona 2 – franja amarilla: cubre un amplio rango desde situaciones improbables y de impacto medio, hasta situaciones muy probables pero de impacto bajo o muy bajo.

.zona 3 – riesgos improbables y de bajo impacto.

.zona 4 – riesgos improbables pero de muy alto impacto.

-Riesgo acumulado: Es el calculado sobre un activo teniendo en cuenta:

.El impacto acumulado sobre un activo debido a una amenaza

.La probabilidad de la amenaza.

-Agregación de riesgos: Las organizaciones pueden utilizar la agregación de riesgos para juntar diferentes riesgos discretos o de bajo nivel dentro de un riesgo más general o de alto nivel. La agregación debe realizarse bajo ciertas condiciones:

.Puede agregarse el riesgo repercutido sobre diferentes activos.

.Puede agregarse el impacto acumulado sobre activos que no sean dependientes entre sí, y no hereden valor de un activo superior común.

.No debe agregarse el riesgo acumulado sobre activos que no sean independientes, pues ello supondría sobre ponderar el riesgo al incluir varias veces el valor acumulado de activos superiores.

.Puede agregarse el riesgo de diferentes amenazas sobre un mismo activo, aunque conviene considerar en qué medida las diferentes amenazas son independientes pueden ser concurrentes.

.Puede agregarse el riesgo de una amenaza en diferentes dimensiones.

->|(POR DIOS CUANTAS LISTAS LLEVO YA, ESTE SEÑOR NO PARA)|

#### Modelos de valoración de activos y del riesgo

De cara a valorar el valor de los activos, la probabilidad y el impacto de una amenaza, existen diferentes modelos que pueden ser aplicados:

Modelos cuantitativos: Se basan en asignar valores numéricos exactos o en rangos determinados. Estos modelos, si bien a priori parecen los más adecuados, requieren de un gran nivel de las organizaciones, y aún así es complicado en varios casos.

Modelos cualitativos: Se basan en asignar valores de entre un rango definido previamente. Para ello las mediciones deben ser relacionadas teniendo en cuenta la comparación de los activos y las amenazas entre si, dado que en muchos casos el valor será relativo

Modelos semi-cuantitativos: : Se encuentran entre el cualitativo y cuantitativo dando como resultado valoraciones aproximadas en lugar de exactas o absolutas. Estos métodos son útiles cuando no se puede realizar mediciones o valoraciones directas y se acepta la posibilidad de realizar inferencias.

-Métodos cuantitativos:

Ventajas:

.Permite la definición de las consecuencias de un modo cuantitativo.

.Permiten el análisis de beneficio/coste durante la selección de las salvaguardas.

.Se obtiene una imagen mas ajustada de la valoración de riesgos.

Desventajas:

.Las medidas cuantitativas dependen del alcance y exactitud de las escalas de medida.

.El resultado del análisis puede ser no preciso y a veces confuso.

.Debe ser enriquecido con una descripción cualitativa.

.Suelen ser mas caros y requieren de mayor experiencia

-Métodos cualitativos:

Ventajas:

.Permite determinar grandes áreas de riesgos en un corto periodo de tiempo y sin mucha experiencia.

.Suelen ser análisis mas fáciles y económicos.

Desventajas:

.No permite la estimación de probabilidades y resultados utilizando medidas numéricas.

.El análisis de coste/beneficio es mas difícil durante la fase de determinación de las salvaguardas.

.Los resultados son de carácter general mediante aproximaciones.

#### Escenarios de riesgo

La estimación, prevención y reducción de riesgos es la clave para evitar pérdidas y desastres en cualquier organización. Uno de los pasos para lograr estos objetivos es la construcción de una serie de escenarios de riesgos, amenazas y vulnerabilidades. Su objetivo principal es tener una visión global de los riesgos, roles e interacciones para identificar prioridades en el tratamiento del riesgo. Para ello se pueden tomar 2 aproximaciones:

-De arriba a abajo: En esta aproximación se comienza con los objetivos de negocio globales y se realiza un análisis de los escenarios de riesgos más probables y relevantes que podrían afectar a dichos objetivos

-De abajo arriba: En esta aproximación se comienza con un conjunto genérico de escenarios para definir escenarios más específicos y concretos para la organización.

Estas aproximaciones son complementarias y deberían usarse en conjunción. Estos escenarios deben ser relevantes y enlazados a los riesgos específicos de la organización

Aproximación práctica sobre cómo desarrollar estos escenarios:

-Comenzar con una lista genérica de riesgos para definir un conjunto inicial de escenarios para la organización.

-Validar dichos escenarios contra los objetivos del negocio.

-Refinar el conjunto de escenarios seleccionado basada en la validación anterior. Categorizarlos de forma que se alineen con la criticidad de la organización.

-Reducir el número de escenarios a un conjunto manejable.

-Mantener todos los riesgos en una lista de forma que puedan ser reevaluados en la siguiente iteración e incluidos para su análisis en detalle si se vuelven relevantes en ese momento.

-Incluir un “evento no especificado” en los escenarios para tratar los incidentes que no han sido cubiertos por los escenarios especificados.

Es importante que por cada escenario se especifique no sólo la amenaza, sino como la misma podría hacerse realidad en la organización. Se debe definir por cada uno el evento que lo produciría, cuándo y cómo sucedería.

#### Modelado de amenazas

Es un conjunto de técnicas que permiten analizar las potenciales amenazas que un desarrollo de software podría tener con el fin de asegurar que las mismas son tratadas mediante controles. Los pasos para crear un modelo de amenazas son: 

1-Crear una descripción de la arquitectura: Utilice diagramas y tablas para documentar la arquitectura, incluyendo sub-sistemas, fronteras de confianza y flujo de datos. Suele ser necesario la creación de diagramas de componentes físicos así como diagramas de flujos de datos.

2-Descomponer la aplicación: Descomponga la arquitectura de la aplicación, incluyendo la capa de red y el diseño de infraestructura, para crear un perfil de seguridad para la aplicación.

3-Identificar las amenazas: Utilice la información obtenida en los pasos 1 y 2 y la mentalidad de un atacante para identificar las amenazas más importantes para el contexto y el escenario del sistema.

4-Documentar las amenazas: Documente utilizando una plantilla que capture el conjunto básico de atributos de cada amenaza.

5-Asignar prioridades a las amenazas: Utilice una calificación de amenazas para centrarse en las áreas donde existe mayor vulnerabilidad y riesgo.

Para la identificación y documentación de las amenazas existen diferentes modelos. Uno de los más conocidos y utilizados es el modelo STRIDE creado por Microsof

Las amenazas se clasifican en las siguientes categorías que facilita en análisis de las potenciales amenazas de una aplicación:

-Suplantación de identidad de usuario (Spoofing).

-Modificación indebida (Tampering).

-Repudio (Repudiation).

-Divulgación de información (Information Disclosure).

-Denegación de servicio (DoS).

-Elevación de privilegios (Elevation of Privileges).

#### Metodologías de análisis del riesgo

Si bien en este curso nos hemos centrado principalmente en la metodología MAGERIT para la evaluación del riesgo, existen otras metodologías que pueden ser utilizadas también para la gestión del riesgo como el tratamiento y la monitorización:

-OCTAVE

-MAGERIT

-Estándar Internacional ISO/IEC 27005

-MEHARI

-CRAMM

-NIST 800-30

#### Informe de evaluación del riesgo

Recoge todas las evidencias recopiladas y las conclusiones obtenidas sobre el entorno del riesgo, las amenazas encontradas, su valoración en impacto y probabilidad y el mapa de riesgo de la organización. A la vez este informe puede ser continuado en la siguiente fase incluyendo las salvaguardas existentes y a implementar junto con el riesgo residual tras la implementación de las mismas.

-Plantilla simple: El contenido básico de la misma debería ser el siguiente

.Descripción de los activos: Descripción procesos de negocio o áreas, y por cada uno. Su árbol de activos y dependencias. 

.Resumen del valor de los activos.

.Descripción del riesgo.

.Descripción de los valores seleccionados para la probabilidad y degradación en las amenazas.

.Mapas de riesgo: Riesgo potencial y Riesgo presente. 

.Debilidades o vulnerabilidades.

.Anexo resumen áreas, servicios, valoraciones, red/es donde se encuentra la información, aplicaciones, herramientas y repositorios, información gestionada en general, dónde se encuentra localizada la información en papel, dónde se encuentra localizada la información digital y responsable del área. 

-Plantilla NIST 800-30: 

-Resumen ejecutivo:

.Fecha de la evaluación.

.Resumen del propósito.

.Descripción del alcance

-Cuerpo del informe:

.Propósito de la evaluación.

.Restricciones y asunciones.

.Entradas tolerancia riesgo.

.Identificar y describir el modelo de riesgo y la aproximación analítica utilizados.

.Razonamiento para cada decisión relacionada con el riesgo durante la valoración.

.Incertidumbres del proceso.

.Si el análisis incluye áreas de negocio, describir los servicios, interconexiones y dependencias, así como la TI que las soporta.

.Si el análisis incluye SI de la organización, describir los sistemas.

.Resumir los resultados de la evaluación.

.Identificar el marco temporal durante el cual será válida la evaluación.

.Listar los riesgos debidos a amenazas de adversarios.

.Listar los riesgos debido a otras amenazas.

-Apéndices:

.Listado de referencias y fuentes de información.

.Listado del equipo o personas individuales que han realizado la evaluación.

.Listado de detalles de la evaluación y de cualquier evidencia de soporte. 

### Mitigación del Riesgo

A la vista de los impactos y riesgos a que están expuestos las áreas, servicios, procesos, los sistemas y aplicaciones, hay que tomar una serie de decisiones condicionadas por diversos factores:

-La gravedad del impacto y/o del riesgo.

-Las obligaciones a las que por ley esté sometida la organización.

-Las obligaciones a las que por reglamentos sectoriales esté sometida la organización.

-Las obligaciones a las que por contrato esté sometida la organización. 

Dentro del margen de maniobra que permita este marco, pueden aparecer consideraciones adicionales sobre la capacidad de la Organización para aceptar ciertos impactos de naturaleza intangible tales como:

-Imagen pública de cara a la sociedad.

-Política interna.

-Relaciones con los proveedores.

-Relaciones con los clientes o usuarios.

-Relaciones con otras organizaciones.

-Nuevas oportunidades de negocio.

-Acceso a sellos o calificaciones reconocidas de seguridad. 

Todas las consideraciones anteriores desembocan en una calificación de cada riesgo significativo, determinándose si:

1. Es crítico en el sentido de que requiere atención urgente.
   
2. Es grave en el sentido de que requiere atención.
 
3. Es apreciable en el sentido de que pueda ser objeto de estudio para su tratamiento.
 
4. Es asumible en el sentido de que no se van a tomar acciones para atajarlo:

.Cuando el impacto residual es asumible.

.Cuando el riesgo residual es asumible.

.Cuando el coste de las salvaguardas oportunas es desproporcionado en comparación al impacto y riesgo residuales. 

#### Evaluación y opciones de tratamiento del riesgo

Para poder evaluar y tratar el riesgo, hay que entender una serie de conceptos, tanto para la propia evaluación como para poder determinar a posteriori la mejor opción para su tratamiento

-Interpretación de los valores de impacto y riesgo residuales:

Impacto y riesgo residual son una medida del estado presente, entre la inseguridad potencial y las medidas adecuadas que reducen impacto y riesgo a valores aceptables. Si el valor residual es igual al valor potencial, las salvaguardas existentes no valen para nada, típicamente no porque no haya nada hecho, sino porque hay elementos fundamentales sin hacer. 

Es importante entender que un valor residual es sólo un número. Para su correcta interpretación debe venir acompañado de la relación de lo que se debería hacer y no se ha hecho; es decir, de las vulnerabilidades que presenta el sistema

-Aceptación del riesgo: El comité de dirección, sometida al análisis de riesgos, debe determinar el nivel de impacto y riesgo aceptable. Más propiamente dicho, debe aceptar la responsabilidad de las insuficiencias. Esta decisión no es técnica. Puede ser una decisión política o gerencial o puede venir determinada por ley o por compromisos contractuales con proveedores o usuarios. Estos niveles de aceptación se pueden establecer por activo o por agregación de activos. 

Cualquier nivel de impacto y/o riesgo es aceptable si lo conoce y acepta formalmente la dirección. Cabe destacar que esta no es una opción de tratamiento del riesgo, per se, sino que el riesgo existente es aceptado sin más por el motivo que sea

-Tratamiento del riesgo: La dirección puede decidir aplicar algún tratamiento al sistema de seguridad desplegado para proteger el sistema de información. Hay dos grandes opciones:

.Reducir el riesgo residual (aceptar un menor riesgo).

.Ampliar el riesgo residual (aceptar un mayor riesgo).

Para tomar una u otra decisión hay que enmarcar los riesgos soportados por las áreas/servicios/procesos y sus aplicaciones/sistemas dentro de un contexto más amplio que cubre un amplio espectro de consideraciones de las que podemos apuntar algunas:

.Cumplimiento de obligaciones; sean legales, regulación pública o sectorial, compromisos internos, misión de la Organización, responsabilidad corporativa, etc.

.Posibles beneficios derivados de una actividad que en sí entraña riesgos.

.Condicionantes técnicos, económicos, culturales, políticos, etc.

.Equilibrio con otros tipos de riesgos: comerciales, financieros, regulatorios, medioambientales, laborales, etc.

En condiciones de riesgo residual extremo, casi la única opción es reducir el riesgo. En condiciones de riesgo residual aceptable, podemos optar entre aceptar el nivel actual o ampliar el riesgo asumido.

En términos de zonas de riesgos, se pueden tomar las siguientes decisiones:

Zona 1 – riesgos muy probables y de muy alto impacto; posiblemente nos planteemos sacarlos de esta zona.

Zona 2 – riesgos de probabilidad relativa e impacto medio; se pueden tomar varias opciones.

Zona 3 – riesgos improbables y de bajo impacto; o los dejamos como están, o permitimos que suban a mayores si ello nos ofreciera alguna ventaja o beneficio en otro terreno.

Zona 4 – riesgos improbables pero de muy alto impacto; suponen un reto de decisión pues su improbabilidad no justifica que se tomen medidas preventivas, pero su elevado impacto exige que tengamos algo previsto para reaccionar; es decir, hay que poner el énfasis en medidas de reacción para limitar el daño y de recuperación del desastre si ocurriera.

También conviene considerar la incertidumbre del análisis. Hay veces que sospechamos las consecuencias, pero hay un amplio rango de opiniones sobre su magnitud. En otras ocasiones la incertidumbre afecta a la probabilidad.

-Buscar formas de mejorar la previsión, típicamente indagando en foros, centros de respuesta a incidentes o expertos en la materia.

-Evitar el riesgo cambiando algún aspecto, componente o arquitectura del sistema.

-Tener preparados sistemas de alerta temprana y procedimientos flexibles de contención, limitación y recuperación del posible incidente.

#### Estudio del coste/beneficio

No se puede invertir en salvaguardas más allá del valor que queremos proteger. Es intencionado el hecho de que el riesgo caiga fuertemente con pequeñas inversiones y que el coste de las inversiones se dispare para alcanzar niveles de seguridad cercanos al 100%.

-Análisis cuantitativo: En la práctica, cuando hay que protegerse de un riesgo que se considera significativo, aparecen varios escenarios hipotéticos:

E0: si no se hace nada.

E1: si se aplica un cierto conjunto de salvaguardas.

E2-N: si se aplican otros conjuntos de salvaguardas .

El análisis económico tendrá como misión decidir entre estas opciones, siendo E0 una opción posible, que pudiera estar justificada económicamente

-Análisis cuantitativo: Cuando el análisis es cualitativo, en la balanza de costes beneficios aparecen aspectos intangibles que impiden el cálculo de un punto numérico de equilibrio. Entre los aspectos intangibles se suelen contemplar:

.Aspectos reputacionales o de imagen.

.Aspectos de competencia: comparación con otras organizaciones de mismo ámbito de actividad

.Cumplimiento normativo, que puede ser obligatorio o voluntario.

.Capacidad de operar.

.Productividad.

-Estudio mixto: En análisis de riesgos meramente cualitativos, la decisión la marca el balance de costes y beneficios intangibles, si bien siempre hay que hacer un cálculo de lo que cuesta la solución y cerciorarse de que el gasto es asumible. De lo contrario, la supuesta solución no es una opción

#### Opciones de tratamiento del riesgo

Si los riesgos no se aceptan será necesario tener una estrategia para tratarlos.

-Eliminación: La eliminación de la fuente de riesgo es una opción frente a un riesgo que no es aceptable. En un sistema podemos eliminar varias cosas, siempre que no afecten a la esencia de la organización. Las decisiones de eliminación de las fuentes de riesgo suponen realizar un nuevo análisis de riesgos sobre el sistema modificado.

-Mitigación: La mitigación del riesgo se refiere a una de dos opciones:

.Reducir la degradación causada por una amenaza.

.Reducir la probabilidad de que una amenaza de materializa.

En ambos casos lo que hay que hacer es ampliar o mejorar el conjunto de salvaguardas.

.Salvaguardas preventivas: Buscan prevenir que una amenaza se haga real, por lo que disminuyen la probabilidad.

.Salvaguardas correctivas: Buscan minimizar el daño realizado en caso de materializarse la amenaza, por lo que disminuyen el impacto

.Salvaguardas detectivas: Buscan detectar la ocurrencia de una amenaza. No modifican el impacto de forma directa, pero son necesarios para el funcionamiento de las salvaguardas correctivas.

-Compartición o transferencia: Tradicionalmente se ha hablado de transferir el riesgo. Como la transferencia puede ser parcial o total, es más general hablar de compartir el riesgo. Hay dos formas básicas de compartir riesgo:

Hay dos formas básicas de compartir riesgo: 

.Riesgo cualitativo: se comparte por medio de la externalización de componentes del sistema, de forma que se reparten responsabilidades: unas técnicas para el que opera el componente técnico; y otras legales según el acuerdo que se establezca de prestación del servicio.

.Riesgo cuantitativo: se comparte por medio de la contratación de seguros, de forma que a cambio de una prima, el tomador reduce el impacto de las posibles amenazas y el asegurador corre con las consecuencias. Hay multitud de tipos y cláusulas de seguros para concretar el grado de responsabilidad de cada una de las partes.

Cuando se comparten riesgos cambia, bien el conjunto de componentes del sistema o bien su valoración, requiriéndose un nuevo análisis.

-Financiación: Cuando se acepta un riesgo, la organización hará bien en reservar fondos para el caso de que el riesgo se concrete y haya que responder de sus consecuencias. También puede ser parte de los contratos de aseguramiento.

-Cálculo de la disminución del riesgo: Una vez finalizado la evaluación del tratamiento y los controles a implementar, se deben generar los nuevos mapas de riesgo que muestren la situación de la organización tras su implementación.

#### Requisitos de un programa de ciberseguridad

Un programa de ciberseguridad busca la implementación de los proyectos de seguridad, entendiendo por tales proyectos los que permitirán materializar las decisiones adoptadas para el tratamiento de los riesgos. Para ello, se deben realizar los siguientes pasos para su implementación: 

-Identificación de proyectos de seguridad

En última instancia se trata de implantar o mejorar la implantación de una serie de salvaguardas que lleven el impacto y el riesgo a los niveles residuales determinados por la Dirección. Este tratamiento de las salvaguardas se materializa en una serie de tareas a llevar acabo. Cada programa de seguridad debe detallar:

.Su objetivo genérico.

.Las salvaguardas concretas a implantar o mejorar, detallando sus objetivos de calidad, eficacia y eficiencia

.La relación de escenarios de impacto y/o riesgo que afronta: activos afectados, tipos de activos, amenazas afrontadas, valoración de activos y amenazas y niveles de impacto y riesgo

.La unidad responsable de su ejecución.

.Una estimación de costes, tanto económicos como de esfuerzo de realización.

.Una relación de subtareas a afrontar.

.Una estimación del estado de riesgo a su finalización.

.Un sistema de indicadores de eficacia y eficiencia que permitan conocer en cada momento la calidad del desempeño de la función de seguridad que se desea y su evolución temporal.

Las estimaciones anteriores pueden ser muy precisas en los programas sencillos; pero pueden ser simplemente orientativas en los programas complejos que conlleven la realización de un proyecto específico de seguridad. 

.Estudio de la oferta del mercado: productos y servicios.

.Coste de un desarrollo específico, propio o subcontratado.

.Si se estima adecuado un desarrollo específico hay que determinar: La especificación funcional y no-funcional del desarrollo. El método de desarrollo que garantice la seguridad del nuevo componente. Los mecanismos de medida que debe llevar empotrados. Los criterios de aceptación y el plan de mantenimiento.

-Plan de ejecución

Hay que ordenar en el tiempo los proyectos de seguridad teniendo en cuenta los siguientes factores:

.La criticidad, gravedad o conveniencia de los impactos y riesgos que se afrontan, teniendo máxima prioridad los programas que afronten situaciones críticas.

.El coste del programa.

.La disponibilidad del personal propio para responsabilizarse de la dirección de las tareas programadas.

.Las posibles dependencias entre proyectos. En muchos casos puede ocurrir que el comienzo de un proyecto dependa de la salida de otro/s. 

.Otros factores como puede ser la elaboración del presupuesto anual de la Organización, las relaciones con otras organizaciones, la evolución del marco legal, reglamentario o contractual, etc

Típicamente, un plan de seguridad se planifica en tres niveles de detalle:

.Plan director: A menudo denominado plan de actuación, trabaja sobre un periodo largo, estableciendo las directrices de actuación.

.Plan anual: Trabaja sobre un periodo corto, estableciendo la planificación de los programas de seguridad.

.Plan de proyecto: Trabaja en el corto plazo, estableciendo el plan detallado de ejecución de cada programa de seguridad.

-Ejecución del plan

El objetivo de esta fase es el de alcanzar los objetivos previstos en el plan de seguridad para cada proyecto planificado. Como salida del mismo tendremos lo siguiente:

.Salvaguardas implantadas.

.Normas de uso y procedimientos de operación.

.Sistema de indicadores de eficacia y eficiencia del desempeño de los objetivos de seguridad perseguidos.

.Modelo de valor actualizado.

.Mapa de riesgos actualizado.

.Estado de riesgo actualizado.

#### Informe de tratamiento del riesgo

incorpora las diferentes opciones de tratamiento del riesgo junto con el mapa del riesgo tras su implementación. Este informe puede ser independiente o bien incluirse como continuación del informe de evaluación de riesgos. 

Como mínimo debería contener la siguiente información:

-Introducción.

-Enfoque metodológico.

-Situación actual:

.Debilidades.

.Mapas de riesgo.

.Resumen de los planes de acción. 

-Descripción en detalle de los planes de acción.

.Descripción de la medida.

.Objetivos concretos buscados.

.Actividades a realizar.

.Nivel de madurez buscado.

.Entorno tecnológico involucrado.

.Recursos necesarios.

.Métricas propuestas.

-Acciones de monitorización necesarias

-Apéndices:

.Resumen de los planes de acción.

.Plan de proyecto con todos los proyectos necesarios, con fecha de inicio y fin.

#### Frameworks de seguridad

Existen diferentes frameworks de seguridad de la información y ciberseguridad que nos permitirán contar con un conjunto de salvaguardas base entre las que poder escoger para los planes de mitigación del riesgo, así como establecer un marco general de gestión de la seguridad.

-ISO 27001 

La norma se encuentra dividida en dos partes. La primera se compone de 10 puntos entre los cuales se encuentran:

.Objeto y campo de aplicación.

.Referencias normativas.

.Términos y definiciones.

.Contexto de la organización.

.Liderazgo.

.Planificación.

.Soporte.

.Operación

.Evaluación de desempeño.

.Mejora. 

La segunda parte, está conformada por el anexo A, que establece los objetivos de control y los controles de referencia

-NIST CSF (Cyber Security Framework)

Este marco no provee nuevas funciones o categorías de ciberseguridad, sino recopila las mejores prácticas y las agrupa según afinidad. Se centra en el uso de impulsores de negocio para guiar las actividades de ciberseguridad y considerar los riesgos de ciberseguridad como parte de los procesos de gestión de riesgos de la organización. El framework consta de tres partes: el marco básico, el perfil del marco y los niveles de implementación.

#### Níveles de implementación

Los tiers proporcionan un contexto sobre cómo una organización ve el riesgo de la ciberseguridad y los procesos implementados para manejarlo.

-Las escalas describen el grado en que las prácticas de gestión de riesgos de ciberseguridad de una empresa exhiben las características definidas en el marco. Por ello mismo, actúan como niveles de madurez en los procesos de ciberseguridad.

-Los niveles de implementación caracterizan las prácticas de una compañía en un rango. 4 niveles: parcial / riesgo informado / repetible / adaptativo.

-Estos niveles reflejan una progresión desde respuestas informales y reactivas hasta enfoques que son ágiles y están informados sobre el riesgo. 

####  Proyecto de clases Día 6: 15/10/2023

### Controles de mitigación: Seguridad administrativa y física

-Gobierno de la ciberseguridad: De acuerdo al modelo establecido por el IT Governance Institute (ISACA), la seguridad requiere la participación activa de los altos directivos de las empresas. 

.El gobierno corporativo es el conjunto de responsabilidades y prácticas ejercidas por los responsables de una empresa con el objetivo de:

.Proporcionar dirección estratégica, Asegurar que los objetivos sean alcanzados, Garantizar que los riesgos sean gestionados adecuadamente,

.Verificar que los recursos de la empresa sean utilizados de manera responsable.

La ciberseguridad debe ser parte integral del gobierno corporativo para lograr sus objetivos, para cubrir las necesidades actuales y futuras. 

El objetivo de la seguridad de la información es desarrollar, implementar y administrar un programa de seguridad que alcance los siguientes cinco resultados básicos de un gobierno eficaz de seguridad:

-Alineación estratégica: Alinear la seguridad de la información con la estrategia de negocio.

-Administrar los riesgos: Ejecutar medidas apropiadas para mitigar los riesgos y reducir el posible impacto que tendrían en los activos de información.

-Entrega de valor: Optimizar las inversiones en la seguridad.

-Administración de recursos: Utilizar el conocimiento y la infraestructura de la segurida dde la información con eficiencia y eficacia.

-Medición del desempeño: Monitorizar y reportar métricas de seguridad de la información para garantizar que se alcancen los objetivos.

Para lograr un gobierno eficaz, la alta dirección debe establecer un marco que guíe el desarrollo y mantenimiento de un programa integral de seguridad: 

La estrategia tiene como entradas la estrategia de negocio, el estado actual y deseado de seguridad, los requerimientos del negocio y procesos, los resultados de la evaluación de riesgos y requisitos regulatorios. La estrategia proporciona la base para el desarrollo de los planes de acción en cumplimiento de los objetivos de seguridad.

Debido a que las organizaciones tienen diversas necesidades y sus enfoques de gobierno pueden variar, se ha identificado un conjunto básico de principios y buenas prácticas para ayudar a guiar estos esfuerzos.

-Principios:

.El riesgo de seguridad de la información es más que un problema de TI: es un componente clave en la gestión de riesgos de la organización, lo que requiere la supervisión de la dirección.

.El riesgo tiene implicaciones legales que los directivos deben entender.

.El riesgo debe ser un tema de discusión en la junta de dirección de forma periódica.

.Los directores deben implementar un marco efectivo de gestión de riesgos en la organización.
 
.La alta dirección y el consejo deben evaluar el riesgo de seguridad de la información al igual que otros riesgos a nivel organizacional para asegurar que los riesgos se acepten, eviten, mitiguen o transfieran.

-Buenas prácticas:

.Realizar una evaluación anual de la seguridad de la información a cargo de la alta dirección.

.Llevar a cabo evaluaciones de riesgos periódicos como parte de un programa global de gestión de riesgos.

.Implementar políticas y procedimientos basados en las evaluaciones de riesgos.

.Establecer una estructura de gestión de seguridad para asignar individualmente roles y responsabilidades.

.Desarrollar iniciativas para brindar seguridad de la información a redes, instalaciones, sistemas e información en general.

.Tratar la seguridad de la información como parte integral durante el ciclo de vida de los sistemas de información.

.Proporcionar concienciación, capacitación y educación en seguridad de la información para todo el personal.

.Conducir pruebas y evaluaciones periódicas para medir la efectividad de las políticas y procedimientos de seguridad de la información.

.Crear y ejecutar planes de acción para manejar cualquier deficiencia de seguridad de la información.

.Desarrollar e implementar procedimientos de respuesta a incidentes.

.Establecer planes, procedimientos y pruebas para proporcionar continuidad de las operaciones.

.Utilizar las mejores prácticas de la industria como ISO 27001, NIST SP 800, CoBIT, entre otros.

#### Políticas, procedimientos y guías

El cuerpo documental de la seguridad se compone de 3 patas:

-Políticas de seguridad: Las políticas de seguridad son documentos de alto nivel que establecen la visión de la dirección sobre la protección de los activos de la organización. Al ser de alto nivel, definen el qué, qué debe ser protegido, qué es más importante, qué es más prioritario, qué está permitido y qué no lo está y qué tratamiento se le darán a los problemas de seguridad. Su objetivo fundamental es proporcionar orientación y apoyo a la dirección para la seguridad de la información de acuerdo con los requisitos de la organización y con las regulaciones y leyes vigentes.

-Procedimientos: Se trata de documentos que desarrollan a bajo nivel las políticas de seguridad pero de forma agnóstica a tecnologías concretas. Se deben definir los pasos a dar y, cuando sea posible, un flujograma que detalle las entradas y salidas, los pasos intermedios, los puntos de decisión y los resultados de dichas decisiones 

-Guías: Estos documentos, los de más bajo nivel, muestran para cada tecnología concreta el cómo aplicar los procedimientos. No tiene porque haber una correspondencia exacta de un procedimiento a una guía, puesto que estas últimas pueden cubrir diferentes procedimientos para una tecnología concreta. Sin embargo, es importante asegurar que todos los procedimientos estén cubiertos por una guía.

Con el objeto de desarrollar políticas de seguridad de calidad, debemos tener en cuenta varios aspectos:

-Adaptabilidad: La organización no debe adaptarse a un documento. La política debe adaptarse a los requerimientos de la organización. Por ello, se descarta la opción de copiar el documento de otra organización, más aún, si tenemos en cuenta que son diferentes los requerimientos de un tipo de organización de otra, como organismos públicos o privado, o del sector industrial y de banca

-Definición de los objetivos: El documento precisa definir los objetivos de seguridad de la información, su forma de aprobación y la manera en que han de ser revisados, sin entrar en detalles acerca de estos procesos.

-Compromiso: La Alta Dirección de la organización debe expresar sin lugar a dudas, su compromiso total con el sistema y con su propósito final, que no debe ser otro que cumplir con los requerimientos en materia de seguridad de la información de las partes interesadas en el sistema.

-Comunicación: El documento debe establecer quién o quiénes son los encargados de comunicar a las partes interesadas los alcances y la evolución del sistema, no solo durante la implementación del mismo, sino en adelante, en la medida en que se presenten revisiones, actualizaciones o mejoras.

-Revisiones: La política de Seguridad de la Información debe ser revisada en forma periódica, y estas revisiones, así como los responsables de las mismas, y los periodos de tiempo en los que se efectuarán, son temas que se deben incluir en el documento.

-Alineamiento legal, regulatorio y normativo: Dado que las leyes y regulaciones, tanto generales como sectoriales, son de obligado cumplimiento, se hace vital que las políticas de seguridad estén alineadas con las mismas y desarrollen su cumplimento dentro de la organización. 

De acuerdo a las buenas prácticas dela industria, una política de seguridad debería incluir los siguientes puntos:

-Introducción: Breve explicación del asunto principal de la política.

-Ámbito de aplicación: Descripción de los departamentos, áreas o actividades de una organización a las que afecta/aplica la política. Cuando es relevante en este apartado se mencionan otras políticas relevantes a las que se pretende dar cobertura desde ésta.

-Objetivos: Descripción de la intención de la política.

-Principios: Descripción de las reglas que conciernen a acciones o decisiones para alcanzar los objetivos. En algunos casos puede ser de utilidad identificar previamente los procesos clave asociados con el asunto principal de la política para pasar posteriormente a identificar las reglas de operación de los procesos. 

-Responsabilidades: Descripción de quién es responsable de qué acciones para cumplir con los requisitos de la política. En algunos casos, esto puede incluir una descripción de los mecanismos organizativos, así como las responsabilidades de las personas con roles designados.

-Resultados clave: Descripción de los resultados relevantes para las actividades de la organización que se obtienen cuando se cumplen los objetivos.

-Políticas relacionadas: Descripción de otras políticas relevantes para el cumplimiento de los objetivos, usualmente se indican detalles adicionales en relación a temas específicos.

Finalmente, las políticas de seguridad más típicas en una organización serían las siguientes:

-Gestión de activos: Inventariado y gestión del ciclo de vida de los activos.

-Clasificación de la información: Guía de alto nivel sobre los niveles de clasificación de la información en la organización y cómo catalogar la misma de acuerdo a los criterios establecidos.

-Uso aceptable: Qué entiende la organización por uso aceptable de los diferentes activos aportados por la misma a los usuarios.

-Control de Acceso: Guías de alto nivel sobre la gestión de identidades y control de acceso.

-Seguridad para proveedores: Criterios generales para asegurar que los proveedores con acceso a nuestros sistemas y/o información cumplen con un mínimo de requisitos que aseguren un nivel de seguridad adecuados.

-Continuidad de negocio: Establecer los parámetros generales para la continuidad de negocio en caso de un desastre y asegurar la recuperación de sistemas y servicios en un tiempo razonable que minimice el impacto a la organización a la vez que el coste.

-Gestión de incidentes: Criterios generales para asegurar que en caso de incidente se disponen de los medios y conocimiento necesario para detectarlo, investigarlos y priorizarlos, contenerlos, resolverlos y recuperar el entorno.

-BYOD: Criterios generales para el uso razonable de dispositivos personales de comunicación para el acceso y trabajo con al información de la organización.

-Dispositivos móviles y teletrabajo: Criterios generales para asegurar la seguridad en el uso de dispositivos móviles aportados por la organización así como cuando se esté teletrabajando.

-Gestión de claves y certificados: Criterios generales para la gestión del ciclo de vida de los certificados, tanto los emitidos internamente como los adquiridos externamente, desde su creación a su revocación.

-Eliminación y destrucción de la información: Criterios generales para la eliminación y destrucción de información en papel o digital, así como para la retirada de medios de almacenamiento en base a la clasificación de la información contenida.

-Escritorios y pantallas limpios: Requisitos para el uso de información en el espacio de trabajo individual o colectivo para evitar robo u espionaje.

-Gestión del cambio: Criterios de seguridad a introducir en el proceso de gestión del cambio para asegurar que el mismo se realiza de forma segura, incluyendo aspectos como la aprobación, prueba de los mismos en entornos previos a producción en caso de posibles impactos a la seguridad, existencia de planes de vuelta atrás en caso de problemas, etc.

-Copias de seguridad: Criterios generales sobre copias de seguridad de acuerdo a la clasificación de la información, teniendo en cuenta aspectos como la periodicidad, tipología, periodo de retención, pruebas, etc.

-Transferencia de información: Criterios generales para asegurar la información cuando es transferida, tanto mediante correos electrónicos como mediante procesos automatizados.

#### Organización de la seguridad de la información

Para poder responder de forma eficaz y eficiente a los retos de la seguridad de la información en la organización, se deben organizar y estructurar las responsabilidades y las funciones relacionadas con la seguridad, así como asegurar que no existan lagunas.

El objetivo es describir y documentar la estructura de responsabilidades, competencias y relaciones relativas a la seguridad de la información en la organización.

-Funciones y responsabilidad de la seguridad de la información: Se trata de definir las responsabilidades de cada empleado o puesto de trabajo en relación a la Seguridad de la Información. Es decir, sumar a las funciones de cada puesto aquellas funciones que tengan que ver con la seguridad de la información. Pero no basta con definirlas, también deberemos comunicar a cada persona implicada en la Seguridad de la Información sus roles y responsabilidades. También se deben incluir a terceras partes, dado que son una parte crítica del proceso en muchas ocasiones.

-Segregación de tareas: Se trata de evitar usos o accesos indebidos a la información o a las aplicaciones o sistemas que la gestionan mediante la separación de las funciones asignando distintos perfiles o áreas de responsabilidad. Explicado de otra forma, podemos determinar las responsabilidades, tareas, accesos, etc. que conllevan un riesgo de mal uso, accidental o deliberado, si son compartidas por una misma persona.

-Contacto con autoridades: En caso de incidentes en la seguridad de la información, puede resultar necesario mantener informados a los organismos de control del estado o administración. Así, se deberán establecer dentro de los procedimientos de gestión de incidentes a quién se contactará, cuándo se realizará el contacto, los datos de contacto de los grupos necesarios y la información que se deberá transmitir.

-Contacto con grupos de interés especial: Mantenerse al día en seguridad de la información parece una tarea imposible de realizar de forma autónoma, aun para grandes corporaciones, por lo que este control nos indica que deberemos identificar todos aquellos grupos de interés tales como: foros especializados en Seguridad de la información, organismos administrativos como INCIBE en España o empresas expertas en seguridad de la información. Se trata de mantenernos actualizados en cuanto a las noticias sobre la seguridad de la información y permanecer alerta ante las nuevas amenazas para la seguridad de la información y si es necesario que adoptemos alguna recomendación de estos grupos especializados.

-Seguridad de la información en la gestión de proyectos: Este control pretende decirnos que la seguridad de la información debe involucrarse en todos los procesos de la organización ya sean procesos del negocio, procesos internos, servicios o productos, procesos TI etc. Para afrontar este requisito es necesario realizar una evaluación de riesgos, centrada en la seguridad de la información, al comienzo de cualquier proyecto, para identificar amenazas, vulnerabilidades y riesgos asociados al proyecto. Esto nos permitirá adoptar los controles necesarios.

#### Dispositivos móviles y teletrabajo

-Dispositivos móviles: Se trata de disponer de políticas de Seguridad de la Información como medidas concretas que mitiguen los riesgos de la seguridad de la información en el uso de dispositivos móviles o remotos en una organización. La política de uso de dispositivos móviles en una organización debe considerar:

.El registro de nuevos dispositivos. La cancelación de registro de dispositivos móviles. Requisitos de seguridad física.

.Requisitos de seguridad técnica incluidas conexiones remotas.

.Control de software.

.Control de acceso y cifrado de la información contenida en reposo y en tránsito.

Las políticas diseñadas para dispositivos móviles además de los requisitos anteriores deberían considerar las condiciones de uso de dispositivos móviles y cuando sean apropiados.

-Teletrabajo: En la actualidad, el teletrabajo es una actividad relativamente difundida en todo tipo de organizaciones, por lo que la seguridad de la Información es un aspecto clave para garantizar la protección de esta actividad. Se trata de:

.Evaluar que activos de información están involucrados en el teletrabajo.

.Realizar una evaluación de riesgos aplicada a los activos de la información y a las actividades del teletrabajo.

Restricciones o controles para las actividades de teletrabajo según la norma ISO 27002:

.La seguridad física existente del sitio de teletrabajo, considerando la seguridad física del edificio y del entorno local.

.El entorno físico de teletrabajo propuesto.

.Los requisitos de seguridad de las comunicaciones, teniendo en cuenta la necesidad de acceso remoto a los sistemas internos de la organización, la sensibilidad de la información a ser accedida y pasada sobre el enlace de comunicación y la sensibilidad del sistema interno.

.La provisión de acceso al escritorio virtual que impide el procesamiento y el almacenamiento de información sobre el equipo de propiedad privada.

.La amenaza de acceso no autorizado a la información o a los recursos de otras personas que utilizan el alojamiento, por ejemplo, familiares y amigos.

.El uso de redes domésticas y requisitos o restricciones de la configuración de los servicios de red inalámbricos.

.Las políticas y los procedimientos para evitar conflictos relativos a los derechos de propiedad intelectual desarrollados en los equipos de propiedad privada.

.El acceso a los equipos de propiedad privada, que puede ser prevenido por la legislación.

.Los acuerdos de licencia de licencia software en los que las organizaciones pueden ser responsables de la concesión de licencias a los clientes de software en estaciones de trabajo de propiedad privada.

.La protección ante software malicioso y los requisitos de firewall

#### Seguridad en RRHH

El objetivo del presente dominio es la necesidad de educar e informar al personal desde su ingreso y en forma continua, cualquiera sea su situación de actividad, acerca de las medidas de seguridad que afectan al desarrollo de sus funciones y de las expectativas depositadas en ellos en materia de seguridad y asuntos de confidencialidad.

Es necesario reducir los riesgos de error humano, comisión de actos ilícitos, uso inadecuado de instalaciones y recursos y manejo no autorizado de la información, junto a la definición de posibles sanciones que se aplicarán en caso de incumplimiento.

Se requiere explicitar las responsabilidades en materia de seguridad en la etapa de reclutamiento de personal e incluirlas en los acuerdos a firmarse y verificar su cumplimiento durante el desempeño del individuo como empleado.

#### Gestión de activos

Los inventarios de activos son un elemento clave para la identificación del riesgo. Solo así podremos establecer las amenazas y vulnerabilidades reales a las que está expuesto el sistema. Otra razón de gran importancia, es que, gracias al registro del inventario de activos podemos identificar quién es el propietario del activo y asignar responsabilidades. De esta forma, logramos proteger la confidencialidad, la integridad y la disponibilidad de la información.

El objetivo de estos controles es la preservación de los activos de información como soporte del negocio. Se focaliza en varias vertientes:

-Responsabilidad de los activos: EL objetivo de este punto es la identificación de los activos de información y las responsabilidades sobre los mismos, con el objetivo de evaluar las medidas de protección adecuadas para cada activo en base a una evaluación de riesgos.

-Clasificación de la información: Asegurar que la información recibe el nivel de protección adecuado de acuerdo con su importancia en la organización.

-Manejo de los soportes de almacenamiento: Se trata de proteger la información en el nivel de soportes en los que se encuentra ya sea papel o soportes electrónicos. Prevenir la exposición, modificación, eliminación o destrucción de información almacenada en medios de forma no autorizada.

#### Controles de mitigación: Seguridad física

La seguridad física es la disciplina que diseña, despliega y mantiene controles de seguridad aplicables al mundo físico con el objeto de proteger diferentes tipos de activos:

-Áreas y espacios.

-Equipamiento.

-Personas.

Si bien las personas son el bien más valioso. y el fin último de la seguridad en las organizaciones, generalmente las medidas para proteger a las mismas está incluidas en las otras dos. 

Controles específicos para crear y mantener áreas seguras:

-Perímetro de seguridad física: Control orientado a proveer protección contra la entrada no autorizada.

-Controles de acceso físico: Aquellas áreas que se consideran seguras deben estar protegidas por controles de entrada que permitan solo personal autorizado incluyendo la asignación, modificación y eliminación de los permisos de acceso, sistemas de entrada como tornos, monitorización de los diferentes punto de entradas, registro y análisis de las entradas y salidas gestión del personal externo, uso de identificadores, etc

-Seguridad de oficinas, despachos e instalaciones: Las instalaciones deben diseñarse para evitar al máximo posible el riesgo que la información confidencial sea accesible para los visitantes. Para ello se debe evitar siempre que sea posible que las áreas claves estén en sitios con paso público, evitar carteles y otros signos que aporten demasiada información sobre el edificio y las áreas internas.

-Protección contra amenazas externas y medioambientales: Se deben diseñar controles contra desastres naturales, ataques maliciosos y accidentes.

-Trabajo en áreas seguras: Se deben diseñar e implementar procesos para el trabajo en áreas seguras, teniendo en cuenta aspectos como que el personal sólo debería saber de la existencia de, y los trabajos realizados en, áreas seguras según el criterio de necesidad de saber, evitar el trabajo no supervisado en áreas seguras, las áreas seguras vacías deberían quedar cerradas y protegidas o evitar cualquier tipo de grabación en estas áreas.

-Áreas de entrega y carga: Los puntos de carga y de entrega de mercancía suelen ser puntos sensibles para la seguridad física por lo se debería tomar en cuenta algunos aspectos como horarios definidos de apertura y cierre, control de apertura y cierre de puertas externas e internas, control de personal, realización de inventarios de materiales entregados, revisión de mercancías entregadas para detectar materiales peligrosos o separar entregas entrantes y salientes o barreras adicionales de seguridad.

####  Proyecto de clases Día 7: 17/10/2023

### Controles de mitigación: Seguridad Lógica

#### Terminología de Gestión de Identidades y Control de Accesos:

-Gestión de accesos: El proceso de configurar el nivel de acceso para cada usuario y grupo dentro de un sistema. A través de este proceso, los administradores, conceden acceso a usuarios autorizados y restringen el acceso a los usuarios no autorizados. Esto se puede realizar de forma jerárquica a través del uso de grupos de usuarios. La gestión de accesos requiere de auditoria periódica y mantenimiento para mantenerse al día con el negocio en continua evolución y los roles de los empleados.

-Necesidad de saber / Menor privilegio: Se trata de dos principios que regulan las buenas prácticas de la gestión de accesos y la provisión de permisos. El primero regula que los usuarios sólo deberían tener acceso a aquella información que sea imprescindible para realizar su trabajo y a nada más. El segundo dice que los usuarios deberían tener los privilegios mínimos que les permitan realizar su trabajo.

-Aprovisionamiento / Desaprovisionamiento: El primero es el proceso de establecer una identidad y su acceso asociado en un sistema. El segundo es el proceso de eliminar dicho acceso y las identidades asociadas cuando un usuario se va, es despedido, cambia de área o puestoo su contrato finaliza.

-Identificación, autenticación y autorización: Estos términos son la triada del control de acceso, mostrando el flujo en el que un usuario accede a un sistema. LA identificación es el proceso por el que un usuario establece cual es su identidad. La autenticación es el proceso por el cual el sistema verifica de alguna manera que el usuario tiene realmente la identidad proclamada. Y por fin, la autorización, es una vez identificado y autenticado al usuario, el sistema comprueba los permisos de acceso que tiene a dicho sistema.

-Factores de Autenticación / 2FA / MFA: Existen diferentes esquemas de autenticación de usuarios, basados en la propiedad del factor utilizado para verificar la identidad. El primero es “algo que sabes”, basado generalmente en el uso de un usuario y contraseña. El Segundo factor es “algo que tienes” o autenticación biométrica, en el que el Sistema comprueba alguna característica física del usuario como su huella digital, el iris, la palma de la mano, su huella de voz, etc. Finalmente “algo que tienes”, en el cual la autenticación se basa en la posesión de un objeto como una smartcard, token que genera contraseñas aleatorias de forma temporal o smartphone al que llegan contraseñas temporales.

-Acceso basado en roles (RBAC): Se trata de un paradigma de gestión del acceso y el privilegio en el cual se definen roles empresariales de acceso a los cuales se les conceden acceso a diferentes sistemas. Así, a cada usuario, de acuerdo a su puesto de trabajo se le asignarán uno o más roles. Este modelo es el más utilizado actualmente, si bien existen otros modelos como el Control de Acceso discrecional o DAC y el Control de Acceso Obligatorio o MAC.

-Flujos de trabajo Altas, Bajas y Modificaciones: Cada vez que se quiere aprovisionar, desaprovisionar o modificar los permisos o rol de un usuario, se debe contar con un flujo de trabajo en el que los roles involucrados y los pasos a dar estén claramente definidos. Quién puede solicitarlo, quién/es debe/n aprobarlo, quién lo audita/monitoriza, etc.

-Inicio de Sesión Único (SSO): Se trata de un mecanismo de control de acceso que permite que un usuario se autentique una vez ante un sistema maestro y este gestione sus credenciales contra otros sistemas de forma que no sea necesario volverse a autenticar 

-Contraseña de un solo uso (OTP): Mecanismo de acceso basado en una contraseña es válida una sólo vez. Esto puede ser mediante sistemas que generan contraseñas de forma aleatoria y regular en el tiempo o bien mediante el envío de la contraseña a un dispositivo de usuario como teléfono 

#### Requisitos del negocio para el control de accesos:

-Política de control de acceso: Una política de control de acceso debe ser establecida, documentada y revisada basada en los requisitos de seguridad del negocio y de la información. Los propietarios de los activos deberán determinar las reglas de control de acceso apropiadas, los derechos de acceso y restricciones para determinados roles de usuarios, con el nivel de detalle y de dureza de los controles que reflejen los riesgos de seguridad asociados.

-Acceso a las redes y a los servicios de red: Se trata de un requisito para la gestionar la autorización de los usuarios que acceden a los recursos de red. Para ello se exige como requisito elaborar una política específica para el uso de los recursos de red

#### Gestión del acceso de usuarios:

-Registro de usuarios y cancelación del registro: Se trata de un control para el alta y baja de los usuarios. Este control exige establecer un proceso de altas y bajas que permite los derechos de acceso teniendo en cuenta:

.Un registro de IDs o cuentas de usuario donde se vincula o identifica al usuario.

.Los IDs deben desactivarse automáticamente o de forma inmediata cuando el usuario abandona la organización.

.Eliminación periódica de usuarios redundantes.

.Los IDs redundantes nunca pueden ser asignados a otros usuarios.

-Gestión de acceso a los usuarios: Se debe establecer un proceso formal para asignar y revocar los accesos a sistemas y servicios que:

.Incluya la aprobación del propietario del servicio o sistema.

.Verifique si el acceso cumple con las políticas de acceso definidas.

.Se garantice que el acceso no se da hasta finalizar el proceso de autorización.

.Asegure que se mantiene un registro de los accesos concedidos.

.Asegure que se eliminan los accesos de usuarios que han abandonado la organización.

.Asegure que se modifican los accesos de usuarios que han cambiado de función o puesto de trabajo si proceda.

.Asegure que se revisan periódicamente los derechos de acceso

-Gestión de derechos de acceso privilegiados: El control de los derechos de acceso privilegiados debe realizarse de forma independiente mediante un proceso específico que:

.Tenga en cuenta las políticas de acceso privilegiado definidas.

.Se identifiquen accesos privilegiados de cada sistema o proceso.

.Se tenga en cuenta las reglas generales de mínimos privilegios.

.Se establezca una norma de caducidad de los permisos privilegiados.

.Se definan IDs especiales o distintos para las cuentas de uso normales o no privilegiadas.

.Se definan procedimientos para evitar el uso no autorizado de cuentas con derechos de acceso privilegiados.

.Se verifiquen periódicamente las competencias de los usuarios.

.Considere mecanismos para mantener la confidencialidad de los datos de acceso de usuarios genéricos para los usuarios privilegiados o mecanismos para forzar el cambio de contraseñas cuando un usuario privilegiado abandona o cambia de puesto de trabajo.

-Gestión de la información de autenticación secreta de los usuarios: Control para garantizar que se mantiene la confidencialidad de la información secreta de acceso. Gestionar la información de autenticación supone controlar:

.Incluir cláusulas en contratos y condiciones de puesto de trabajo sobre el mantenimiento del secreto de las contraseñas o información de autenticación.

.Obligación de cambiar contraseñas iniciales después de su primer uso.

.Identificar al usuario antes de entregar las contraseñas y obtener acuse de recibo.

.Uso de contraseñas seguras, no compartidas.

.Uso de medios seguros de comunicación.

.Cambiar contraseñas a personal externo después de que han realizado sus trabajos.

-Revisión de derechos de acceso de usuario: Control para establecer una revisión periódica de los permisos de accesos de los usuarios que tenga en cuenta aspectos como:

.Revisar derechos de acceso a la terminación de empleo o cambios en la organización.

.Limitar en el tiempo los derechos de acceso con privilegios especiales.

.Revisar las cuentas con privilegios especiales periódicamente y registrar los cambios que se realicen.

-Eliminación o ajuste de los derechos de acceso: Control para garantizar que se modifican los derechos de acceso al finalizar el empleo o cambiar de puesto de trabajo dentro de la organización

#### Aplicaciones de gestión de identidades

La gestión de la identidad y del acceso, frecuentemente conocida por su acrónimo anglosajón IAM es un área de negocio que se dedica a las siguientes tareas:

-Aprovisionamiento de cuentas de usuario y contraseñas, mediante automatismos, de acuerdo con políticas bien definidas y aplicadas.

-Implantación de sistemas de identificación y autenticación única corporativa.

-Gestión centralizada de las atribuciones de los usuarios, basada en directorios de usuarios.

-Modelo de autorizaciones, que concentra en un solo punto las autorizaciones de acceso.

La necesidad de negocio que cubre la gestión de identidad es facilitar y controlar de forma eficiente los sistemas de identificación y autenticación, autorización y auditoria  que emplean las organizaciones en sus procesos basados en tecnologías de la información. Entre los beneficios perseguidos destacan los siguientes:

-Seguridad: La automatización y la gestión centralizada permite a las organizaciones alinear el acceso con las funciones de trabajo, asegurar que las políticas de seguridad son aplicadas consistentemente, y mejorar la fiabilidad de los procesos de seguridad.

-Eficiencia: El auto-servicio, la automatización y la visibilidad de la asignación de recursos reduce el coste de la organización dentro y fuera de TI.

-Simplicidad: La capacidad de Single sign-on (SSO) y las identidades federadas reducen la frustración de los usuarios y mejora el uso de las aplicaciones clave.

-Productividad: La automatización, el uso de worflows y el auto-servicio permiten procesos más eficientes, proveyendo tiempos de respuestá más rápidos y permitiendo al personal centrarse en tareas de alto valor.

-Cumplimiento: La centralización y la automatización permiten revisiones de auditoría automatizadas, mejorar el seguimiento de la actividad de usuario y la certificación de acceso de cara al cumplimiento, y aportar mayor confianza en el proceso IAM.

Un proyecto típico de diseño de una solución IAM sigue los siguientes pasos:

1. Crear una visión de arquitectura: El proyecto de despliegue debe llevarse a cabo en el contexto de una visión general de Gestión de Identidad y Accesos. Cada proyecto de IAM no sólo debe proporcionar un valor medible sino también mover a la organización más cerca de las metas generales de IAM. Por lo tanto, el primer paso es crear una visión de la arquitectura para sus capacidades de IAM, incluyendo componentes a corto, medio y largo plazo.

2. Crear una hoja de ruta en fases: Es posible que la organización tenga una larga lista de requisitos. Por lo tanto, la priorización y la definición de fases son los pasos clave. Las fases son importantes no sólo porque los presupuestos son siempre finitos, sino porque los proyectos grandes son mucho más difíciles de manejar, teniendo grandes riesgos.

3. Definir una arquitectura: El enfoque arquitectónico tiene dos componentes: la decisión de hacer o comprar y las opciones de implementación. La primera de ellas es la decisión de comprar o poder reutilizar lo que ya tenemos. No siempre es necesario realizar inversión nueva en software o infraestructura.

Factores críticos de éxito para un proyecto de tal envergadura:

-Se debe asegurar el apoyo total de la dirección y que este continúe durante todo el proyecto para ayudar a mantener el esfuerzo en los límites marcados y reforzar las expectativas.

-Se deben abrazar las características de la tecnología seleccionada. Si bien no todas las características requeridas estarán presentes y habrá que desarrollar algunos módulos, la sobre-personalización hará inmantenible el sistema.

-No se debe hacer mucho demasiado pronto. Se debe asegurar que la solución a construir se mantiene alineada con el roadmap del proyecto y los requisitos previstos. A menudo los stakeholders quieren tratar cada hallazgo de auditoría o los riesgos de un análisis, lo que llevará a un proyecto fallido. Este tipo de proyectos son muy complejos y con líneas temporales de años.

-No se debe sucumbir a la tentación de automatizar procesos malos,tolerar datos incompletos o eliminar requisitos clave. Se debe trabajar con la dirección para restablecer las expectativas, evaluar el riesgo de la iniciativa y desarrollar soluciones alternativas

-Asegurar que se sabe cómo se soportará el despliegue antes siquiera de comenzarlo. LA formación, contratación de nuevo personal y su integración en la estructura debería comenzar tras el caso de negocio y la aprobación del presupuesto.

#### Principios de criptografía:

La criptografía es un conjunto de técnicas, que originalmente tratan sobre la protección o el ocultamiento de la información frente a observadores no autorizados. A través de la criptografía la información puede ser protegida contra el acceso no autorizado, su interceptación, su modificación y la inserción de información extra.

-Funciones dentro de la seguridad: Con la criptografía se intenta garantizar las siguientes propiedades deseables en la comunicación de información de forma segura:

.Confidencialidad: solamente los usuarios autorizados tienen acceso a la información.

.Integridad de la información: garantía ofrecida a los usuarios de que la información original no será alterada, ni intencional ni accidentalmente.

.Autenticación de usuario: es un proceso que permite al sistema verificar si el usuario que pretende acceder o hacer uso del sistema es quien dice ser.

.Autenticación de remitente: es el proceso que permite a un usuario certificar que el mensaje recibido fue de hecho enviado por el remitente y no por un suplantador.

.Autenticación del destinatario: es el proceso que permite garantizar la identidad del usuario destinatario.

.No repudio en origen: que cuando se reciba un mensaje, el remitente no pueda negar haber enviado dicho mensaje.

.No repudio en destino: que cuando se envía un mensaje, el destinatario no pueda negar haberlo recibido cuando le llegue.

.Autenticación de actualidad: consiste en probar que el mensaje es actual, y que no se trata de un mensaje antiguo reenviado.

-Criptosistemas de clave pública y privada: Existen dos tipos fundamentales de criptosistemas o sistemas de cifrado:

.Criptosistemas simétricos o de clave privada. Son aquellos que emplean una misma clave k tanto para cifrar como para descifrar.

.Criptosistemas asimétricos o de clave pública, que emplean una doble clave. kp se la conoce como clave privada y kP se la conoce como clave pública. Una de ellas sirve para la transformación o función E de cifrado y la otra para la transformación D de descifrado. En muchos casos son intercambiables, esto es, si empleamos una para cifrar la otra sirve para descifrar y viceversa.

-Protección de la confidencialidad en información almacenada y en tránsito: En términos generales, hay dos circunstancias en las que se debe usar el usar el cifrado: cuando los datos están en tránsito o cuando están en reposo.

.En tránsito: en este contexto, es cuando envías información a través de Internet, por correo electrónico, o cuando necesitas almacenarla en otro lugar que no sea tu propio dispositivo.

.En reposo: Los datos se consideran así cuando se encuentran almacenados en tu dispositivo, ya sea en una parte integrada como un disco rígido, o en un medio extraíble, como una unidad USB.

-Firmas digitales: autenticación, no repudio y protección de la integridad: La firma digital consta de dos “claves” o secuencias de caracteres separadas. Consiste en aplicar mecanismos criptográficos al contenido de un mensaje o documento con el objetivo de demostrar al receptor del mensaje que el emisor del mensaje es real, que éste no puede negar que envió el mensaje y que el mensaje no ha sido alterado desde su emisión. El primer paso es crear un resumen o hash del mensaje. Los funciones de resumen o hash son algoritmos que consiguen crear a partir de una entrada una salida alfanumérica de longitud normalmente fija, que representa un resumen de toda la información que se le ha dado. Para crear una firma digital, el software de firma crea un hash unidireccional de los datos electrónicos que se deben firmar. La clave privada se usa para encriptar el hash. El hash cifrado junto con otra información es la firma digital. Cualquier cambio en los datos, incluso cambiando o eliminando un solo carácter, da como resultado un valor diferente.

#### Data Loss Prevention e Information Rights Management:

Un aspecto crítico en la protección de datos es la gestión del nivel de acceso de los ficheros no estructurados y su compartición dentro y fuera de la organización. Para ello se disponen de 2 tipos de soluciones principalmente que pueden complementarse:

-Data Loss Prevention (DLP): Una solución de prevención de pérdida de datos (DLP) es un sistema que está diseñado para detectar potenciales brechas de datos/transmisiones de datos y prevenirlos a través de monitorización, detección y bloqueo de información sensible mientras está en uso, en movimiento y en reposo. La solución no cifra los ficheros, sino que les aplica etiquetas en su descripción de metadatos, y son los agentes desplegados en los equipos/servidores o bien los nodos en red quienes se encargan de bloquear cualquier acción peligrosa. Así, se pueden conceder permisos de grano fico, como leer y editar, pero no copiar/pegar o enviar por mail.

-Information Rights Management: Las tecnologías de IRM permiten el cifrado de documentación aplicando una protección persistente a los mismos. La documentación en reposo se encuentra cifrada y sólo está accesible a los usuarios que tengan derechos de acceso a la misma. Los derechos por lo general se dan de forma granular y se asignan usuario a usuario, por lo que es más recomendable de cara a la compartición de ficheros con terceras partes. Así, se puede compartir un fichero con sólo permisos de lectura, o también de modificación, pero por ejemplo no de compartición, copia o impresión. Así mismo, los permisos pueden ser cambiados o eliminados en tiempo casi real.

#### Seguridad en el correo electrónico:

-El correo electrónico es uno de los principales medios de compartición de información, tanto a nivel interno de la organización como externa, a la vez que uno de los principales vectores de entrada para amenazas. Por ello, se deben contar con sistemas que permitan obtener las siguientes funcionalidades:

-Detección de phishing: Mediante técnicas como detección de orígenes, inteligencia artificial aplicada al análisis del contenido, etc, detectar que se tarta de un posible caso de phishing.

-Detonación de ficheros y enlaces: Capacidad de poder analizar enlaces y adjuntos en correos electrónicos mediante el uso de sandboxes para validar su comportamiento.

-Análisis de malware: Capaz de poder utilizar técnicas de firmas y de inteligencia artificial para validar si un fichero adjunto es un malware.

-Control de información saliente (DLP): Análisis del contenido de los correos y los adjuntos para, sólo o en conjunción con una solución DLP. Poder evitar fugas de información. Otra opción sería el cifrado del correo y/o los adjuntos, de forma que solo el destinatario legítimo podría verlo.

-Detección de fraudes y buzones comprometidos: Capacidad de detectar actividad anómala en buzones y posibles casos de fraude como el fraude del CEO.

-Detección de exploits: Análisis de comportamiento al abrir enlaces y/o adjuntos para detectar posibles explotaciones del sistema para desplegar malware, tomar el control del sistema, etc.

#### Monitorización de actividad en BBDD y almacenes de datos:

Las bases de datos y los repositorios de ficheros son objetivos primordiales para los atacantes debido a la sensibilidad de la información contenida de manera general. Por ello, un método de proteger los datos es monitorizar la actividad realizada en los mismos a bajo nivel con el objeto de descubrir posibles comportamientos sospechosos o directamente delictivos. Una solución de este tipo debería ofrecer la siguiente funcionalidad:

-Automatizar el descubrimiento y la clasificación de datos sensibles: Es vital que una solución de este tipo permita analizar el tráfico y los repositorios/bases de
datos a las que tiene acceso con el objeto de encontrar tanto nuevos repositorios como nueva información susceptible de protección.

-Monitorización en tiempo real actividad de los usuarios: Debe ser capaz de poder analizar la actividad a nivel granular y auditarla para diferentes repositorios, bases de datos SQL y no SQL, data warehouses, etc.

-Soporte al cumplimiento legal y normativo: Debe incluir plantillas para auditar y reportar el cumplimiento legal y normativo para diferentes de estas como RGPD, PCI-DSS, HIPAA, SOX, etc.

-Políticas predefinidas y adaptables: Debe incluir por defecto multitud de políticas adaptables para auditar y bloquear actividades sospechosas y/o potencialmente peligrosas.

-Bloqueo de acciones y enmascaramiento de datos: Debe permitir actuar como un cortafuegos de capa 7 con el objeto de bloquear acciones que se hayan definido previamente, a la vez que permite otras acciones enmascarando los datos (cubriendo una parte de los mismos por protección, por ejemplo para la protección de datos personales.

#### Seguridad operacional

Las operaciones de los sistemas, su administración y explotación requieren de controles de seguridad específicos para asegurar que dicha operación no introduzca nuevas debilidades y permita controlar las existentes.

-Configuración segura o hardening: El hardening o configuración segura es el proceso de configuración sistemática de los sistemas y aplicaciones con el objeto de reducir la superficie de ataque potencial así como seleccionar opciones que aumenten la seguridad general del sistema y la información. Existen multitud de guías de fabricantes para realizar dicha tarea, así como guías de organizaciones internacionales como el Center for Internet Security. En general, este proceso se centra en aspectos como cerrar puertos innecesarios en los sistemas, asegurar las políticas de acceso de usuarios, la habilitación de cifrado, configuración de las capacidades de seguridad nativas de cada sistema/aplicación, permisos de seguridad en archivos y carpetas, acceso remoto, etc.

Para permitir automatizar este proceso, existen soluciones que permiten validar la configuración de un sistema contra una línea base establecida y otro tipo que permite cambiar las configuraciones de sistemas y aplicaciones para cumplir con la línea base.

-Gestión de vulnerabilidades: Una vulnerabilidad es una debilidad o fallo en un sistema de información que pone en riesgo la seguridad de la información pudiendo permitir que un atacante pueda comprometer la integridad, disponibilidad o confidencialidad de la misma, por lo que es necesario encontrarlas y eliminarlas lo antes posible. La gestión de vulnerabilidades es un proceso continuo de TI consistente en la identificación, evaluación y corrección de vulnerabilidades en los sistemas de información y las aplicaciones de una organización, categorizando los activos según si importancia/valor y clasificando las vulnerabilidades según el nivel de riesgo, de
forma que se puedan priorizar las vulnerabilidades a corregir.

El proceso de gestión de vulnerabilidades suele incluir las siguientes acciones:

.Obtención de un inventario de los activos de TI de una empresa, lo que incluye servidores, infraestructura de redes, estaciones de trabajo, impresoras y aplicaciones.

.Detección de las vulnerabilidades existentes mediante escáneres de redes, escáneres de vulnerabilidades en host y software de pruebas de penetración automáticas y determinación de los niveles de riesgo. Generalmente, los escaneos en red suelen dar más falsos positivos que los realizados con agentes.

.Reparación de sistemas y dispositivos vulnerables y presentación de informes sobre las medidas correctivas adoptadas. Este sub-proceso debe alinearse con la gestión del cambio para evitar impactar en los sistemas y contar con procedimientos específicos como contar con un plan de vuelta atrás antes de aplicar cambios en prueba en entornos de pre-producción antes de su despliegue definitivo.

-Gestión del cambio: Los procesos de cambio pueden conllevar riesgos asociados para la seguridad de la información. Es por ello que se deben disponer de procesos y controles para que analicemos los procesos de cambio en sistemas y aplicaciones, junto con la infraestructura involucrada con los mismos. Las evaluaciones de riesgos deberían exigir siempre una autorización formal para la realización de cambios. Otro elemento esencial es establecer siempre una planificación para los cambios a realizar en equipos, sistemas software etc, acompañado de pruebas realizadas y comunicaciones a todos los involucrados. Antes de realizar ningún cambio se debe disponer de un procedimiento de vuelta atrás así como de probar los cambios en un entorno de pruebas lo más parecido al entorno de producción. Finalmente, deberíamos mantener un registro que contenga al menos la información de:

.Quien autoriza los cambios.

.Quien realiza los cambios.

.Fecha.

.Descripción de las tareas realizadas.

.Validación del cambio.

.Otra información que se considere necesaria.

Esta información será útil en una auditoría para proporcionar la confianza de que los cambios se han realizado de forma controlada.

-Gestión de la capacidad: Se trata de evitar pérdidas de disponibilidad o rendimiento de los sistemas por falta de capacidad. Gestionar la capacidad se refiere a tener un control del uso de los recursos. Esto se traduce en controles para:

.Medición y Seguimiento del uso de recursos.

.Previsión de uso a futuro o análisis de tendencias.

.Planificar las ampliaciones de capacidad de los recursos cuando sea necesario.

.Optimizar el uso de recursos. Por ejemplo, la posibilidad de optimizar las consultas a las bases de datos, realizar procesos por lotes fuera de horas de carga de trabajo, eliminación de archivos de datos antiguos y aceleración del ancho de banda para accesos no críticos.

Para poder monitorizar la capacidad existen sistemas de monitorización de salud TI que permiten automatizar estas tareas en SO, BBDD, dispositivos de red, aplicaciones comerciales, etc.

-Control del software en explotación: El objetivo es garantizar la integridad de los sistemas operacionales para la organización. Es importante mantener procedimientos para cubrir las instalaciones de software en cualquier dispositivo dentro de una organización.

Estos procedimientos deben fijarse en la aplicabilidad de los siguientes controles:

.Probar las nuevas aplicaciones o software en entornos aislados especialmente preparados para pruebas.

.Comprobar las necesidades de instalación antes de su instalación.

.Valorar la necesidad de actualización o instalación.

.Planificar la forma de volver a versiones anteriores en caso de ser necesario.

.Los entornos de desarrollo deben permanecer aislados de los entornos operativos.

.Las instalaciones de software debe ser realizada por usuarios autorizados.

.Establecer procedimientos o herramientas de monitoreo del software para detectar cambios no autorizados.

.Las pruebas posteriores a la implementación deben incluir una supervisión de la red para identificar cualquier tráfico inesperado que pueda exponer errores o suponga empeoramiento de la velocidad de las transmisiones.

#### Protección contra malware y del punto final:

La protección del punto final se basa en proteger la infraestructura final así como las aplicaciones desplegadas en los mismos con el objeto de evitar un punto de entrada a la información almacenada.

-Protección antimalware: Los antivirus son programas cuyo objetivo es detectar y eliminar virus informáticos. Con el transcurso del tiempo, la aparición de sistemas operativos más avanzados e internet, los antivirus han evolucionado hacia programas más avanzados que además de buscar y detectar virus informáticos consiguen bloquearlos, desinfectar archivos y prevenir una infección de los mismos. 

Actualmente son capaces de reconocer otros tipos de malware como spyware, gusanos, troyanos, rootkits, RATs, etc. Históricamente se basaban en firmas, de manera que se necesitaba en los fabricantes hubiesen creado, dicha firma. Los nuevos sistemas se basan en aprendizaje máquina o aprendizaje profundo de forma que se entrena a los sistemas para que detecten características que comparten los malware, de forma que son capaces de dectarlos sin firmas, aunque sean nuevos.

Otros sistemas se basan en detectar las características de una explotación, de forma que prevengan que el malware pueda tomar control del sistema, cifrar el disco duro, elevar privilegios, etc.

-Endpoint Detection & Response: Este tipo de soluciones se encargan de monitorizar los sistemas donde están desplegados los agentes, analizando los procesos que se crean, trazas de memoria, conexiones de red entrantes y salientes, etc, para detectar posibles ataques hacia o desde el sistema.

Ofrece una visibilidad completa de extremo a extremo sobre la actividad de cada equipo, administrada desde una única consola, junto con una valiosa inteligencia de seguridad que podría usar un experto de seguridad informático para una investigación y respuesta mayores. El objetivo principal de EDR es la detección proactiva de amenazas nuevas o desconocidas, infecciones previamente no identificadas que penetran en la organización directamente a través de endpoints y servidores. Ofrecen las siguientes capacidades:

.Modelo preventivo/pre-infección y detectivo/post-infección basado en análisis sobre patrones de comportamiento.

.Enfoque reactivo/post-incidente apoyado en capacidades de contención y remediación rápida frente incidentes.

.Capacidades forenses, basadas en análisis sobre el registro de actividades del endpoint.

.Inteligencia agregada, a través de un proceso continuo de investigación e innovación gracias a nuestro laboratorio y analistas expertos

#### Copias de seguridad

Se trata de un proceso mediante el cual se duplica la información existente de un soporte a otro, con el fin de poder recuperarlos en caso de fallo del primer alojamiento de los datos.

-Para determinar la frecuencia con la que debemos realizar copias de seguridad, será necesario realizar un análisis en el que se tengan en cuenta los siguientes factores:

.Número de datos o archivos generados y/o modificados en la organización.

.Impacto para el negocio de la perdida de datos por unidad de tiempo.

.Coste de almacenamiento.

.Obligaciones legales y normativas.

-Otro temas a tener en cuenta es el periodo de retención de los datos, cuánto tiempo debemos mantener las copias de seguridad, a decidir en base a requisitos legales y necesidades de la organización.

-También es crítico decidir el tipo de copia de seguridad a realizar:

.Copia de seguridad completa: Cuando se realiza una copia de seguridad completa todos los archivos y carpetas del sistema se copian. Por lo tanto tu sistema de copias de seguridad almacena una copia completa que es igual a la fuente de datos del día y hora en que se hace la copia de seguridad.

.Copia de seguridad incremental: En este caso, la única copia completa es la primera. A partir de ahí, las copias de seguridad posteriores sólo almacenan los cambios realizados desde la copia de seguridad anterior. En este caso el proceso de restauración es más largo porque tienes que utilizar varias copias diferentes para restaurar completamente el sistema, pero a cambio el proceso de hacer la copia de seguridad es mucho más rápido y ocupa menos espacio de almacenamiento.

.Copia de seguridad diferencial: Igual que las incrementales, la primera copia de seguridad es la única completa. La diferencia con la incremental viene del hecho de que aquí cada copia de seguridad posterior tiene todos los cambios respecto a la primera copia completa, y no respecto a la copia de seguridad anterior, como era el caso de la incremental.

.Copia espejo (mirroring): Con una copia de seguridad en espejo se realiza una copia exacta de los datos originales. Se suele hacer “en directo”, es decir, a la vez que trabajas con los datos reales, se hace una copia espejo en un disco alternativo. La ventaja de una copia en espejo es que la copia de seguridad no contiene archivos antiguos o en desuso. 

-Se deben contar con procedimientos de recuperación y probar de forma regular tanto los procedimientos como las copias con el fin de asegurar que en caso de necesidad no existirá problema, como que las copias de seguridad no se habían realizado correctamente y no es posible recuperarlas o que en el procedimiento se han olvidado incluir pasos críticos.

-Por último, pero no menos importante, hay que tener muy presente que se deberán proteger las copias de seguridad con el mismo nivel de controles que la información original, y tener en cuenta que es necesario disponer de copias en sitios geográficamente alejados del sitio donde se alojan los datos originales en caso de desastre.

#### Monitorización de eventos y supervisión

-El objetivo es registrar los eventos relacionados con la seguridad de la información y generar evidencias. Para ello es necesario realizar las siguientes actividades:

.Registro y gestión de eventos de actividad: Se deberían producir, mantener y revisar periódicamente los registros relacionados con eventos de actividad del usuario, excepciones, fallas y eventos de seguridad de la información.

.Protección de los registros de información: Se debería proteger contra posibles alteraciones y accesos no autorizados la información de los registros.

.Registros de actividad del administrador y operador del sistema: Se deberían registrar las actividades del administrador y del operador del sistema y los registros asociados se deberían proteger y revisar de manera regular.

.Sincronización de relojes: Se deberían sincronizar los relojes de todos los sistemas de procesamiento de información pertinentes dentro de una organización o de un dominio de seguridad y en relación a una fuente de sincronización única de referencia

#### Consideraciones para la auditoría de SI

Estos controles buscan minimizar el impacto de las actividades de auditoría en los sistemas operativos mediante la planificación de actividades de forma que causen la mínima interferencia en los sistemas operativos.

En este aspecto deberemos controlar que las auditorias para obtener esta información:

1. Cumplan con el alcance planificado. En la práctica el alcance de las auditorias puede ser demasiado abierto de forma que la auditoría podría convertirse en una enorme tarea que reduce su propio valor, perdiendo un enorme esfuerzo en cosas que son de poca importancia. Delimitar las auditorias es una primera y primordial tarea para no devaluar su significado y para que realmente sean útiles.
   
2. Evaluar y considerar el impacto. Se debe evaluar el impacto o consumo de recursos de auditorías que supongan un consumo de recursos importante dentro de los sistemas. En este caso debe existir un procedimiento por el cual se evite realizar estas tareas que pueden comprometer la capacidad de los sistemas realizándolas en periodos de baja carga de trabajo.

####  Proyecto de clases Día 8: 18/10/2023

### Seguridad de las comunicaciones

Los sistemas, aplicaciones e información de las organizaciones se encuentran desplegadas en redes informáticas que facilitan su comunicación, tanto a nivel interno como externo. Así, en la red se pueden originar nuevas amenazas que deben ser paradas, a la vez que aporta información que puede ayudar a detectar un ataque en curso.

-Segmentación y microsegmentación de la red: La segmentación de la red consiste en dividir una gran red en segmentos más pequeños, filtrando por cada uno de ellos las entradas y salidas de tráfico de red, de forma que se facilite minimizar la superficie de exposición de los sistemas en el interior. Ls criterios para la selección de sistemas a incluir en un segmento puede tomar en cuenta aplicaciones con un nivel de criticidad mayor que su entorno, sistemas con funcionalidades complementarias, entornos de un sistema, etc.

Para poder llegar a un nivel superior de segmentación, se creo el término micro-segmentación, donde el objetivo es llegar a segmentar por servicios dentro de una misma aplicación, de forma que casi cada sistema cuenta con su propio segmento y reglas de filtrado. Para poder llegar a tal nivel, se introdujo un nuevo tipo de tecnología, Red Definida por Software, un conjunto de técnicas relacionadas con el área de redes computacionales, cuyo objetivo es facilitar la implementación e implantación de
servicios de red de una manera determinista, dinámica y escalable, evitando al administrador de red gestionar dichos servicios a bajo nivel.

-IDS/IPS (Detección/Prevención de intrusiones en red): Un sistema de detección de intrusiones es un programa de detección de accesos no autorizados a una red. Se basa en el análisis pormenorizado del tráfico de red, el cual al entrar al analizador es comparado con firmas de ataques conocidos, o comportamientos sospechosos, como puede ser el escaneo de puertos, paquetes malformados, etc. 

El IDS no solo analiza qué tipo de tráfico es, sino que también revisa el contenido y su comportamiento. Un IPS añade capacidad de bloqueo del tráfico de acuerdo a reglas predefinidas.

-Cortafuegos (FWs): Un cortafuegos es la parte de una red informática que está diseñada para bloquear el acceso no autorizado, permitiendo al mismo tiempo comunicaciones autorizadas, todo mediante reglas definidas. En base a este principio, se recomienda definir qué está permitido y bloquear el resto que definir lo que no está permitido y permitir el resto. Los FW han evolucionado en los siguientes modelos:

.A nivel de paquetes: En este caso se crean reglas para paquetes de datos, debiendo crear reglas en ambos sentidos, lo cual era un problema de seguridad.

.Con estado: En este caso se mantenía una tabla dentro del FW que controlaba las sesiones creadas, de forma que sólo era necesario crear una regla del origen al destino, permitiendo el paso al resto de paquetes que fuesen parte de la sesión.

.A nivel de aplicación: Son aquellos que actúan sobre la capa de aplicación pudiendo entender entender ciertas aplicaciones y protocolos, y permite detectar si un protocolo no deseado se coló a través de un puerto no estándar o si se está abusando de un protocolo de forma perjudicial. El ejemplo más claro es el WAF que permite proteger aplicaciones web frente a ataques como SQL Injection o XSS.

.Con inspección profunda de paquetes (DPI): El DPI combina las funciones de un sistema de detección/prevención de Intrusiones con un tradicional cortafuegos de estado permitiendo detectar ciertos ataques que ni los sistemas de detección de intrusiones ni los sistemas de prevención de intrusiones ni los cortafuegos de estado pueden detectar por sí solos. Así por ejemplo, es capaz de asociar sesiones a usuarios y a protocolos  y filtrar por estos aspectos.

.Software Defined Firewall: Con el advenimiento de las redes definidas por software, un nuevo tipo de cortafuegos nació definido a través de las reglas de control del SDN, de forma que se libera el cortafuegos del plano de datos.

#### Seguridad en la adquisición, desarrollo y mantenimiento de SI

El objetivo es:

-Asegurar la inclusión de controles de seguridad y validación de datos en la adquisición y el desarrollo de los sistemas de información.

-Definir y documentar las normas y procedimientos que se aplicarán durante el ciclo de vida de los aplicativos y en la infraestructura base en la cual se apoyan.

-Definir los métodos de protección de la información crítica o sensible.

El diseño e implantación de los sistemas de información que sustentan los procesos de negocio son cruciales para la seguridad. Esto aplica a todos los sistemas informáticos, tanto desarrollos propios o de terceros, y a todos los Sistemas Operativos y/o Software que integren cualquiera de los entornos administrados por la organización en donde residan los desarrollos mencionados.

Se debe garantizar la seguridad de la información en los entornos de diseño e implementación dentro del ciclo de vida de desarrollo de los sistemas de información:

-Política de desarrollo seguro de software: Se deberían establecer y aplicar reglas para el desarrollo de software y sistemas dentro de la organización.

-Procedimientos de control de cambios en los sistemas: En el ciclo de vida de desarrollo se deberían hacer uso de procedimientos formales de control de cambios.

-Revisión técnica de las aplicaciones tras efectuar cambios en el sistema: Las aplicaciones críticas para el negocio se deberían revisar y probar para garantizar que no se han generado impactos adversos en las operaciones o en la seguridad de la organización tras la realización de cambios.

-Restricciones a los cambios en los paquetes de software: Se deberían evitar modificaciones en los paquetes de software suministrados por terceros, limitándose a cambios realmente necesarios. Todos los cambios se deberían controlar estrictamente.

-Uso de principios de ingeniería en protección de sistemas: Se deberían establecer, documentar, mantener y aplicar los principios de seguridad en ingeniería de sistemas para cualquier labor de implementación en el sistema de información.

-Seguridad en entornos de desarrollo: Las organizaciones deberían establecer y proteger adecuadamente los entornos para las labores de desarrollo e integración de sistemas que abarcan todo el ciclo de vida de desarrollo del sistema.

-Externalización del desarrollo de software: La organización debería supervisar y monitorear las actividades de desarrollo del sistema que se hayan externalizado, estableciendo a la vez cláusula de seguridad en los contratos 

-Pruebas de funcionalidad durante el desarrollo de los sistemas: Se deberían realizar pruebas de funcionalidad en aspectos de seguridad durante las etapas del desarrollo.

-Pruebas de aceptación: Se deberían establecer programas de prueba y criterios relacionados para la aceptación de nuevos sistemas de información, actualizaciones y/o nuevas versiones.

Por último, los datos de pruebas se deberían seleccionar cuidadosamente y se deberían proteger y controlar.

Existen también aplicaciones que permiten la gestión segura de librerías de terceros y open source con el objeto de detectar librerías deprecadas o con vulnerabilidades conocidas. Dado que un desarrollo dese cero es casi imposible, el uso de librerías es cada vez más común. Si bien este enfoque permite una mayor agilidad y eficiencia, debemos asegurar que no se convierte en un vector de vulnerabilidad para los sistemas.

#### Continuidad de negocio y recuperación ante desastre

El objetivo es preservar la seguridad de la información durante las fases de activación, de desarrollo de procesos, procedimientos y planes para la continuidad de negocio y de vuelta a la normalidad. Se deberían integrar dentro de los procesos críticos de negocio aquellos requisitos de gestión de la seguridad de la información con atención especial a la legislación, las operaciones, el personal, los materiales, el transporte, los servicios y las instalaciones adicionales, alternativos y que estén dispuestos de un modo distinto a la operativa habitual.

Entre los controles necesarios podemos hallar los siguientes:

-Continuidad de la seguridad de la información: El objetivo es que la seguridad de la información sea integrada en los sistemas de gestión de la continuidad del negocio de la organización.

-Planificación de la continuidad de la seguridad de la información: La organización debería determinar los requisitos para la seguridad de la información y su gestión durante situaciones adversas como situaciones de crisis o de desastre.

-Implantación de la continuidad de la seguridad de la información: La organización debería establecer, documentar, implementar y mantener los procesos, procedimientos y controles para garantizar el mantenimiento del nivel necesario de seguridad de la información durante situaciones adversas.

-Verificación, revisión y evaluación de la continuidad de la seguridad de la información: La organización debería verificar regularmente los controles de continuidad de seguridad de la información establecidos e implementados para poder garantizar su validez y eficacia ante situaciones adversas.

-Redundancias: El objetivo es asegurar la disponibilidad de los recursos de tratamiento de la información. Se debería implementar la suficiente redundancia en las instalaciones de procesamiento de la información y en correspondencia con los requisitos de disponibilidad.

Entre las diferentes estrategias para la recuperación ante desastres, podemos encontrar las siguientes:

-Espera pasiva (cold sites): Se basa en centros donde se pueden contratar servidores en caso necesario, pero se deben desplegar los mismos así como los sistemas y configurar todo. La organización envía regularmente copias de seguridad para una reconstrucción completa a almacenamientos externos. Esta estrategia puede llevar días o semanas y sólo es recomendable para aplicaciones con bajos requisitos de disponibilidad.

-Espera semiactiva (warm sites). En este caso se dispondría de servidores desplegados con las aplicaciones base también desplegados y sería necesario realizar la carga de los datos y finalizar las últimas configuraciones. Esta estrategia llevaría desde unas horas a unos pocos días y puede servidor para aplicaciones que no sean especialmente críticas.

-Espera activa (hot sites): Se trata de centros espejo donde todas las configuraciones y datos de las aplicaciones se encuentran replicadas en tiempo real. Esta estrategia es muy cara pero efectiva para aplicaciones muy críticas, dado que permite tiempos de indisponibilidad nulos o de minutos.

Hoy en día, gracias a la nube, es mucho más sencillo disponer de una estrategia de recuperación ante desastres, ya sea con los sistemas principales en la nube o bien con los sistemas en local y el respaldo en la nube.

Los elementos esenciales para un plan sólido de recuperación ante desastres son estos:

-Definición del plan: Para que un plan de recuperación ante desastres funcione, tiene que involucrar a la gerencia. Ellos son los responsables de su coordinación y deben asegurar su efectividad. Adicionalmente, deben proveer los recursos necesarios para un desarrollo efectivo del plan. Todos los departamentos de la organización participan en la definición del plan.

-Establecimiento de prioridades: A continuación, la organización debe preparar un análisis de riesgo y crear una lista de posibles desastres naturales o causados por errores humanos, y clasificarlos según sus probabilidades. Una vez terminada la lista, cada departamento debe analizar las posibles consecuencias y el impacto relacionado con cada tipo de desastre. Esto servirá como referencia para identificar lo que se necesita incluir en el plan. Un plan completo debe considerar una pérdida total del centro de datos y eventos de larga duración de más de una semana. Una vez definidas las necesidades de cada departamento, se les asigna una prioridad. 

-Selección de estrategias de recuperación: En esta etapa se determina las alternativas más prácticas para proceder en caso de un desastre. Todos los aspectos de la organización son analizados, incluyendo hardware, software, comunicaciones, archivos, bases de datos, instalaciones, etc. Las alternativas a considerar varían según la función del equipo y pueden incluir duplicación de centros de datos, alquiler de equipos e instalaciones, contratos de almacenamiento y muchas más. Igualmente, se analiza los costos asociados. La virtualización representa un avance considerable al aplicarse en el Plan de Recuperación ante Desastres. 

-Componentes esenciales: Entre los datos y documentos que se debe proteger se encuentran listas, inventarios, copias de seguridad de software y datos, cualquier otra lista importante de materiales y documentación. La creación previa de plantillas de verificación ayuda a simplificar este proceso. Un resumen del plan debe ser respaldado por la gerencia. Este documento organiza los procedimientos, identifica las etapas importantes, elimina redundancias y define el plan de trabajo. La persona o personas que escriban el plan deben detallar cada procedimiento, tomando en consideración el mantenimiento y la  actualización del plan a medida de que el negocio evoluciona. El plan asigna responsabilidad a diferentes equipos o departamentos y alternos.

-Criterios y procedimientos de prueba del plan: La experiencia indica que los planes de recuperación deben ser probados en su totalidad por lo menos una vez al año. La documentación debe especificar los procedimientos y la frecuencia con que se realizan las pruebas. Las razones principales para probar el plan son: verificar la validez y funcionalidad del plan, determinar la compatibilidad de los procedimientos e instalaciones, identificar áreas que necesiten cambios, entrenar a los empleados y demostrar la habilidad de la organización de recuperarse de un desastre.

-Después de las pruebas el plan debe ser actualizado. Se sugiere que la prueba original se realice en horas que minimicen trastornos en las operaciones. Una vez demostrada la funcionalidad del plan, se debe hacer pruebas adicionales donde todos los empleados tengan acceso virtual y remoto a estas posiciones y funciones en el caso de un desastre. Antes de las pruebas totales, y para evitar impactos no previstos, se deben realizar otro tipo de pruebas, desde revisión de la documentación por el personal, crear escenarios simulados donde cada responsable comunica los pasos a realizar y se valida contra una serie de pasos predefinidos correctos, o bien pruebas parciales reales.

-Aprobación final: Después de que el plan haya sido puesto a prueba y corregido, la gerencia deberá aprobarlo. Ellos son los encargados de establecer las pólizas, los procedimientos y responsabilidades en caso de contingencia, y de actualizar y dar el visto al plan anualmente. A la vez, sería recomendable evaluar los planes de contingencia de proveedores externos.

#### Gestión de incidentes

Un incidente de seguridad es cualquier suceso que afecte a la confidencialidad, integridad o disponibilidad de los activos de información de la empresa, por ejemplo: acceso o intento de acceso a los sistemas, uso, divulgación, modificación o destrucción no autorizada de información.

La gestión de incidentes de seguridad es el conjunto de procesos en una organización para la gestión de un incidente de seguridad a lo largo de todo su ciclo de vida, así como una serie de actividades relacionadas para asegurar la mejora continua de dichos procesos. Estos procesos deben plasmarse en un Plan de Gestión de Incidentes, documento que recoge la categorización de incidentes, pasos a dar de forma general, los pasos específicos por tipo de incidente, roles y responsabilidades, tiempos de respuesta de cada paso, procedimientos de notificación, escalado y declaración de un incidente, etc. Los pasos a tomar, de forma general, son los siguientes:

-Fase 1: Preparación:

Esta etapa dentro del ciclo de vida de respuesta a incidentes suele hacerse pensando no sólo en crear un modelo que permita a la entidad estar en capacidad de responder ante estos, sino también en la forma como pueden ser detectados, evaluados y gestionar las vulnerabilidades para prevenirse, asegurando que los sistemas, redes, y aplicaciones son lo suficientemente seguros.

-Fase 2: Detección y análisis:

Los indicadores son los eventos que nos señalan que posiblemente un incidente ha ocurrido generalmente algunos de estos elementos son:

.Alertas en sistemas de seguridad.

.Caídas de servidores.

.Reportes de usuarios.

.Software antivirus dando informes.

.Otros funcionamientos fuera de lo normal del sistema.

.Una vez detectado por cualquiera de los medios (reporte de usuario, alerta en un SIEM, etc), se debe hacer un análisis inicial del incidente recopilando información básica que permita descartar falsos positivos y priorizar. Se debe recopilar información como: Cuándo ocurrió? / Cómo se descubrió? / Quién lo descubrió? / Han sido impactadas otras áreas? / Cuál es el alcance del compromiso? / Afecta a las operaciones? / Se ha descubierto el punto de entrada/origen?

Finalmente, en caso de no ser descartado como un falso positivo, se debe priorizar de acuerdo a su criticidad y el impacto en la organización y asignar a un gestor de incidentes cualificado.

-Fase 3: Contención, erradicación y recuperación:

.Contención: esta actividad busca la detección del incidente con el fin de que no se propague y pueda generar más daños a la información o a la arquitectura de TI, para facilitar esta tarea la entidad debe poseer una estrategia de contención previamente definida para poder tomar decisiones por ejemplo: apagar sistema, desconectar red, deshabilitar servicios. La estrategia de contención varía según el tipo de incidente y los criterios deben estar bien documentados para facilitar la rápida y eficaz toma de decisiones.

.Erradicación y Recuperación: Después de que el incidente ha sido contenido se debe realizar una erradicación y eliminación de cualquier rastro dejado por el incidente como código malicioso y posteriormente se procede a la recuperación a través de la restauración de los sistemas y/o servicios afectados para lo cual el administrador de TI o quien haga sus veces deben restablecer la funcionalidad de los sistemas afectados, y realizar un endurecimiento del sistema que permita prevenir incidentes similares en
el futuro. Para la recuperación se pueden tener también varias estrategias, como recuperar información dañada desde una copia de seguridad, reinstalar un sistema desde cero, etc.

-Fase 4: Actividades post-incidente:

Las actividades Post-Incidente básicamente se componen del reporte apropiado del Incidente, la generación de lecciones aprendidas, el establecimiento de medidas tecnológicas, disciplinarias y penales de ser necesarias así como el registro en la base de conocimiento para alimentar los indicadores.

Una de las partes más importantes de un plan de respuesta a incidentes es la de aprender y mejorar. Cada equipo de respuesta a incidentes debe evolucionar para reflejar las nuevas amenazas, la mejora de la tecnología, y las lecciones aprendidas. Mantener un proceso de lecciones aprendidas después de un incidente grave, y periódicamente después de los incidentes menores, es sumamente útil en la mejora de las medidas de seguridad y el proceso de gestión de incidentes. Mantener un adecuado registro de lecciones aprendidas permite conocer:

.Exactamente lo que sucedió, en qué momento y cómo el personal gestionó el incidente.

.Los procedimientos documentados.

.Si se tomaron las medidas o acciones que podrían haber impedido la recuperación.

.Cuál sería la gestión de personal y que debería hacerse la próxima vez que ocurra un incidente similar.

.Acciones correctivas pueden prevenir incidentes similares en el futuro.

.Cuales herramientas o recursos adicionales son necesarios para detectar, analizar y mitigar los incidentes en el futuro.

El proceso de lecciones aprendidas puede poner de manifiesto la falta de un paso o una inexactitud en un procedimiento y son un punto de partida para el cambio, y es precisamente debido a la naturaleza cambiante de la tecnología de la información y los cambios en el personal, que el equipo de respuesta a incidentes debe revisar toda la documentación y los procedimientos para el manejo de incidentes en determinados intervalos.

####  Proyecto de clases Día 9: 19/10/2023

### Monitorización del riesgo

La monitorización continua y el reporte del riesgo es un proceso dinámico que requiere una participación a nivel global. Para ser efectiva, la función de gestión del riesgo deben tratar las tendencia clave antes de que se conviertan en problemas y ser reportadas de forma periódica a los stakeholders clave. El reporte del riesgo es el proceso de comunicación los riesgos en tiempo real, o de forma regular y el rendimiento a los diferentes stakeholders. La monitorización del riesgo es una actividad continua que permite la concienciación de qué está sucediendo actualmente en diferentes partes de la organización. De forma estratégica, a lo largo del tiempo, la monitorización del riesgo permite a la gerencia

-Identificar tendencias críticas.

-Responder de forma apropiada y eficiente.

-Descubrir oportunidades de negocio o mejoras en procesos que de otra forma no serían aparentes sin una

-correcta monitorización.

Esto se pude lograr mediante diferentes técnicas:

-Los mapas de riesgo y el perfil de riesgo se pueden generar en cualquier momento y ser compartidos con diferentes stakeholder como medio de reporte.

-Los resultados de pruebas y los valores de aseguramiento se pueden obtener mediante agregación desde el registro del riesgo hasta la evaluación del riesgo estratégico para el reporte estratégico, proveyendo la capacidad de ver el riesgo en un cuadro de mandos.

-Las métricas pueden ser enlazadas a los riesgos para seguir y monitorizar el riesgo y diferentes disparadores o alarmas se pueden utilizar en combinación con las métricas para notificar a los stakeholders y conducir la toma de decisiones en tiempo real.

-Los informes de seguimiento y desviaciones, así como todas las evaluaciones del riesgo se pueden enlazar con los diferentes indicadores y métricas para facilitar la detección de problemas potenciales y facilitar la toma de decisiones sobre las estrategias de tratamiento y correcciones sobre las mismas.

A nivel más operativo, la monitorización del riesgo provee a las organizaciones de formas de:

-Validar el cumplimiento legal, regulatorio y contractual.

-Determinar la efectividad continua de las medidas de respuesta al riesgo.

-Identificar los cambios que impactarían al riesgo sobre SI y entornos de operación.

Analizar los resultados de la monitorización da a las organizaciones la capacidad de mantener la concienciación sobre el riesgo incurrido, destacar la necesidad de revisitar otros pasos en el proceso de gestión del riesgo e iniciar actividades de mejora del proceso según sean requeridas. Las organizaciones pueden establecer la monitorización en cualquiera de las capas de gestión.

-Las actividades de monitorización en capa 1 pueden incluir evaluaciones del riesgo continuas y cómo los cambios en el espacio del riesgo pueden afectar a las actividades de la capa 2 y 3.

-Las actividades a nivel de capa 2 podrían incluir el análisis de tecnologías nuevas o existentes para identificar debilidades explotables y/o deficiencias que podrían afectar al éxito del negocio.

-En la capa 3, las actividades se centran en los SI y podría incluir, por ejemplo, la monitorización automática de los valores de configuración estándar de los productos TI, escaneo de vulnerabilidades y valoraciones continuas de los controles de seguridad.

#### Requisitos para la monitorización del riesgo

Las entradas para este proceso incluyen las estrategias de implementación de las respuestas al riesgo y la implementación actual de los cursos de acción seleccionados. Así mismo, el proceso puede recibir información desde el marco de gestión del riesgo.

En algunos casos, las salidas de la evaluación del riesgo pueden ser entradas útiles para este proceso. Por ejemplo, las condiciones umbral de evaluación del riesgo.

#### Actividades para la monitorización y reporte del riesgo

Las organizaciones implementan programas de monitorización del riesgo para:

-Verificar que las medidas de respuesta están implementadas y que los requisitos de seguridad de la información derivados de y trazables a los objetivos del negocio, leyes y regulaciones, directivas, políticas y estándares se satisfacen.

-Determinar la efectividad continua de las medidas de respuesta al riesgo tras su implementación

-Identificar cambios de los SI y entornos de la organización en los cuales los sistemas operan que puedan afectar al riesgo.

Determinar el propósito de los programas de monitorización del riesgo impacta de forma directa en los medios utilizados por la organización para realizar dichas actividades y dónde se realiza la monitorización.

Las estrategias de monitorización desarrolladas en la capa 1 influencian y proveen de dirección a las estrategias similares desarrolladas en las capas 2 y 3,incluyendo las actividades de monitorización asociadas con el marco de gestión del riesgo al nivel de SI.

Una vez se han desarrollado las estrategias de monitorización, estas deben ser implementadas a nivel organizacional. Dado que existen tantos aspectos en la monitorización, no todos serán realizados, o pueden ser realizados en momentos diferentes.

Los aspectos particulares que serán ejecutados serán dictados principalmente por las asunciones, restricciones, tolerancia al riesgo y prioridades establecidas por las organizaciones en el establecimiento del marco de gestión del riesgo.

Esta coordinación facilita la compartición de información relacionada con el riesgo, que podría ser útil para proveer de una alerta temprana, desarrollar información de tendencias o asignar medidas de respuesta al riesgo de forma eficiente y oportuna.

Los resultados de la monitorización se aplicarán en la realización de evaluaciones del riesgo incrementales para mantener el conocimiento del riesgo incurrido, para destacar los cambios en el riesgo y para indicar la necesidad de revisitar otros pasos del proceso de gestión del riesgo cuando sea necesario.

#### Comunicación del riesgo

La comunicación del riesgo es una parte integral del proceso de evaluación y en general de la monitorización y reporte de la gestión del riesgo, que implica los procesos de comunicación entre los diferentes roles y responsabilidades 

-El proceso de comunicación se debe diseñar para ser iterativo y para informar de las decisiones de evaluación y gestión.

-El objetivo es que todos los stakeholders tengan una comprensión común de los procesos y asunciones realizados.

-El nivel y tipo de comunicación varía dependiendo de la complejidad de la organización y el nivel de riesgo potencial y la percepción del mismo por las partes.

#### KRIs (Indicadores Clave del Riesgo)

Estos indicadores son métricas que miden la probabilidad de que ocurra un riesgo. Un indicador de riesgo es un elemento cuyos valores se calculan con base en datos históricos. De esa manera se representan los factores de riesgo a los cuales se expone una compañía. El uso de indicadores es importante porque permite tener una visión multidimensional del perfil de riesgo, además de que son dinámicos y ayudan a validar el marco de gestión.

Estos indicadores:

-Sirven como herramienta de monitorización y mitigación de los riesgos.

-Avisan cuando algo no funciona como debería.

-Ofrecen una alerta temprana a los gerentes para que tomen las acciones oportunas.

-Identifican la exposición actual al riesgo y las tendencias de riesgo emergentes.

-Subrayan las debilidades de los controles.

-Ayudan a fortalecer los controles deficientes.

-Facilitan el proceso de informe y escalado de riesgos.

-Validan y mejoran el marco de evaluación de riesgos.

-Pueden usarse en procesos de benchmarking.

Para que estos indicadores sean efectivos, deben cumplir los siguientes requisitos:

-Medibles: deben ser cuantificables.

-Predictivos: deben generar alertas tempranas.

-Comparables: deben mostrar una evolución en el tiempo.

-Informativos: deben promocionar datos útiles para tomar decisiones.

Estos KRIs pueden ser divididos en diferentes tipologías:

-Causales: Indicadores que miden las causas de los riesgos.

-Efectividad de los controles: Cómo de bien está funcionando un control o salvaguarda.

-Volumen: Indicadores que miden volumen de situaciones o datos cuya variación afecta los riesgos 

En el diseño de los indicadores se deben tomar en cuenta varios aspectos:

-Fuentes de las que se medirán: Si son automáticas o manuales.

-También el cómo se recopilará la información de dichas fuentes.

-Establecimiento de umbrales de alerta y alarma, lo que permitirá actuar antes de que un indicador llegue a un valor crítico que impacte a la organización.

-Proceso de mejora y madurez: Según la organización madura en su proceso de seguridad, se deberán crear nuevas métricas o actualizar las existentes, todo ello con el objetivo de reflejar las necesidades en cada momento.

En este proceso es conveniente ser muy prudente y no intentar medir todo al mismo tiempo. Dependiendo del nivel de madurez de la organización puede ser necesario comenzar con unos pocos indicadores básicos y de alto nivel, y desde ahí comenzar a madurar dichos indicadores según maduran a la vez los procesos de seguridad de la información.

#### Herramientas para monitorización del riesgo

Existen una serie de técnicas que permiten hacer un seguimiento del riesgo y por tanto monitorizarlo:

-Reevaluaciones del riesgo: Tanto de forma total como parcial o incremental, se deberían realizar nuevos análisis para validar el nivel de riesgo actual por áreas, servicios o procesos. Si bien los análisis de riesgos suelen realizarse cada 2 años o tras cambios con un gran impacto, los análisis incrementales o bien parciales sobre ciertas áreas/servicios/procesos permitirán actualizar el nivel de riesgo de la organización e incluir en el riesgo presente las nuevas medidas implementadas o mejoradas.

-Auditorías del riesgo: Examinar y documentar la efectividad de la planificación de la respuesta al riesgo para el control del riesgo y la efectividad de los propietarios del riesgo.

-Análisis de varianza y tendencia: Las desviaciones significativas indican que se debería realizar una identificación y análisis de riesgos actualizada.

-Reuniones de seguimiento: Si bien esto es un trabajo bastante manual y la interpretación de los resultados compleja, es una herramienta muy poderosa de cara a evaluar aspectos más subjetivos de le gestión del riesgo, incluyendo el clima respecto al proceso.

Así mismo, existen una serie de herramientas que facilitarán ejecutar la monitorización:

-Registro del riesgo: Como repositorio central de todos los riesgos y el estado del mismo, será la pieza central de cara a obtener el estado en cada momento. Dependiendo de si se trata de una herramienta simple o una herramienta específica, se podrán además generar informes con la información contenida.

-Herramientas GRC (Gobierno, Riesgo y Cumplimiento): El software de GRC permite a las organizaciones integrar y gestionar las operaciones de TI que están sujetas a regulación. Asimismo, permite adoptar un enfoque sistemático y organizado para la gestión e implementación de estrategias relacionadas con GRC. En lugar de guardar los datos en diferentes silos, los administradores pueden utilizar un marco único para monitorizar y hacer cumplir las reglas y procedimientos. Estas herramientas generalmente se aplican a nivel corporativo para diferentes funciones, no sólo seguridad, siendo bastante complejas. Desde el punto de vista de la seguridad, una herramienta de este tipo debería permitir:

.Realizar un modelado de activos y su valoración.

.Permitir el análisis y gestión de riesgos.

.Permitir el análisis del cumplimiento legal y regulatorio.

.Gestión de la continuidad de negocio.

.Disponer de un catálogo modificable en base a estándares y mejores prácticas de activos, amenazas, vulnerabilidades y salvaguardas.

.Disponer de plantillas documentales y repositorio documental para la gestión de seguridad y cumplimiento.

.Permitir la gestión de empresas complejas creando diferentes capas a la vez que unidades de negocio y la gestión multiempresa.

.Proporcional métricas y capacidad de monitorización y reporte de seguridad y de la gestión del riesgo

-SIEM: Las herramientas de monitorización de información y eventos de seguridad, además de servir para detectar posibles incidentes de seguridad, gracias a integrar múltiples fuentes de seguridad y disponer de catálogos de informes y cuadros de mando para cumplimiento y gestión del riesgo permitirán realizar una monitorización de ciertos aspectos más técnicos.

-Plantillas excel (o sistemas similares): Si bien resulta un elemento muy poco tecnológico, dado que es imposible automatizar el análisis y lectura de toda la información necesaria, en muchos casos será necesario crear plantillas para poder introducir la información necesaria dentro de otras herramientas de gestión y monitorización del riesgo.

Otro tipo de herramientas para la gestión TI generalista, pero que serán fundamentales para la monitorización del riesgo de seguridad son las siguientes:

-CMDB: Una base de datos de la gestión de configuración es una base de datos que contiene detalles relevantes de cada CI y de la relación entre ellos, incluyendo el equipo físico, software y la relación entre incidencias, problemas, cambios y otros datos del servicio de TI. 

-Herramientas de descubrimiento de activos: Estas herramientas, de forma pasiva o activa, permiten descubrir diferentes activos así como información sobre los mismos, pudiendo en algunos casos integrarla directamente en la CMDB.

-Herramientas de monitorización de salud: Estas herramientas permiten monitorizar el estado de los servidores, aplicaciones, dispositivos de red, BBDD, etc desde el punto de vista de la salud.

Por otro lado, se debe tener en cuenta que se debería integrar, en la medida de los posible, las diferentes herramientas de ciberseguridad con las herramientas de monitorización del riesgo con el objeto de disponer de una imagen actualizada y completa de la
organización.

->|(POR FIN TERMINO CON ESTA PARTE, POR AMOR DE DIOS QUE EL SIGUIENTE PROFESOR NO SEA TAN CARGANTE)|

####  Proyecto de clases Día 10: 21/10/2023

## "OSINT para fuga de datos empresariales"

● 1. Linkedin

● 2. www.qdq.com

● 3. librebor.me/

● 4. Busqueda de Curriculo con Google

● 5. Infobel.com

● 6. www.Twago.es

● 7. es.Indeed.com

● 8. Páginas Amarillas

● 9. Ivenes

● 10. Hunter.io

● 11. Boletín del BOE

● 12. GOB.es

● 13. Redes Sociales

##

En las empresas tenemos adquisición, procesamiento y análisis de la inteligencia OSINT y puede ser utilizada por o para:

-Consumidores

-Competencia

-Predicción de eventos

-Prevenir Fugas de información

-Marqueting

OSINT es un acrónimo de Open Source Intelligent. En internet hay millones de terabytes de información de dominio público de los millones de usuarios que lo usamos diariamente. Por no decir de la Deep Weeb ->(|Tardaba en aparecer, se hizo de rogar|)

Utilizando herramientas de OSINT y nuestras habilidades, se realiza un proceso de investigación sonre la información solicitada. Consiste en:

-Busqueda    -Selección   -Adquisición de Información   -Procesado   -Análisis   -Presentación

#### Usos más habituales

-Conocer la reputación online de su empresa, marca o persona.

-Conocer tendencias de mercado y evaluarlas.

-Estudios del lenguaje, psicológicos, etc...

-Medio para evaluar la privacidad de una empresa u organismo.

-Identificar y evaluar posibles amenazas en el ámbito militar y policial.

-Ayudar a localizar fuentes públicas para eliminarlas.

Como resultado, podemos ser de gran ayuda para su empresa sobre todo si cuenta con los siguientes departamentos:

-Periodismo: localizamos información que le puede resultar útil para sus investigaciones o noticias.

-Recursos Humanos: Si quieres saber más sobre un posible candidato o sobre sus propios empleados.

-Marketing: Información y estudios muy útiles para su producto o servicio.

-Fuerzas y seguridad del estado: Información que ayude a prevenir atentados o actos delictivos en general.

-Abogados y detectives: Primero para ayudar a sus clientesen su defensa y segundo para conocer corrientes de opinión.

-Agentes Encubiertos: Ayudar a detener a personas que realizan actos delictivos creando y difundiendo perfiles creíbles.

-Rastreo de Criptomonedas y transacciones: Unido a la tecnología Blockchain permite indagar sobrecuentas y sus movimientos.

-Evitar robos y hackeos: no saber que Información hay suya en la red hace posible que ciberdelincuentes encuentren vulnerabilidades. Por ejemplo un viejo correo electrónico que se hizo hace tiempo y ya no usa.

-Información sobre la empresa: saber si hay datos públicos que no deberían serlos, están obsoletos o no se tenía idea. Encontrar autores de esas publicaciones en caso de no ser correctas. También detectar vulnerabilidades por la información publicada que pueda ser usada por cibercriminales.

-Mejoras de Productos: Se puede conocer mejor que opinión tiene la sociedad de un determinado producto y así mejorarlo. Ocurre lo mismo con la calidad o el servicio.

En conclusión, una empresa que no tiene datos para tomar sus decisiones va sin rumbo. Los datos se han convertido en la mejor manera de asegurar que los objetivos se cumplan. Además, tenemos que aprovechar la cantidad de información que Internet nos brinda.

Por ejemplo usando las siguientes herramientas listadas anteriormente como LinkedIn, que son principales para temas empresariales.

Aquí nos enseña a como usar kali en linux con el comando "theharvester -d" y el nombre.es de una empresa para obtener una serie de datos de esta y añadiendo "-l 100" para obtener 100 registros, aconseja no obtener muchos más ya que estas herramientas hacen mucho ruido y el provedor de servicios podría banearnos la Ip. También añade "-b google" para que busque en google.

Entre los resultados se obtienen 3 emails de la empresa. También 9 rutas de hosts para acceder a páginas de la empresa.

Al usar el comando anterior pero cambiando google por linkedIn, Nos enseña Los nombres y ocupaciones en la empresa de los trabajadores que usaron su correo en linkedIn ->(|que bien que Nunca me gusto linkedIn|)

Ahora enseña Hunter.io, donde introduce el nombre de una empresa y devuelve los correos de un monton de trabajadores y donde se han puesto esos correos ->(|Que censure la segunda y tercera letra del correo solamente no sirve de mucho deja que te diga|)

Usando pdfyeah.com y metadata2go.com nos muetra como ver los metadatos de un pdf descargado.

Usando: "intitle:index of passwords" en el bucador podemos ver las contraseñas y datos publicos de una empresa.

Nos enseña usando Tor como accede a la hidden wiki, la wikipedia de la dark web y luego busca en Tor información de telefonica que no muestra para proteger información

Muestra la herramienta OSINTUX que permite ver la funcionalidad y potencia que dan ciertos frameworks. ->(|La contraseña base es OSINT... No me parece muy segura la verdad.|) 

Nos enseña la interfaz de escritorio de Huron y nos habla de sus aplicaciones ->(|Sin mostrar ninguna o profundizar... decepción|)

->(|Esta parte del curso se llamaba taller y esperaba que fuese más practica pero no, se dedico 15 minutos a mostrar metadatos, el escribir palabras claves en el buscador para bucar más facilmente información y nisiquiera detallo realmente los metodos usados en profundidad, como shodan, página que explicó rápido en menos de 2 minutos. La verdad fué como los otros dos modulos anteriores de teoría pero más corto. Lo unico que fué interesante fué la parte de Tor que duró un minuto|).

####  Proyecto de clases Día 11: 22/10/2023

## "Criptografía Simétrica y Asimétrica en la práctica"

● 1. ¿Qué es Criptografía?

● 2. Historia de la Criptografía

● 3. Criptografía Actual

● 4. Criptografía simétrica

● 5. Criptografía asimétrica

● 6. Función Hash

● 7. Firma Digital

● 8. Criptografía Cuántica

##

### ¿Qué es Criptografía?

Se trata de crear mensajes ininteligibles para receptores no autorizados aplicando un algoritmo garantiza la confidencialidad de la información. La descripción literal sería: Es el arte de escribir con clave secreta o de un modo enigmático.

Los 4 objetivos de la seguridad informática: Confidencialidad / Disponibilidad / Integridad / No Repudio.

Dentro de la criptografía el objetivo en el que habrá que centrarse es la Confidencialidad

### Historia de la Criptografía

Empezó con los jeroglíficos de los egipcios usando un sistema de sustición ->(|Nunca lo había pensado la verdad pero si que son cifrados a su manera. Tambíen acabo de descubrir que llevo 20 años escribiendo jeroglíficos con G cuando es con J|) cambiando las letras por símbolos. Más adelante los espartanos usarían la Escítala que usaba la Transposición, es decir, cambiar el orden de los caracteres en el mensaje. 

Uno de los más conocidos es el cifrado César de los Romanos, que sustituian desplazando el alphabeto ciertas posiciones.

### Criptografía Actual

Tenemos 2 metodos:

-Criptografía Simétrica o de Clave Privada: Tanto el receptor como el emisor conocen la clave para cifrar y descifrar el mensaje.

● Ventajas:

○ Eficiente en grupos reducidos

○ Sencillos de utilizar

○ Eficientes (poco tiempo cifrar/descifrar)

● Desventajas:

○ Posible intercambio de claves por medios no seguros

○ Gran cantidad de claves a memorizar/almacenar

El cifrado simétrico se puede hacer sobre Linux usando:

.VirtualBox (Gratuito)

.Kali (Gratuito)

.GnuPG (Viene Preinstalado)

El cifrado simétrico se puede hacer sobre Windows usando:

.Windows 10

.IZArc (Gratuito)

-Criptografía Asimétrica o de Clave Pública: El receptor y emisor disponen de una clave pública para cifrar y otra privada para descifrar el mensaje

Contiene clave matemáticamente relacionadas. Lo que cifras con una solo lo puedes descifrar con la otra clave y es imposible deducir la clave privada con la pública.

● Ventajas:

○ Menor número de claves

○ Utilización medios no seguros

○ Firma digital (no repudio)

● Desventajas:

○ Poco eficientes

○ Proteger clave privada (con criptografía simétrica)

○ Importante backup de la clave privada

El cifrado asimétrico solo puede hacerse sobre Linux usando los mismos programas que el cifrado simétrico

Al momento de crear estas claves, se puede indicar durante cuanto tiempo serán validas, luego de ese periodo caducan y quedan inutilizadas.

### Criptografía Función Hash

Serie de algoritmos que transforman unos datos en una serie de caracteres con longitud fija. Se genera a partir de una cadena de texto usando una función matemática identificando de forma única a un fichero.

Sirve para proteger la integridad de los datos, ya que si hay datos duplicados o incorrectos esto permite saberlo.

Los principales algoritmos son: MD5 y SHA

-Reglas:

○ Números generados con un mismo método tienen igual tamaño

○ Imposible reconstruir texto base a partir del Hash

○ Computacionalmente sencillo de calcular


-Ejemplos:

○ Código ASCII

○ Agrupar de 3 en 3

○ Función matemática (1º - 2º) * 3º

-Para comprobar el Hash se puede usar:

○ VLC 

○ Hash Generator. 

-Para crear un Hash se utiliza

○ WinMD5 en Windows

○ MD5sum en Linux

-Reverse Hashing: Tecnica de hacking que a través de un Hash intenta recupar el texto original y así por ejemplo obtener contraseñas. ->(|Cifrar contraseñas no es tan seguro como pense viendo lo facil que es usar esto. Con lo facil que parece que es desencriptar cosas con Hash no me parece muy buena idea usarlo para encriptar en primer lugar|) 

->(|La mejor analogía hasta ahora, las frutas son un imput, la batidora la función hash y el zumo resultante el output que no permite saber las futas iniciales. La verdad me hizo bastante gracia, me pillo desprevenido|)

###  Firma Digital

Es un método criptográfico para asociar la identidad de una persona o un equipo a un mensaje.

Internamente coje los datos y les aplica una función Hash utilizando la clave privada para firmar ese hash, el cual mezclado con un certificado digital da los datos firmados. Para que una persona pueda comprobar la firma,  utiliza la clave pública para descifrar la firma digital y la compara con el código hash que obtiene al pasar los datos por la función Hash. Si los códigos coinciden, la firma es válida. 

La firma digital puede hacerse:

-Con GnuPG sobre Linux

-Con Gpg4win sobre Windows

-La firma puede ir a parte del mensaje o junto a este.

○ Firma a parte ejemplo linux: "gpg -a -detach-sign nombrearchivo.algo" 

○ Firma adjunta ejemplo linux: "gpg -a --sign nombrearchivo.algo"

○ Comprobar firma ejemplo linux: "gpg --verify nombrearchivo.algo"

->(|Los ejemplos de Firma en Windows ya si tal estarán por ahí en clave hush por que de ellos no muestra nada|)

#### Criptografía Cuántica

La criptografía futura tendrá que ver con la física cuántica y funciona con "superposiciones" de bits que valen tanto 0 como 1 a la vez ->(|Vale, igual que la física cuantica, esa frase no tuvo ningún puñetero sentido. Como no sabemos que inventar hacemos supocisiones imposibles y ya vamos tirando.|)

->(Este taller fue bastante más interesante que el anterior, aun así no era lo que esperaba de algo llamado taller, pillé el curso más teorico de toda la página o que? Porque los 5 módulos que quedan ya ninguno más vuelve a ser taller tampoco.)

####  Proyecto de clases Día 12: 24/10/2023

## "Curso de Seguridad de red en el ámbito corporativo: Capa 2 del modelo OSI"

● 1.Introducción a las redes

● 2.Aseguramiento básico de dispositivos

● 3.Capa 2

● 4.ARP

● 5.STP

● 6.CDP

● 7.VLAN

● 8.DTP

● 9.VTP

##

### Introducción a las redes:

-La importancia de las redes:

.Comunicación instantánea.

.Elimina los límites físicos.

.Múltiples finalidades: sociales, comerciales, personales, ocio…

.Almacenamiento en la nube.

.Confiabilidad y seguridad.

Representaciones de Red:

-Componentes principales:

.Dispositivos finales

.Dispositivos intermediarios 

.Medios de red

-Forma de conexión entre sí:

.Tarjeta de red (NIC)

.Puerto físico

.Interfaz

Intranet, Extranet e Internet:

-Intranet: Empresa únicamente.

-Extranet: Proveedores, clientes, colaboradores.

-Internet: Resto del mundo.

Arquitectura de red:

-Tolerancia a fallos

-Escalabilidad

-Calidad de servicio (QoS)

-Seguridad: Confidencialidad, Integridad ○ Disponibilidad

Seguridad en la Red: Amenazas:

-Virus, gusanos y caballos de Troya

-Spyware y adware

-Ataques de día cero

-Denegación de servicios

-Intercepción y robo de datos

-Suplantación de identidad

Seguridad en la Red: Soluciones:

-Red doméstica o de oficina pequeña:

.Antivirus y antispyware

.Filtrado de firewall

-Red corporativa o grande:

.Sistema de firewall dedicado

.Listas de control de acceso (ACL)

.Sistemas de prevención de intrusiones (IPS)

.Redes privadas virtuales (VPN)

Modelo OSI y modelo TCP/IP

● Beneficios del modelo de capa:

-Ayuda en el diseño de protocolos

-Fomenta la competencia

-Evita que los cambios en una capa afecten a otras

-Proporciona un lenguaje común

● Modelo OSI (Open Systems Interconnections)

-Unidad de datos (PDU)

.Capa 5-7: Dato

.Capa 4: Segmento

.Capa 3: Paquete

.Capa 2: Trama

.Capa 1: Bit

● Modelo TCP/IP

-Unidad de datos (PDU)

.Capa aplicación: Dato

.Capa transporte: Segmento

.Capa Internet: Paquete

.Capa enlace de datos: Frame

● Capa de transporte: TCP VS UDP

-TCP (Transmission Control Protocol)

.Orientado a conexión: Establece una sesión

.Confiable

.Garantiza la entrega en el mismo orden y control de flujo

-UDP (User Datagram Protocol)

.No orientado a conexión: No establece una sesión

.No confiable

.Garantiza velocidad pero no la entrega (voz o vídeo)

.Soporta multicast y broadcast

● Modelo OSI vs TCP/IP

-Similitudes:

.Capa 3 (red) y Capa Internet

.Capa 4 (transporte) y Capa transporte

.Encapsulación y desencapsulación

-Diferencias:

.Capas 1-2 y Capa de acceso a la red

.Capas 5-7 y Capa de aplicación

->|(Inicio bastante básico)|

### "Aseguramiento básico de dispositivos"

#### formas de acceso a los dispositivos:

-Acceso por consola: Consiste en conectarse de manera local al dispositivo con un cable, recomendados RJ45 a DB9. Acceso fuera de banda. Es recomendable para configuraciones iniciales (no necesita servicios de red).

-Acceso por Consola: Conectar el cable al dispositivo y posteriormente desde el ordenador acceder a los puertos y comprobar el tipo de conección que tenemos ya que puede variar desde COM1 a COM6. Con este valor accedemos a un programa que permite conectarnos como PuTTY por ejemplo.

-Acceso por Telnet: Conexión remota no segura que viene en muchos dispositivos por defecto. Utiliza el puerto 23 del protocolo TCP. Necesita servicios de red obligatoriamente. Toda la información se envían en texto plano y No hay esquema de autenticación. Se hace similar al acceso por consola pero en vez de usar el typo de conección serial se elige other y se selecciona Telnet además de escribir la dirección I.P.

-Acceso por Secure Shell(SSH): Una conexión remota segura y encriptada. Utiliza el puerto 22 del protocolo TCP y necesita servicios de red obligatoriamente. Tiene dos etapas para establecer una conexión:

.Negociación de cifrado de sesión: El dispositivo al que queremos conectarnos y el pc se comunican y establecen las claves para cifrar la información.

.Autenticación del usuario: Las credenciales del usuario para conectarse.

También puede hacerse a traves de PuTTY seleccionando SSH y con la dirección I.P.

#### Modos de acceso CLI:

-Sistemas operativos: Detras de ellos se encuentra al más bajo nivel el hardware que para conectarse a el se establece un Kernell y por otro lado se tiene un Shell que es el encargado de comunicarse con la interfaz de usuario que puede ser CLI o GUI.

CLI: Ventana de comandos, todo lo que se recibe es en texto. Los dispositivos de red se configuran principalmente con CLI.

GUI: Interfaz gráfica, es más sencillo pero limita mucho las funcionalidades y consume más.

-Modos del IOS de CISCO

.Modo de ejecución de usuario: Switch>

.Modo de ejecución privilegiado: Switch#

.Modo configuración global: Switch(config)#

-Modos subconfiguración:

.Modo configuración de líneas: Switch(config-line)#

.Modo configuración de interfaz: Switch(config-if)#

-Navegación entre modos del IOS: Son necesarios una serie de comandos. Una vez se arranque se está en el modo de ejecución de usuario, estableciendo la palabra "enable" en el terminal se pasa al modo de ejecucion privilegiado y si queremos realizar una ejecución en el dispositivo añadimos las palabras "configure terminal" y de esa manera entramos en el modo de configuración global desde donde se puede acceder a los modos de subconfiguración ya sea el de "line" o el de "interface". Desde cualquiera de estos de puede saltar de uno a otro de manera automática. Para volver atrás se puede usar "exit" para regresar al modo de configuración global o "end" para volver al modo de ejecución privilegiado desde donde con un "disable" salimos a la ejecución de usuario.

-Estructura Basica de los comandos: En primer lugar se encuentra el indicador, siendo este el nombre del dispositivo generalmente seguido de un "mayor que" indicando que estamos en el modo ejecución donde se pueden hacer un par de ejecuciones básicas como show (muestra info del dispositivo) o ping (permite ver si hay conección con otros dispositivos), esto va seguido de un espacio y lugeo una palabra clave como por ejemplo una dirección ip o ip protocols.

-Sintaxis de los comandos:

.Negrita: Comandos y palabras clave

.Cursiva: Valor proporcionado por el usuario

.[x] : Elemento opcional

.{x} : Elemento obligatorio

.[x {y | z}] : Posibles opciones dentro de un elemento

#### Configuración del dispositivo y aseguramiento del acceso local:

-Nombre de los dispositivos:

.Nombre único y descriptivo

.Comenzar con una letra

.No contener espacios

.Finalizar con una letra o dígito

.Utilizar únicamente letras, dígitos y guiones

.Tener menos de 64 caracteres de longitud

Cuando hayamos decidido el nombre, desde la configuración local usamos "hostname NuevoNombre"

-Pautas para la contraseña:

.Al menos 8 caracteres, preferiblemente 10 o más caracteres

.Combinación de letras mayúsculas y minúsculas, números, símbolos y espacios

.Evite contraseñas predecibles

.Contraseñas con errores de ortografía a propósito

.Cambio de contraseñas periódico

.No anote ni deje en lugares visibles las contraseñas

.Ejemplo de contraseñas débiles: secreto, perez, toyota, bob1967, rojo1234…

.Ejemplo de contraseñas seguras: b67n42d39f, 12^h u4@1p7…

Se pueden hacer de 2 contraseñas:

.Modo ejecución de usuario: Desde el modo de configuración global escribimos "password ContraseñaUsar" y luego un "login" para que se registre

.Modo ejecución privilegiado: Desde el modo de configuración global escribimos "enable secret ContraseñaUsar"

-Encriptación de contraseña:

Desde el modo de configuración global escribimos ->(|Siento que voy a pegar esta frase bastante|)-> "service password-encryption". 

-Mensajes de aviso: Hay de tres tipos

.Desde el modo de configuración global escribimos "banner motd -Mensaje-". Llamado mensaje del día, este banner de mensaje se muestra al entrar en el dispositivo.

.Desde el modo de configuración global escribimos "banner login -Mensaje-". Aparece cuando se conecta alguien de manera remota.

.Desde el modo de configuración global escribimos "banner exec -Mensaje-". Se utiliza sobre todo para dar recordatorios a si mismo el administrador.

-Archivos de configuración: Hay dos tipos de archivos

.Startup-config: Es no volatil / Se almacena en la NVRAM / Se usa al inicio o reinicio / No pierde su contenido cuando se apaga el dispositivo

.Running-config: Se almacena en la RAM / Refleja la config. actual/ Es volátil, pierde el contenido al apagar el dispositivo / al apagar el dispositivo

Para pasar de Running a Startup se usa "copy running-config startup-config" ->(|A que no adivinas el modo de configuración :) |).-> Si usamos el comando "reload" se borra el running pero el dispositivo se reinicia por completo. Con "erase startup-config" borramos el startup y con "reload" volvemos a los ajustes iniciales.

-Copia de seguridad - Archivo TXT

Se puede hacer de forma manual con copiar y pegar pero se recomienda "Tera Term", desde donde con file/log estableciendo el nombre del archivo y abriendolo saldra una consola de comandos donde todo lo que salga por pantalla se guardará en un .txt ->(|Hay caray, eso si es bastante útil, fijate|).

-Copia de seguridad - Uso de TFTP: Un servidor que permite hacer una copia de seguridad más no por interfaz grafica

Hacer copia de seguridad con "copy running-config tftp:" y luego la dirección ip del servidor

Restaurar copia de seguridad con "copy tftp: running-config" y luego la dirección ip del servidor

-Copia de seguridad - Usos de USB:

Hacer copia de seguridad con "copy running-config NombreUSB:"

Restaurar copia de seguridad con "copy NombreUSB:/NombreFichero-Config running-config"

####  Proyecto de clases Día 13: 25/10/2023

#### Aseguramiento de las líneas de acceso remoto

-Conexión de las líneas - TELNET: Opción menos segura

Para configurar TELNET en las líneas aunque venga por defecto hay que establecerle una contraseña. Desde el modo de configuración global acceder a las líneas con "line vty 0 15" y luego "password ContraseñaDeseada" y por último un "login".

-Conexión de las líneas - SSH: La opción más recomendada y segura.

Primero hay que verificar que el dispositivo soporta SSH con "show ip ssh" en el dispositivo y si no lo soporta dará error. Una vez comprobado, se puede configurar el acceso con. Primero se configura el ip domain con  "ip domain-name NombreDeDominio", luego se genera un par de claves RSA con "crypto key generate rsa" y luego pregunta cuantos bits se usará, el mínimo es 512, el recomendado es 1024 y el máximo es 2048.

Una vez se tienen las claves, se lleva a cabo la autenticación de usuarios con "username NombreUsuario secret ContraseñaUsar". Luego configurar las líneas vty con "line vty 0 15" seguido de "transport input ssh" y "login local". Por último se habilita SSH versión 2 con "ip ssh version 2" ya que algunos dispositivos no la traen activa de normal.

-Componentes AAA:

● Autenticación:

. El cliente establece la conexión con el router

. El router solicita las credenciales

. El router autentica las credenciales contra servidor AAA remoto

. Se acepta o se deniega el acceso

● Autorización:

. El usuario está autenticado, la sesión está establecida

. El router pide autorización para la solicitud de servicio

. El servidor responde PASS/FAIL a la solicitud

● Registro

. Al autenticarse el usuario, se genera un mensaje para comenzar el proceso de registro

. Cuando el usuario termina, se registra mensaje de finalización del proceso de registro

-Seguridad adicional en las líneas:

.Establecer longitud mínima de contraseña aceptable con "security password min-length 8".

.Disuasión de ataques de fuerza bruta con "login block for 120 attemps 3 within 60" (si en 60 segundos alguien intenta tres veces se bloquea durante 120 segundos).

.Deshabilitar acceso tras un tiempo de inactividad "line vty 0 4"  "exec-timeout 5 30" (Tras 5 minutos 30 segundos se cierra la sesión).

#### Ejemplo de configuración en Packet Tracer

-Topología de Red: Se hace la muestra usando un Pc, un switch y un Router. 

En primer lugar en El pc se establece una dirección ip, la máscara de subred y la ip del router. Con el pc configurado, lo siguiente es el router, ya que el switch no es necesario configurarlo. En el router dentro de la pestaña de CLI, se accede a la configuración global y desde ahí se accede a la interfaz que nos interesa, en el caso del ejemplo la Gig0/0 donde se establece la ip del router y la misma máscara de red que el pc. Por último se activa el puerto con "no shutdown"

-Pasos a configurar: Con la topología lista, toca configurar parámetros en el CLI del router.

.Nombre de dispositivo.

.Notificación legal (banner motd).

.Protección modo ejecución de usuario.

.Protección modo ejecución privilegiado.

.Encriptación contraseñas del archivo de configuración.

.Acceso remoto (Ya sea con TELNET o SSH).

.Seguridad adicional.

.Guardar configuración.

-Reiniciar dispositivo después de guardar y comprobar:

.Cambio de nombre

.Aviso legal correcto al iniciar

.Accesos con contraseña vía consola correctos

.Contraseñas encriptadas en fichero de configuración

.Conexión habilitada vía Telnet

.Conexión habilitado vía SSH

.Seguridad adicional: longitud mínima de contraseña y bloqueo de acceso

### Introducción a la Capa 2

-Se trata de la capa de enlace de datos:

.Gestiona el acceso a los medios

.Encapsula los datos de la Capa 3 (Tx)

.Interpreta los bits de la Capa 1 (Rx)

.Controla el envío y la recepción de información en los medios

.Intercambia tramas entre puntos finales

.Detección de errores y tramas dañadas

-Subcapa según IEEE 802:

.Control de enlace lógico (LLC): 

<Implementado en software 

<Identifica el protocolo de Capa 3

.Control de acceso al medio (MAC): 

<Implementado en hardware

<Encapsulación de datos:

■ Delimitación de tramas

■ Direccionamiento

■ Detección de errores

<Control de acceso a medios

->(|Me estoy quedando sin iconos para las subclases de las subclases de las subclases de las subclases...|)

-Tipos de comunicación:

.Simplex: Transmiten Información en una sola dirección

.Semi-Dúplex: Transmiten Información en ambas direcciones pero no de manera simultanea

.Dúplex: Transmiten Información en ambas direcciones de manera simultanea

-Métodos de control de acceso:

.Acceso por contienda

<Acceso múltiple con detección de colisiones (CSMA/CD)

<Acceso múltiple con prevención de colisiones (CSMA/CA)

.Acceso controlado (Medios compartidos sin un intermediario)

-Campos de la trama ETHERNET

.Tecnología Ethernet

<Funciona en las Capas 1 y 2

<Se define en los estándares IEEE 802.2 y 802.3

.Trama Ethernet

<Tamaño mín.: 64 bytes

<Tamaño máx.: 1518 bytes

-Tipos de direcciones:

.Dirección MAC unicast

<Un único dispositivo de destino

<MAC Dest.: MAC Dispositivo

.Dirección MAC broadcast

<Todos los dispositivos de la red local reciben y procesan la trama

<MAC Dest.: FF-FF-FF-FF-FF-FF

.Dirección MAC multicast

<Grupo de dispositivos como destino

<MAC Dest.: 01-00-5E-XX-XX-XX

-SWITCH: Aprendizaje: 

En primer lugar el la dirección MAC del dispositivo que quiere enviar información es examinada por el switch y comprueba de que puerto viene, se comprueba si se encuentra en la tabla y se añade en caso negativo.

-SWITCH: Reenvío:

Si un dispositivo quiere conectarse a otra, pero la tabla ya está llena por el proceso anterior, actualiza el temporizador de la tabla y se envía sin comprobar los puertos no afectados.

####  Proyecto de clases Día 14: 26/10/2023

### ARP 

#### Funcionamiento de ARP

-Protocolo de la capa de enlace de datos responsable de encontrar la dirección MAC asociada a una determinada dirección IP

-Mantiene una tabla de asignaciones de direcciones IPv4 a MAC

-Esencial en la transmisión de datos en redes Ethernet

-Se distinguen dos modos de almacenar las relaciones: estática o dinámica

-Existen dos tipos de paquetes: ARP Request y ARP Reply

.ARP Request: Para descubrir la dirección MAC de una ip envía una solicitud a todos los dispositivos

.ARP Reply: Para descubrir la dirección MAC de una ip envía una solicitud a todos los dispositivos

-Tablas ARP:

<ARP estático:

<Añadidas por el administrador (manual)

<Únicamente read-only

<Más seguro pero menos escalable

<ARP dinámico

<Se aprenden a través del protocolo ARP

<Tienen fecha de vencimiento

<Menos seguro pero más escalable

-Variaciones ARP:

.Reverse ARP (RARP):

<Encuentra la dirección IP asociada a una determinada dirección MAC

<Necesidad de un servidor RARP especializado

<A día de hoy no se utiliza casi, se ha reemplazado por BOOTP y DHCP

.Proxy ARP:

<Un host responde a peticiones ARP destinadas a un host que se encuentra fuera de la red local. No es necesario enrutamiento o puerta de enlace. Se usa "ip proxy-arp"

-DEMO PACKET TRACER

.Comprobar que inicialmente la tabla está vacía

.Ver como se rellena la tabla tras hacer ping a otros PCs

.Borrar la información de la tabla

.Ver los paquetes que se envían de ARP (Request y Reply) desde el modo simulación

#### Fallo de Seguridad ARP

-Funcionamiento Normal:

Usuario intenta comunicarse con otro pero necesita saber cual es la ip, para eso gace una consulta ARP request a todos los usuarios de la red, el usuario al que quiere contactar contesta y su ip se guarda en la tablas

-ARP Spoofing:

En caso de que haya un atacante, tanto este como el usuario receptor contestan, siendo que el atacante envía muchas respuestas para engañar a la tabla ARP y que la entrada que se introduzca sea la del atacante haciendo que la información vaya al atacante

.Denegación de Servicio (DoS)

<Se asocia la MAC del atacante o una inexistente con la IP de la puerta de enlace

<Borrado parcial o total de los paquetes capturados

.Man in the middle

<Todos los paquetes enviados entre dos extremos son interceptados por el atacante

<Uso más común: session hijacking (secuestro de cookie)

#### Configuración Segura de ARP

-Mitigación de ARP Spoofing:

.Utilizar ARP estático:

<Configuración manual de tabla ARP

<Comando para PC Windows "arp -s interface mac_add ip_add"

<Comando para dispositivos Cisco " arp ip-address mac-address encapsulation–type"

.Software de detección y prevención de ARP Spoofing:

<Se limitan a escuchar y detectar patrones peligrosos (Arpwatch, ArpDefender, XArp…)

.Configurar DAI (Dynamic ARP Inspection):

<Con DHCP Snooping:

■ Configuración DAI : "ip arp inspection vlan vlan".

■ Puertos con DAI : "ip arp inspection trust".

■ Puertos sin DAI : "ip arp inspection limit rate rate".

<Sin DHCP Snooping (no recomendable): "ip source binding mac_add vlan vlan ip_add interface interface"

### STP 

#### Funcionamiento de STP

-Protocolo de la capa de enlace de datos que gestiona la presencia de bucles en topologías de red debido a enlaces redundantes

-Permite a los switches activar o desactivar automáticamente los enlaces según las necesidades de la topología

-Para conseguir eliminar bucles se determina un root en función de la prioridad y 3 tipos de puerto: root, designado y alternativo

-Para el intercambio de información entre los switches de la topología se utilizan tramas BPDU

-Bucles de capa 2

.Broadcast storm: La PC2 reenvía una trama de disfusión pero no se puede procesar debido a la sobrecarga del tráfico de red

-Algoritmo STP: En un bucle, se ejecuta el algoritmo STP, se determina cual es el root y los switches determinan cual es la mejor ruta para llegar al root. Los puertos que no se utilizen se bloquean. En caso de que falle un enlace se recalcula el algoritmo y cambia los puertos bloqueados.

-Unidad con datos STP: BPDU

.Prioridad del puente:

<Valor personalizable que influye en la elección del root (de 0 a 61440)

.ID del sistema extendido:

<Valor agregado al valor de la prioridad que identifica la VLAN para esta BPDU

.Dirección MAC

<Prioridad del puente

<Id del sistema extendido

<Dirección MAC

-Pasos para topología sin bucles:

.Elegir el root

.Seleccionar los puertos root

.Seleccionar los puertos designados

.Seleccionar los puertos alternativos (bloqueados)

-Elección de root: Aquel que tenga la dirección MAC más pequeña tendra mayor prioridad

-Tipos de puerto:

.Puerto root: Conectan los switches directamente con la ruta más rapida para llegar al root

.Puerto designado: Es aquel que conecta desde todos lados a si mismo

.Puerto alternativo (bloqueado)

-Temporizadores:

.Hello Timer:

<Intervalo entre BPDU

<Valor predeterminado: 2 segundos

.Forward Delay Timer:

<Tiempo que se pasa en el estado de escucha y aprendizaje

<Valor predeterminado: 15 segundos

.Max Age Timer:

<Duración máxima de espera antes de cambiar la topología STP

<Valor predeterminado: 20 segundos

-Estados del puerto:

.Bloqueo:

<Puerto alternativo que no participa en el reenvío de tramas.

<Recibe tramas BPDU para determinar la ubicación e ID del root.

.Escucha:

<Recibe tramas BPDU. Envía tramas BPDU propias.

<Informa a los switches adyacentes que el puerto se está preparando

<para participar en la topología STP

.Aprendizaje:

<Recibe, procesa (aprende direcciones MAC) y envía tramas BPDU.

<Se prepara para participar en el reenvío de tráfico de usuario.

.Reenvío:

<Envía y recibe tramas BPDU. Reenvía tráfico de usuario.

.Deshabilitado:

<No participa en ninguna operación STP ni reenvía tráfico.

<Puerto administrativamente deshabilitado

-Versiones STP

.PVST: Proporciona una instancia de árbol diferente por cada VLAN

.RSTP: Proporciona una convergencia más veloz que STP

.PVST+ rapid: Mejora de RSTP con una instancia de árbol diferente por cada VLAN

.MSTP: Asigna varias VLAN en la misma instancia de árbol

#### Fallo de Seguridad STP

-Funcionamiento Normal: Un root por el que pasa toda la información, un root secundario de respaldo. Se calcula el root con mayor prioridad y se detectan las rutas más rápidas.

-Cambio del rol del root: Un atacante envía una BPDU con una prioridad de 0 y su MAC, el resto de dispositivos lo connsiderarán legitimo y se configurará como nuevo root haciendo que toda la información vaya al atacante

#### Configuración segura del root

-Mitigación de los ataques:

.Usar Portfast BPDUGuard:

<Configuración global: "spanning-tree portfast bpduguard default"

<Configuración por interfaz: "spanning-tree bpduguard enable"

.Usar Root Guard: "spanning-tree guard root"

### CDP

#### Funcionamiento de CDP

Protocolo de capa 2 patentado por Cisco que se utiliza para obtener información de los dispositivos Cisco que comparten enlace de datos.

-Envía mensajes CDP (multicast) periódicos a los dispositivos conectados.

-Información que contienen los paquetes: nombre del dispositivo, imagen del OS, tipo y modelo, dirección IP, VLAN nativa, etc.

-Ayuda a tomar decisiones de diseño y solucionar problemas en la red.

-Configuración:

.CDP global activo por defecto ("show cdp")

.Desactivar/Activar CDP globalmente ("no cdp run" / "cdp run")

.Activar CDP por interfaz ("cdp enable")

-Verificación de la Configuración: Usando "show cdp interface" nos muestra las interfaces con "cdp enable" y cuantas tienen conectados dispositivos 

-Detección de Vecinos: Usando "show cdp neighbors" podremos ver los dispositivos conectados y algo de información. Si se usa "show cdp neighbors detail" se obtendrá información más detallada, entre esta la ip.

-LLDP: Descripcción y Configuración

.Idéntico a CDP pero no es específico únicamente de dispositivos Cisco

.LLDP no depende del proveedor, por lo que es compatible con dispositivos Cisco

Se arranca con "lldp run" a nivel global o si se quiere una interfaz concreta se usa "lldp transmit" y "lldp receive" y luego de ve con "show lldp"

-LLDP: Detección de Vecinos: Con "show lldp neighbors" vemos los dispositivos conectados y de que tipo son. Con "show lldp neighbors detail" vemos más detalles incluidas las descripciones del puerto y las ip

#### Fallo de Seguridad de CDP

-Funcionamiento Normal: Por ejemplo, se tienen 3 switches conectados entre ellos todos con CDP activos y envian mensajes periodicos con información, de esta manera saben quienes son sus vecinos y la topología que tienen alrededor

-Ataque de CDP Flooding: Si un atacante se conecta y envía muchos mensajes de CDP fraudulentos con información aleatoria causando que el swithc colapse y la única forma de arreglarlo sea reiniciandolo cosa que rompería la topología

-Recopilación de información Sensible: Estos paquetes transmiten información importante y si capturan uno podrían obtener información del software cosa que permitiría descifrar la topología y alterarla por ejemplo.

#### Configuración Segura de CDP

-Mitigación de los ataques:

.Desactivación CDP por interfaz con "no cdp enable"

.Desactivación CDP globalmente con "no cdp run"

#### Carrera Proyecto de clases Día 15: 27/10/2023

### VLAN

#### Conceptos de VLAN y Tipos

Permiten dividir la red en grupos con una agrupación o estructura jerárquica lógica en lugar de una física. Esto ayuda a liberar al personal de TI de las restricciones del diseño de red y la infraestructura de cableado existente.

Facilitan el diseño, la implementación y la administración de la red.

-Tipos de enlace: 

.Enlace de acceso:

<Tráfico de una única VLAN

<Conexión con dispositivos finales

.Enlace troncal:

<Tráfico de múltiples VLAN

<Conexión entre switches o de un switch con la capa superior

-Ventajas de un diseño con VLAN:

.Dominios de difusión más pequeños

.Seguridad mejorada

.Mejora la eficiencia del departamento de TI

.Reducción de costes

.Mejor rendimiento

.Administración más simple de proyectos y aplicaciones

-Tipos de VLAN:

.VLAN predeterminada:

<Por defecto, VLAN 1

<VLAN de datos

.VLAN nativa:

<Por defecto, VLAN 1

<Mismo en ambos extremos

.VLAN de administración:

<Por defecto, VLAN 1

.VLAN de voz

#### Etiquetado Y Configuración de VLAN

-Trama ETHERNET - Campo VLAN TAG

Al inicio de las redes no se utilizaba VLAN, por lo que estas eran: Mac de destino, Mac de origen, Tipo/Longitud, Datos y FCS. Luego de las VLAN se introdujo también una etiqueta dividida en 4 campos: Tipo(0 x 8100), Pri, CFI y VID

-Etiquetado 802.1Q VLAN Nativa

.Marcos etiquetados en la VLAN nativa:

<Tráfico de la VLAN nativa no se debe etiquetar

.Marcos sin etiquetas en la VLAN nativa:

<Enlace troncal: Se asigna ID de la nativa al ID de la VLAN de puerto (PVID)

<Todo el tráfico sin etiquetar del puerto 802.1Q se envía según el valor de PVID

-Etiquetado VLAN de voz

.Puerto 1

<Conecta teléfono IP con el switch

.Puerto 2

<Puerto interno

.Puerto 3

<Conecta con el PC

-Rango de VLAN en Switches

.Rango normal VLAN

<Redes pequeñas y medianas

<VLAN ID: 1-1005

<1002-1005 reservadas

<Se guardan en vlan.dat (memoria flash)

.Rango extendido VLAN

<Proveedores de servicio y empresas globales

<VLAN ID: 1006-4094

<Se guardan en el archivo de configuración

-Creación y Borrado de VLAN

.Creación VLAN en un rango normal: "vlan vlan-id" seguido de "name vlan-name"

.Borrado de una VLAN de la memoria flash (permanente): "no vlan vlan-id"

.Borrado de toda la configuración de VLAN de la memoria flash (permanente): "delete flash:vlan.dat"

-Puertos de Acceso:

.Desde la configuración global, usar "interface interface-id" y luego "switchport mode access" para tener el puerto de acceso y por último "switchport access vlan" para establecer la VLAN que circulará por en enlace

.Si queremos quitar ese puerto de acceso: Desde la configuración global, usar "interface interface-id" y luego "no switchport access vlan"

.VLAN de voz y datos: Puerto que permite 2 VLAN: esde la configuración global, usar "interface interface-id" y después "switchport mode access" seguido de "switchport access vlan vlan-id". Luego "mls qos trust cos" y por último "switchport voice vlan vlan-id"

-Puertos Trocales (Permiten pasar múltiples VLAN): Desde la configuración global, usar "interface interface-id" y luego "switchport mode trunk" seguido de "switchport trunk native vlan vlan-id" y por último "switchport trunk allowed vlan vlan-list"

-Verificación de la configuración:

."show vlan brief"

."show vlan id vlan-id"

."show vlan name vlan-name"

."show vlan summary"

-Verificación de la configuración de VLAN de voz y datos: "show interface interface-id switchport"

#### Fallo de Seguridad de VLAN

-VLAN HOPPING (SPOOFING): Suplantación de identidad, el atacante se conecta a la red y accede a todas las VLAN sin pasar por un router. Consiste en conectarse a uno de los switch de la red y aprovechar una funciones de DTT que permite la generación automática de enlaces troncales.

-VLAN DOUBLE-TAGGING: Establece dos etiquetas a la trama ethernet. La nativa del enlace troncal y la del objetivo que se busca alcanzar. A través del enlace troncal se llega a los switchs del otro extremo, es decir, el dispositivo y puede enviar datos a este.

#### Configuración Segura de VLAN

-Mitigación de VLAN HOPPING:

.No usar la VLAN por defecto como VLAN nativa, "switchport trunk native vlan vlan-id"

.Deshabilitar la formación automática de enlaces troncales con "switchport mode access" y "switchport nonegotiate"

.Apagar los puertos no utilizados con "shutdown"

-Mitigación de VLAN DOUBLE-TAGGING:

.No usar la VLAN por defecto como VLAN nativa, "switchport trunk native vlan vlan-id"

.Apagar los puertos no utilizados con "shutdown" 

->(|Misma vaina|)

### DTP 

#### Funcionamiento de DTP

.Protocolo de capa 2 exclusivo de Cisco que se habilita de manera automática en los switches

.Maneja la negociación de enlaces troncales

.Una interfaz se puede establecer como troncal, de acceso o para negociar troncal con la interfaz vecina

.Ayuda al administrador a acelerar el proceso de configuración de la red

-Modos de Interfaz y configuración :

.nonegotiate: Detiene la negociación DTP en la interfaz ("switchport mode { trunk | access }" "switchport nonegotiate")

.access: Modo acceso de forma permanente, convierte en enlace no troncal ("switchport mode access")

.dynamic auto: Puede convertir el enlace en troncal ("switchport mode dynamic auto")

.dynamic desirable: Intenta convertir el enlace en troncal (troncal, desirable o dinámico) ("switchport mode dynamic desirable")

.trunk: Modo troncal de forma permanente, convierte en enlace troncal ("switchport mode trunk")

-Verificación de la Configuración: Con "show dtp interface fa0/1" se puede observar el tipo y si está disponible
                               
#### Fallo de seguridad de DTP

-Funcionamiento Normal: Depende del tipo de switch, si ambos switchs son 2950 será "Dynamic desirable por defecto" creando un enlace troncal y si son 2960 será "Dynamic auto por defecto" creando un enlace acceso. Si es uno de cada será una Combinación auto y desirable que cree un enlace troncal

-Envío de Mensaje DTP Fraudulento: Un atacante puede colar un mensaje DTP fraudulento inidcando la formación de un enlace troncal con el usuario a atacar y manda un mensaje cada 30 segundos para mantener la conección. Esto le da acceso a las VLAN de capa 2 gracias al enlace troncal

#### Configuración segura de DTP

-Mitigación de ataques:

.Configurar manualmente los puertos utilizados con "switchport mode access" y "switchport access vlan vlan-id" / "switchport mode trunk" y "switchport trunk allowed vlan vlan-id"

.Deshabilitar los anuncios DTP con "switchport nonegotiate "

.Apagar los puertos no utilizados con "shutdown"

.Configurar los puertos no utilizados como acceso:

<Asignar una VLAN no utilizada por los usuarios o una VLAN no existente con "switchport mode access" y "switchport access vlan vlan-id"

### VTP

#### Funcionamiento de VTP

.Protocolo de capa 2 usado para administrar y configurar VLANs en los dispositivos Cisco

.Simplifica y centraliza la administración de las VLANs de una red, reduciendo así el número de fallos de configuración

.Se distinguen 3 modos de operación VTP: servidor, cliente y transparente

.VTP sólo aprende VLAN de rango normal (1-1005) almacenadas en el fichero vlan.dat

-Modos de Operación de VTP:

.Servidor (modo por defecto):

<Puede crear, borrar y modificar VLANs del dominio

<Todas las VLANs configuradas en el servidor se anuncian

.Cliente:

<No puede crear, borrar ni modificar VLANs del dominio

<Sincroniza su información con la que recibe de los anuncios del servidor

.Transparente:

<No procesa anuncios VTP, simplemente los reenvía

-Anuncios VTP:

.Anuncios de resumen:

<Sincronización de la información de las VLAN dentro del dominio

.Anuncios de subconjunto:

<Informa de cambios en alguna VLAN

.Publicación de solicitud:

<Se envía cuando un cliente necesita actualizar la configuración

-Configuración:

.Definir en el switch con rol de servidor las VLANs que se desea anunciar

.Definir como troncales los puertos que conectan los switches VTP

<Versión de VTP deseada con "vtp version {1 | 2 | 3}"

<Modo VTP del switch con "vtp mode {server | client | transparent}"

<Dominio VTP con "vtp domain domain_name"

<Contraseña VTP con "vtp password password"

-Verificación de la Configuración:

Usando "sh vtp status" puedes ver que versión está en uso junto a la información de los VLAN

#### Fallo de Seguridad de VTP

-Funcionamiento Normal: Un servidor con dos VLAN definida, dos enlaces troncales que conectan con los otros 2 switches y se propaga la información de los VLAN a los otros switches

-Borrado VLANS Legítimas: Si un atacante de conectase a un enlace troncal de nuestro servidor y enviase un anuncio con un número de revisión superior al que se envía actualmente a la red. Si en este anuncio indica que quiere borrar las VLAN 10 y 20 el servidor obedecería provocando que los servidores asociados quedasen inoperativos, cosa que deberá ser arragleda manualmente por el usuario.

#### Configuración segura de VTP 

-No usar VTP

.Para deshabilitar VTP en el switch debe configurarse en modo transparente ("vtp mode transparent")

-Autenticación

.Todos los switches del dominio deben usar la misma contraseña ("vtp password password")

-Apagar los puertos no utilizados con "shutdown"

-Usar versión 3  ("vtp version 3")

.Añade el concepto de Primary Server

->(|En resumen del curso: Como funcionan ARP/STP/CDP/VLAN/DTP/VTP, sus fallos de seguridad y su configuración segura, todo siguiendo un mismo orden monótono en cada uno|)

#### Carrera Proyecto de clases Día 16: 28/10/2023

## "Curso de Seguridad Y Red en el Ámbito Corporativo: Capa 3 y 7 del modelo OSI"

● Capa 3

● Rutas estáticas

● RIP

● OSPF

● HSRP

● Capa 7

● DHCP

● SNMP

##

->|(La introducción menos por el nuevo indice es la misma que el curso anterior, la misma profesora que antes también, almenos ya se como reutiliza y como va a ir este curso)|

### Capa 3

-Operaciones básicas de la capa 3:

.Direccionamiento de dispositivos finales

.Encapsulación

.Enrutamiento

.Desencapsulación

-Características de IP:

.Sin conexión:

<El emisor no sabe si el receptor está presente

<El emisor no sabe si el paquete llegó

<El emisor no sabe si el receptor puede leer el paquete

<El receptor no sabe cuando llegará

.Mejor esfuerzo o poco confiable:

<Los paquetes se enrutan velozmente a través de la red

<Algunos paquetes se pueden perder por el camino

.Medios independientes:

<El paquete se envía por medios independientes uno del otro. Por ejemplo: Un usuario envía un paquete IP por un ethernet de cobre a switch, desde este va a otro switch por un serial de cobre, desde ahí a un tercer switch por fibra óptica, de ahí a un ruter a través de un ethernet de cobre y por último vía inalámbrica hasta el receptor.

-Paquete IPV4

.El primer Paquete ip que se diseñó. Tiene los siguientes campos importantes:

<Versión

<Servicios diferenciados

<Suma de comprobación del encabezado

<Dirección ip de origen

<Dirección ip de Destino

<Tiempo de duración

<Protocolo

-Limitaciones IPV4

.Agotamiento de las direcciones IPv4

<Solución temporal: NAT

.Falta de conectividad de extremo a extremo

.Mayor complejidad de la red:

<Solución óptima: Transición a IPv6

-NAT: Traducción de direcciones

.Las direcciones Privadas no se pueden enrutar a través de internet.

.Rango de direcciones privadas:

<10.0.0.0 - 10.255.255.255

<172.16.0.0 - 172.31.255.255

<192.168.0.0 - 192.168.255.255

-Paquete IPV6:

.Presenta una serie de ventajas respecto a IPV4:

<Tiene un mayor espacio de direccionamiento ya que usa 128 bits

<No utiliza NAT

<Mejor manejo de los paquetes

.Campos:

<Versión

<Clase de tráfico

<Etiqueta de flujo

<Longitud del contenido

<Encabezado siguiente

<Límite de saltos

<Dirección ip de origen

<Dirección ip de Destino

-Coexistencia IPV4 E IPV6:

.Dual-stack: Dispositivos que trabajan en ámbas versiones.

.Tunelización: Intento de conectar dos redes IPV6 a traves de una red IPV4

.Traducción: A través de un Router NAT64, se traducen los datos de una red IPV6 e IPV4 cuando se mandan datos de una a otra

#### Tipos de Enrutamiento

-Elemento principal de capa 3 -> Router:

.Determina qué interfaz debe usar para el reenvío eligiendo la mejor ruta.

-Estático o Dinámico:
 
                                            Routing estático           /          Routing dinámico

    Complejidad de configuración:        Dependiente del tamaño        /        Independiente del tamaño

    Cambios de topología:                 Requiere intervención        /         Adaptación automática

    Escalabilidad:                                NO                   /                 SI

    Seguridad:                                 Inherente               /           Debe configurarse

    Uso de recursos:                    Sin recursos adicionales       /        CPU, memoria, BW enlaces

    Predictibilidad de ruta:           Definido por administrador      /        Depende de la topología

->(|He intendado hacer que pareciera una tabla y sin querer descubrí que podía hacer esto en github jaja|)

-Conceptos de Routing Dinámico:

.Estructura de datos:

<Tablas o bases de datos

.Mensajes del protocolo de routing:

<Intercambia información con vecinos

.Algoritmo:

<Determina el mejor camino

-Mejor Camino:

.Protocolo de enrutamiento:    

<RIP (Routing Information Protocol):

■ “Recuento de saltos”

■ Cada router un salto

■ Límite de saltos: 15

<OSPF (Open Shortest Path First):

■ “Coste”

■ BW acumulado origen-destino

■ A mayor velocidad, menor coste

<EIGRP (Enhanced Interior Gateway Routing Protocol):

■ BW más lento y retardos anormales

■ Podría incluir carga y fiabilidad

-Balanceo de Carga: En caso de tener 2 rutas, si ambas tienen la misma prioridad, se puede hacer un balanceo envíando la información una vez a través de una y una vez a través de otra

#### Tabla de enrutamiento y elección de la mejor ruta

-Tabla de enrutamiento: Usando el comando "show ip route" obtendremos la información

.S - Ruta estática

.* - Ruta predeterminada

.O - Ruta dinámica (OSPF)

.C - Red conectada directamente

.L - Interfaz del router

-Principios de la tabla de Routing:

.Cada router toma su decisión por sí solo

.Las tablas de enrutamiento no coinciden necesariamente

.La información de enrutamiento no proporciona enrutamiento de retorno al secundario

-Entradas de la tabla de Routing:

.La primera identifica de que manera el router identífico la red

.La segunda indentifica la red de destino

.La trercera identifica la distancia administrativa del origen de la ruta.

.La cuarta identifica la métrica para llegar a la red remota

.La quinta identifica la dirección IP del siguiente salto para llegar a la red remota

.La sexta identifica el tiempo transcurrido desde la última comunicación con la ruta

.La séptima identifica la interfáz de salida en el router para llegar a la red de destino

-Tipos de ruta: 

.Redes conectadas directamente:

<La red se indica con una C seguido de la dirección IP y la máscara

<La interfaz se indica con una L y un prefijo /32 (IPv4) o /128 (IPv6)

.Rutas estáticas:

<ip route 10.0.4.0 255.255.255.0 10.0.3.2

<ipv6 route 2001:db8:acad:4::/64 2001:db8:acad:3::2

.Rutas dinámicas:

<Las redes no se configuran manualmente, se descubren a través de otros routers.

.Ruta predeterminada:

<Se usa en ausencia de otra posible ruta que se ajuste mejor

<Reduce el número de rutas en la tabla

<Tienen una entrada de ruta 0.0.0.0/0 (IPV4) o ::/0 (IPV6)

-Mejor ruta:

.La mejor ruta se conoce también como la de coincidencia más larga

#### Reenvío de paquetes

-Proceso de decisión de reenvío:

.Reenvío a un dispositivo en una red conectada directamente

.Reenvío a un router de siguiente salto

<Red Ethernet: Resolución de direcciones MAC

<Red P2P: No hay direcciones MAC en interfaces serial

.No hay ninguna coincidencia en la tabla de routing

<Descarta el paquete

-Mecanísmos de reenvío:

.Conmutación de procesos (Process Switching): Bastante antiguo y casi no se usa, Cada paquete que llega se pasa al plano de control y la CPU se encarga de calcular la mejor ruta y enviarlo.

.Conmutación rápida (Fast Switching): Mejora el rendimiento aunque también es antiguo y se usa poco, Solo el primer paquete que llega se pasa al plano de control y el resto de paquetes si van al mismo destino pasarán por el caché del envío pasando directamente.

.CEF (Cisco Express Forwarding): La más recomendada, En ningún momento se pasa por el plano de control si no que toda la información va directa por el plano de datos, donde se establece una tabla FIB y un tabla de adyacencia que muestra las opciones para llegar a los distintos sitios de la red.

### Rutas Estáticas

#### Tipos de rutas Estáticas

-Definición de la ruta estática

.Ruta del siguiente salto

<Opción recomendada en interfaces que requieren capa 2 (Ethernet)

.Ruta conectada directamente

.Ruta completamente especificada

"ip route network-address subnet-mask { ip-address | exit-intf [ip-address]} [distance]"

"ipv6 unicast-routing" seguido de "ipv6 route ipv6-prefix/prefix-length {ipv6-address | exit-intf [ip-address]} [distance]

-Ruta estática estándar: Indica la forma de llegar a una red concreta

.Para IPV4:

<(config)# ip route 192.168.1.0 255.255.255.0 172.16.2.2

<(config)# ip route 192.168.1.0 255.255.255.0 s0/1/0

<(config)# ip route 192.168.1.0 255.255.255.0 s0/1/0 172.16.2.2

.Para IPV6:

<(config)# ipv6 route 2001:db8:cafe:1::/64 2001:db8:acad:2::2

<(config)# ipv6 route 2001:db8:cafe:1::/64 s0/1/0

<(config)# ipv6 route 2001:db8:cafe:1::/64 s0/1/0 fe80::2

-Ruta Estática Predeterminada: Es la que se usa cuando no hay más opciones. Se usa para cualquier red no conectada directamente.

.Para IPV4:

<(config)# ipv6 route 2001:db8:cafe:1::/64 2001:db8:acad:2::2

<(config)# ipv6 route 2001:db8:cafe:1::/64 s0/1/0

<R1(config)# ipv6 route 2001:db8:cafe:1::/64 s0/1/0 fe80::2

.Para IPV6:

<(config)# ipv6 route ::/0 2001:db8:acad:2::2

<(config)# ipv6 route ::/0 s0/0/0

<(config)# ipv6 route ::/0 s0/0/0 fe80::2 

-Ruta Estática Flotante: Si la ruta preferida fallase se tendría otra como Backup

.Distancia administrativa por defecto: 

<Conectado directamente: 0

<Estática: 1

<BGP (externo): 20

<EIGRP: 90

<OSPF: 110

<RIP: 120

.Para IPV4:

<(config)# ip route 0.0.0.0 0.0.0.0 172.16.2.2

<(config)# ip route 0.0.0.0 0.0.0.0 172.16.3.2 5

.Para IPV6:

<(config)# ipv6 route ::/0 2001:db8:acad:2::2

<(config)# ipv6 route ::/0 2001:db8:cafe:2::2 5

-Ruta Estática Resumida: Se pueden representar las siguientes 4 redes usando solo la primera:

.(config)# ip route 172.20.0.0 255.255.0.0 s0/0/0

.(config)# ip route 172.21.0.0 255.255.0.0 s0/0/0

.(config)# ip route 172.22.0.0 255.255.0.0 s0/0/0

.(config)# ip route 172.23.0.0 255.255.0.0 s0/0/0

-Verificación de las Rutas Estáticas:

."show ip route static" 

."show ip route ip_Verificar"

."show running-config | section ip route"

-Ventajas y Desventajas:

                         Ventajas                            /                         Desventajas
          Fácil de implementar en redes pequeñas             /                      Baja escalabilidad
                        Muy seguro                           /              Mayor complejidad en redes grandes
       La ruta hacia el destino siempre es la misma          /           Requiere intervención manual, no recalcula
           No se necesitan recursos adicionales              /

### RIP

#### Funcionamiento de RIP

.Protocolo de encaminamiento dinámico interior

.Puerto 520 de UDP

.Usa el número de saltos como métrica

.Para determinar el camino más corto utiliza el algoritmo de Bellman Ford

.Número máximo de saltos: 15

.Emplea la regla de horizonte dividido y el envenenamiento de rutas

.Actualmente existen 3 versiones: RIPv1, RIPv2 y RIPng (RIP para IPv6)

-Comparativa RIPv1 y RIPv2:

                          RIPv1                         /                    RIPv2
                 Métrica: número de saltos              /          Métrica: número de saltos
                Número límite de saltos: 15             /         Número límite de saltos: 15
               Distancia administrativa: 120            /        Distancia administrativa: 120
                        Con clase                       /                Sin clase
                  No soporta VLSM y CIDR                /            Soporta VLSM y CIDR
         Transmisión broadcast (255.255.255.255)        /      Transmisión multicast (224.0.0.9)
                 No soporta autenticación               /         Soporta autenticación (MD5)

-Modos de Funcionamiento y Mensajes:

.Modos de funcionamiento de las interfaces:

<Activo: Normalmente solo los router operan en este modo

<Pasivo: Normalmente conecta con usuarios finales

.Tipos de mensaje (sólo en interfaces activas):

<Request: Solicita parte o toda la tabla de rutas

<Reply:

■ Respuesta a un request

■ Actualización periódica

■ Actualización por cambio en topología

-Tipos de Temporizadores:

.Temporizador periódico (update timer): 30 segundos

.Temporizador de caducidad (invalid timer): 180 segundos

.Temporizador de purga (flush timer): 240 segundos

.Temporizador de retención (holddown timer): 180 segundos

-Configuración:

.Configuración RIPv2: "router rip" seguido de "version 2" seguido de "no auto-summary" seguido de "network network-address"

.Redistribución de rutas predeterminadas: "ip route 0.0.0.0 0.0.0.0 [next-hop-address | exit-intf]" seguido de "redistribute static"

.Interfaz pasiva (usuario final): "passive-interface interface-id"

-Verificación de la configuración:

.Comprobar que soporta VLSM y CIDR: usando "show ip route"

-Ventajas y desventajas:

                            Ventajas                      /                                       Desventajas
                 Fácil de entender y configurar           /          Únicamente tiene en cuenta el número de saltos, descartando otros criterios
              No requiere actualizaciones manuales        /                           Límite máximo en el número de saltos
              Soportado por la mayoría de fabricantes     /                                Tiempo de convergencia largo

#### Fallo de Seguridad de RIP

-Funcionamiento Normal: Tabla donde se registra la información aprendida de las redes, si un usuario intenta comunicarse con otro, envía un mensaje a través de la puerta de enlace del router, comprobaría la mejor ruta y se manda en tráfico hasta el router del usuario a recibir donde se verifica que la red esté conectada al usuario y se envía el mensaje.

-RIP Poisining: Si un atacante envía un mensaje RIP fraudulento a la red y no tenemos la interfaz establecida como pasiva, el atacante estaría podiendo observar que tipo de información y tablas de router tenemos configurados así como los saltos de la red. El router lo considera válido y actualiza la tabla de rutas. Si el usuario intentase comunicarse con otro usando la tabla de rutas alteradas, al llegar al primer router calcularía que la mejor ruta es de solo un salto, por lo que volvería al switch pero esta vez al atacante, el cual con una conexión independiente le envía la información al receptor original si es que no la elimina. 

#### CONFIGURACIÓN SEGURA DE RIP

-Mitigación RIP Poisoning:

.Usar la versión 2 del protocolo con "version 2"

.Definir interfaces pasivas con "passive-interface interface-id"

.Usar redistribute connected con "redistribute connected"

.Usar autenticación: "ip rip authentication mode md5" seguido de "ip rip authentication key-chain key-chain-name"

.Definir las rutas de formas estáticas con "ip route network-address subnet-mask { ip-address | exit-intf [ip-address]} [distance]"

.Usar ACLs (por defecto: deny implícito):

<Standard: Permite o deniega por origen.

<Extendida: Permite o deniega por origen y destino además de por aplicación

#### Carrera Proyecto de clases Día 17: 29/10/2023

### OSPF

#### Conceptos Clave de OSPF

.Protocolo de encaminamiento dinámico interior

.Se encapsula sobre el protocolo IP (campo protocolo: 89)

.Se tiene en cuenta el ancho de banda para calcular la métrica

.Protocolo de estado de enlace y el concepto de áreas

.Existen 2 versiones: OSPFv2 (OSPF para IPv4) y OSPFv3 (OSPF para IPv6)

.Componentes de OSPF:

<Mensajes de protocolo de enrutamiento

<Estructura de datos

<Algoritmo: Dijkstra

-Tipos de Paquetes:

            Tipo         /              Nombre del paquete                    /                                  Descripción
             1           /                     Hello                          /                     Descubre vecinos y construye adyacencias
             2           /       Descriptores de bases de datos (DBD)         /                 Controla la sincronización de BBDD entre routers
             3           /       Solicitud de estado de enlace (LSR)          /       Solicita registros específicos del estado de enlace de router a router
             4           /      Actualización de estado de enlace (LSU)       /         Envía los registros de estado de enlace específicamente solicitados
             5           /    Acuse de recibo de estado de enlace (LAck)      /                          Confirma la recepción de LSU

-Estructura de Datos:

              Base de datos                   /                           Tabla                       /                                               Descripción
       Base de datos de adyacencia            /                     Tabla de vecinos                  /               Routers vecinos a los que se ha conectado un router y Única para cada router
    Base de datos de estado de enlace         /                    Tabla de topología                 /         Muestra información sobre la topología de la red e Idéntica para todos los routers del área
         Base de datos de reenvío             /                   Tabla de enrutamiento               /       Lista de rutas generada cuando se ejecuta el algoritmo de estado de enlace. Única para cada router

-Algoritmo de DIJKSTRA ->(|Algoritmo de que? Como carajos se lee eso?|)->: Se tienen 5 nodos y la distancia de uno a otro. Nos situamos en un nodo y de primeras se consideran el resto inalcanzables y uno a uno se comprueba la distancia real. Este proceso se repite con todos y cada uno de los nodos.

-Área única: Todos los routers están dentro de una misma área

-Área multitarea: Se implementan varias áreas y siempre se debe tener el área 0 como área troncal. La ventaja es que reduce mucho la sobrecarga de la red.

-Tipos de routers:

.Designated Router (DR)

.Backup Designated Router (BDR)

.Internal Router (IR)

.Area Border Router (ABR)

.Backbone Router (BR)

.Autonomous System Boundary Router (ASBR)

#### Estados de funcionamiento de OSPF

-Funcionamiento del estado de enlace:

1. Establecimiento de adyacencias de vecinos

2. Intercambio de anuncios de estado de enlace

3. Crear la base de datos de estados de vínculo

4. Ejecutar el algoritmo SPF (Dijkstra)

5. Elección de la mejor ruta

-Tipos de estados:

.Down: Ningún paquete Hello recibido. El router envía paquetes Hello

.Init: Se reciben paquetes Hello del vecino (contienen router ID)

.Two-Way: Comunicación bidireccional entre los dos routers. Elección de DR y BDR

.ExStart: Se decide quien inicia el intercambio de paquetes DBD y el nº de secuencia

.Exchange: Los routers intercambian paquetes DBD

.Loading: Se obtiene información adicional de la ruta. (Paso opcional)

.Full: Base de datos de estado de vínculo completamente sincronizada

-Establecimiento de Adyacencia:

1. Estado Down a estado Init

2. Estado Init

3. Estado Two-Way

4. Elección DR y BDR

-Sincronización de bases de datos:

1. Decidir el router que envía primero

2. Intercambio DBD

3. Enviar un LSR

-Importancia de Elegir un DR y BDR:

.¿Por qué se necesita elegir un DR y un BDR?:

<Creación de muchas adyacencias: n * ( n-1 ) / 2

<Saturación intensa con mensajes OSPF

.Cómo se eligen el DR y el BDR?:

<Prioridad más alta (0 a 255)

<ID más alta

■ Router ID más alto

■ IPv4 de loopback más alta

■ Dirección IPv4 activa más alta

-Fallo y Recuperación del DR: Luego de recibir información periódica del DR, se busca un BDR para que asuma el rol.

#### Funcionamiento de OSPF (Área Única)

-Prioridad y router ID:

.Configuración OSPFv2 con "router ospf process-id"

.Configuración prioridad: después de "interface interface-id utilizar "ip ospf priority priority-value"

.Configuración router-ID con "router-id rid"

.Configuración interfaz loopback: usar "interface Loopback 1" y luego "ip address ip-address mask

-Configuración de las redes:

.Comando network: "network network-address wildcard-mask area area-id"

.Comando ip ospf: luego de "interface interface-id" usar "ip ospf process-id area area-id"

-Tipos de Redes OSPF:

.Broadcast: "show ip ospf interface GigabitEthernet 0/0/0"

.Punto a punto: tras "interface interface-id" y usar "ip ospf network point-to-point"

-Configuración adicional:

.Interfaz pasiva (usuario final): "passive-interface interface-id"

.Redistribución de rutas predeterminadas: "ip route 0.0.0.0 0.0.0.0 [next-hop-address | exit-intf]" seguido de "default-information originate"

-Verificación de los Vecinos OSPF: "default-information originate"

.Posibles estados:

<FULL/DROTHER

<FULL/DR

<FULL/BDR

<2-WAY/DROTHER

-Verificación de la configuración con "show ip protocols"

#### Fallo de seguridad de OSPF

-Funcionamiento Normal: La información fluye por los diferentes enlaces de la red con los anuncios OSPF correspondientes y si no se tiene configurada una interfaz pasiva, los paquetes bajarian hasta los enlaces de los usuarios.

-Robo de la identidad de DR: El atacante manda un paquete "hello" fraudulento haciendo creer a la red que es un router legítimo, de esta forma puede llegar a engañar a el resto de la topología y hacerles creer que es el DR por lo que toda la información pasará por el y tendrá control absoluto de la red

-Otros posibles ataques:

.Denegación de servicio

<Envío de una cantidad elevada de LSA fraudulentos hasta saturar la red

<Desviación del tráfico y generación de cuellos de botella

.Remote False Adjacency

<Se anuncia un router “fantasma”. Se genera un “black hole”

.Disguised LSA

<Suplantación de un LSA legítimo mediante la inundación de la red con LSA fraudulentos en nombre del router víctima

#### Configuración Segura de OSPF

-Mitigación de los ataques:

.Usar autenticación MD5:

<Configuración del protocolo OSPF usando "area area-id authentication message-digest"

<Configuración en cada interfaz con "ip ospf message-digest-key key-number md5 password"

.Definir interfaces pasivas: "passive-interface interface-id"

.Números de secuencia aleatorios:

<Evita ataques de tipo LSA Disguised

.Habilitar TTL Security:

<Evita ataques de tipo Remote False Adjacency con "ttl-security all-interfaces [ hops hop-count ]"

### HSRP

-Opciones de FHRP para IPV4:

.HSRP: Propiedad de Cisco. Permite la conmutación por error de forma transparente de un dispositivo IPv4 de primer salto.

.VRRPv2: Protocolo estándar abierto. Permite que varios routers en un enlace multiacceso utilicen la misma dirección IPv4 virtual.

.GLBP: Propiedad de Cisco. Similar a HSRP y VRRPv2, mientras que también permite el balanceo de carga entre los routers.

-Opciones de FHRP para IPV6:

.HSRP para IPv6: Proporciona la misma funcionalidad que HSRP pero en un entorno IPv6. Tiene una MAC virtual derivada del número de grupo HSRP y una dirección link-local IPv6 virtual derivada de la MAC virtual

.VRRPv3: Proporciona la capacidad de admitir direcciones IPv4 e IPv6. Más escalable que VRRPv2

.GLBP para IPv6: Proporciona la misma funcionalidad que GLBP pero en un entorno IPv6. Ofrece un único router IPv6 virtual de primer salto mientras reparte la carga entre los diferentes routers físicos

#### Funcionamiento de HSRP

.Protocolo de capa 3 propiedad de Cisco

.Uso de puertas de enlace redundantes (conmutación por fallo transparente)

.Definición de MAC y dirección IP virtuales

.Se forma un grupo HSRP compuesto por un router activo y un router de respaldo (elimina SPOF)

.Comunicación mediante la dirección multicast 224.0.0.2 (versión 1) o 224.0.0.102 (versión 2) y el puerto UDP 1985

-Prioridad y Preferencia:

.Prioridad:

<Valor entre 0 y 255. Por defecto: 100

<Se elige como router activo el que tenga mayor prioridad

<Si las prioridades iguales, se elige aquel con la dirección IPv4 más alta

.Preferencia:

<Fuerza un nuevo proceso de elección de HSRP

<Si se habilita, el router con la prioridad más alta asume el rol de activo

<Si la prioridad es igual en los routers, no se modifica el rol de activo

-Estados:

.Inicial: El router comienza el proceso HSRP

.Aprendizaje: El router espera para escuchar al router activo. No hay IP virtual

.Escucha: El router no es ni activo ni de respaldo, pero escucha los mensajes de estos dos. Se conoce la IP virtual

.Hablar: El router participa en la elección del router activo y el de respaldo. Envía mensajes de saludo periódicos (cada 3 segundos)

.Standby: El router se convierte en el siguiente router activo (espera 10 segundos)

.Activo: El router gana la elección del rol de activo

-Configuración:

.Configuración router activo: tras "interface interface-id" se usa "standby version 2", luego "standby 1 ip virtual-ip-address" seguido de "standby 1 priority priority-value" y por último "standby 1 preempt".

.Configuración router de respaldo: tras "interface interface-id" se usa "standby version 2" y luego "standby 1 ip virtual-ip-address".

-Verificación de la Configuración:

.Comprobar la configuración del grupo HSRP con "show standby"

#### Fallo de Seguridad de HSRP

-Funcionamiento Normal: Un router activo, uno en stand by, una ip virtual a la que responden ambos y cuando el usuario se quiera comunicar con el exterior envía la información a la ip virtual y el router que se encuentre activo se encargará de enrutar la info.

-Robo de Router Activo:

.Man in the middle:

<Los datos transmitidos por ambos extremos son interceptados por el atacante

<La principal finalidad es leer , modificar o borrar la información enviada por los usuarios

.Denegación de servicio (DoS)

<Provoca que el acceso a un recurso o dispositivo no sea posible

.Degradación de servicio

<Envío intermitente de paquetes fraudulentos generando períodos de corte

#### Configuración segura de HSRP

-Mitigación de los ataques:

.Usar autenticación MD5 ("standby 1 authentication md5 key-chain key-chain-name")

.Poner la máxima prioridad al router activo con "standby 1 priority 255"

.Usar ACLs (por defecto: deny implícito):

<Standard: Permite o deniega por origen

<Extendida: Permite o deniega por origen y destino, además de por aplicación

.Implementar HSRP con IPSec

<IPSec es un protocolo encargado de que las conexiones sobre IP se cifren y se autentiquen para una mayor seguridad.

<Cumple los 3 criterios principales: confidencialidad, integridad y autenticación 

### Introducción a la Capa 7

#### Capa 7 (modelo OSI)

-La capa de aplicación:

.Capa más cercana al usuario final

.Interfaz para la comunicación con el usuario

.Ejemplos de aplicaciones:

<Terminal virtual

<Gestión de ficheros

<Servicio de correo

<Servicio de directorio

-La capa de Aplicación en TCP/IP:

.Aplicación:

<Interfaz entre la aplicación del usuario y la red

.Presentación:

<Tratamiento de los datos

.Sesión:

<Crea y mantiene diálogos

-Modelo Cliente/Servidor:

.Cliente: Solicita información

.Servidor: Provee información

.Puede requerir autenticación

.Red centralizada (Servidor en el centro)

.Problema SPOF (Single Point Of Failure)

-Modelo P2P:

.Consta de dos partes:

<Red P2P y Aplicaciones P2P

.Red P2P:

<Cada PC es servidor y cliente

<Compartir recursos (conexión a Internet, juegos…)

.Aplicación P2P:

<Permite que cada dispositivo actúe como cliente y servidor

Protocolos de la capa de la aplicación:

.Nombre de dominio: DNS

.Configuración de dispositivos: DHCP

.Email: SMTP, POP3, IMAP

.Transferencia de ficheros: FTP, TFTP

.Web: HTTP, HTTPS

### DHCP

#### Funcionamiento de DNS

.Sistema de nombres de dominio (DNS)

.Traduce nombres de dominios web a la dirección IP del servidor en el que se aloja la página web

.Se encapsula sobre el puerto 53 tanto de UDP como TCP

.Sigue una arquitectura de cliente/servidor

.Utiliza una base de datos distribuida y jerárquica

-Jerarquía DNS: "DNS-Root zone"(<<.>>) -> "1º level zone"(.com / .edu / .gov) -> "2º level zone"(google.com) -> "3º level zone"(drive.google.com / mail.google.com)

-Funcionamiento DNS:

.La primera consulta se hace al servidor DNS local del sistema operativo. Se comprueba la memoria caché

.En caso de no encontrarse, la consulta se envía al servidor DNS del ISP

-Comando NSLOOKUP: Al usar este comando en el cmd nos muestra en primer lugar el servidor DNS al que se harán las consultas y da la opción de escribir al terminar.

#### Funcionamiento de DHCP

.Protocolo de red de tipo cliente/servidor

.Se encarga de la asignación dinámica de direcciones IP y otros parámetros de configuración de red

.Se encapsula sobre el puerto 67 (servidor) y 68 (cliente) de UDP

.Un servidor DHCP es escalable y relativamente fácil de administrar

.Las direcciones IP se asignan un tiempo configurable (período de concesión)

.DHCPv6 proporciona servicios similares pero sin compartir el gateway

-Funcionamiento: Un cliente DHCPv4 desea solicitar una dirección con "DHCPDISCOVER Difusion" y contacta con el servido DHCPv4 el cual le responde con una oferta de dirección usando "CHCPOFFER Unidifusion / Difusion". El cliente acepta la oferta de la dirección con "DHCPREQUEST Difusion" y el servidor hace un acuse de recivo de la aceptación con "DHCPACK Unidifusion"

-Renovar una dirección Temporal: El cliente envía una petición para renovar al servidor usando "DHCPREQUEST Unidifusion" y el servidor hace un acuse de recivo de la aceptación con "DHCPACK Unidifusion"

-Configuración:

.Exclusión de direcciones IP con "ip dhcp excluded-address ip-address"

.Configuración pool DHCP: "ip dhcp pool pool-name"

<Red: "network network-address mask" 

<Puerta de enlace: "default-router gateway-address"

<Servidor DNS: "dns-server dns-server-address"

<Nombre de dominio: "domain-name domain"

<Duración de la concesión: lease {days [hours [ minutes]] | infinite}

.Desactivar y activar DHCP: "no service dhcp"  /  "service dhcp"

-Verificación de la Configuración:

."show running-config | section dhcp" muestra la información relativa a shcp, es decir, los comados que fuimos incluyendo

."show ip dhcp binding" muetsra la relación entre la dirección ip y la dirección MAC que tenemos

-Verificación del cliente DHCP: "ipconfig /all": Podemos ver el DNS asignado y su dirección ip. También otros servidores DNS.

#### Fallo de Seguridad de DHCP

-Funcionamiento Normal: El cliente envía un mensaje a través de la red de DISCOVERY y el servidor será encargado de responder con un OFFER donde se indicaran los parámetros correspondientes, si el cliente está de acuerdo enviará un REQUEST el cual es servidor contestará con un ACK

-Posibles ataques:

.DHCP Starvation:

<Agota todas las direcciones de las que dispone el servidor DHCP

.DHCP Spoofing:

<El atacante escucha las solicitudes DHCP de los clientes y responde antes que el servidor legítimo

.DHCP Ack Injection:

<Mejora de DHCP Spoofing. Se deja que el servidor legítimo proporcione las direcciones antes de enviar el mensaje fraudulento

#### Configuración Segura de DHCP

-Mitigación de Ataque DHCP:

.Usar ACLs (por defecto: deny implícito):

<Standard: Permite o deniega por origen

<Extendida: Permite o deniega por origen y destino además de por aplicación

.Implementar DHCP Snooping:

<Configuración DHCP Snooping con "ip dhcp snooping" / " ip dhcp snooping vlan vlan-number"

<Puertos confiables con " ip dhcp snooping trust"

<Puertos no confiables con "ip dhcp snooping limit rate rate"

.Usar port-security:

<Es necesario que el puerto se configure como acceso o troncal:

"switchport port-security" -> "switchport port-security number-max-MACs" -> "switchport port-security violation { protect | restrict | shutdown }" -> "switchport port-security mac-address { mac address | sticky }"

.Apagar los puertos no utilizados con "shutdown"

### SNMP

#### Funcionamiento de SNMP

.Protocolo de la capa de aplicación que facilita el intercambio de información de administración de los dispositivos de red

.Se encapsula sobre el puerto 161 y el 162 (traps) de UDP

.Se distinguen 4 componentes principales: administrador SNMP (NMS), agente SNMP, dispositivos y recursos administrados por SNMP y MIB

.Arquitectura simple basada en el modelo cliente/servidor

.Existen 3 versiones del protocolo: SNMPv1, SNMPv2c y SNMPv3

-Tipos de mensajes SNMP:

.get-request: El agente obtiene el valor de la variable de MIB solicitada y responde al administrador de red con dicho valor

.get-next-request: Se realiza una búsqueda secuencial para encontrar la variable necesaria dentro de una tabla

.get-bulk-request: Recupera grandes bloques de datos, como varias filas en una tabla (SNMPv2)

.get-response: Respuesta del agente con los datos solicitados por el administrador de red

.set-request: El agente de SNMP cambia el valor de la variable de MIB al valor especificado por el administrador de red

.trap: Mensajes enviados por los agentes ante un evento previamente especificado

-Versiones:

.SNMPv1 y v2c: Usan coincidencia de cadena de comunidad para autenticación

.SNMPv3:

<noAuthNoPriv: Sin autenticación (solo nombre de usuario sin contraseña) ni privacidad

<authNoPriv: Con autenticación (contraseña con MD5 o SHA) pero sin privacidad

<authPriv: Con autenticación (contraseña con MD5 o SHA) y privacidad (cifrado DES o AES)

                           SNMPv1     /     SNMPv2c     /          SNMPv3
    Autenticación        Comunidad    /    Comunidad    /     Usuario, MD5 o SHA
       Cifrado               No       /       No        /         DES o AES

-Configuración SNMPv2c:

.Cadena de comunidad de sólo lectura:

<No permite cambiar la configuración del dispositivo ("snmp-server community password ro").

.Cadena de comunidad de lectura y escritura:

<Permite modificar la configuración del dispositivo ("snmp-server community password rw").

-Sondeo: Extraer de manera periodica información de un dispositivo con "snmpget -v2c -c community DireccionIP NumeroDeOID" 

#### Fallo de Seguridad de SNMP

-Funcionamiento Normal: Un usuario envía una solicitud a un servidor y este responde con la respuesta

-Obtención de Acceso Ilegítimo:

.Formas de acceso a la información de gestión:

<Uso de comunidades por defecto

<Captura de paquetes con sniffer (man in the middle)

-SNMP RECONNAISSANCE:

.Obtención de información:

<Información de sistema (nombre de host, descripción, SO, dirección IP…)

<Información de red (modelo, fabricante, datos de ruteo, interfaces…)

#### Configuración Segura de SNMP

-Mitigación de los Ataques:

.Desactivar de dispositivos que no lo precisen con "no snmp-server community password ro" y "no snmp-server community password rw"

.Elegir una comunidad segura:

<Cambiar las comunidades por defecto, usar pautas de contraseñas fuertes

.Configurar la versión 3 de SNMP:

<Se introduce a partir de Cisco IOS Software version 12.0

.Utilizar SNMP view: "snmp-server view view-name oid {included | excluded}"

.Establecer las comunidades con ACLs: "access-list acl-id permit ip-address" y "snmp-server community password {ro | rw} acl-id"

#### Carrera Proyecto de clases Día 18: 31/10/2023

## "Curso de Triage informático"

● SECCIÓN 1: Conceptos y Definiciones

 ○ CLASE1: Malware: Definición, Características y tipos.

 ○ CLASE2: Procesos y Conexiones: Identificación, puertos y protocolos.

 ○ CLASE3: Hacker, Cracker

 ○ CLASE4: C&C, direccionamiento.

● SECCIÓN 2: Búsqueda de Malware

 ○ CLASE1: Mito y Realidad.

 ○ CLASE2: Metadatos, Firma y Descripción.

 ○ CLASE3: Herramientas de Análisis (Local – Online), Heurístico.

● SECCIÓN 3: Análisis de Ejecutables

 ○ CLASE1: Paquetes y Rutas

 ○ CLASE2: Uso de Recursos

 ○ CLASE3: Establecimiento de conexiones

● SECCIÓN 4: Emails, phishing.

 ○ CLASE: Email Sospechoso y Archivos Infectados

####

### Conceptos y Definiciones

#### Tipos de malwares y carácterísticas

-Triaje: Proceso para analizar y priorizar las respuestas ante incidentes de seguridad informáticas

-Malware: Es un código malicioso que se ha desarrollado con una finalidad específica, busca provocar un daño, una malfunción, un bloqueo, extracción de información o acceso no autorizado a una plataforma tecnológica. Hay diferentes tipos de codificación:

.Decimal: Sistema de base 10

.Binario: Sistema de Base 2

.Hexadecimal: Sistema de numeración de base 16

.ASCII: código de carácteres basado en el alfabeto latino

-Herramientas y Terminos:

.Ensamblador: Lenguaje de programación de más bajo nivel. Es usado para programar los microprocesadores

.Debugger: Aplicación para depurar errores de programación 

.Bypasear: Alternativa para evitar un bloqueo

.NOP: Operación nula escrita en ensamblador. Cuando llega a esta operación, continúa hasta la siguiente operación válida

.NOP ->(|Enserio se llaman igual?|): Técnicas para bypasear un sistema de seguridad

.Bindear: Metodología usada para unir un ejecutable con otro archivo, resultando otro ejecutable.

.Joiner: Metodología usada para unir un ejecutable con otro archivo, resultando otro ejecutable.

.Builder: Entorno gráfico para cifrar archivos 

-Tipos de Malware:

.Adware: Genera publicidad.

.Clickers: Encargado de generar tráfico hacia la publicidad y pulsar sobre esta.

.Ransomware/locker: Restringe el acceso al sistema o parte de él mediante claves criptográficas.

.Troyano: Virus que debe ser ejecutado por la víctima.

.Malwarw: Crea un daño específico para el usuario.

.Keylogger: Troyano que roba la información, normalmentemediante mediante keyloggers

.Spyware: Aplicación con el objetivo de extraer información

.Gusano: Aplicación con el objetivo de extenderse por la red

.Phishing: Recolectan datos primcipalmente bancarios

.RAT: Herramientas de administración remotas, normalmente con disposición de Backdoors

.Rootkits: Conjunto de aplicaciones ocultas para el equipo, con el objetivo de disponer de un acceso externo para futuras ocasiones

-Cualidades del Malware:

.Persistencia: Capacidad para mantenerse en el sistema

.Ofuscación: Tecnica de modificación del código fuente de una aplicación para evitar ingeniería inversa.

.Backdoor: Sistema encargado de evadir las medidad de seguridad, dando acceso fácil a otro dispositivo.

.FUD: Full Undetectable

.Firma: Código Hexadecimal almacenado en una base de datos de los AV

.Heurística: Arte de descubrir mediante algorítmos predictivos comportamientos potencialmente peligrosos

.Ingeniería inversa: Proceso con el objetivo de obtener información a partir de un producto, con el fin de determinar cuáles son sus componentes y de que manera interactúan entre sí

.Sandbox: Entorno controlado y aislado para el estudio de programas

#### Procesos y Conexiones: Identificación, puertos y protocolos

-Procesos: Todas las instrucciones que recibe el ordenador a través del software. Tienen una finalidad específica. Están vinculados a todo lo que sucede internamente en el ordenador 

-Puertos: Pueden ser lógicos(Los que conocemos en el router) o virtuales

.PS2(Lila): Sirve para conectar el teclado, cuando es verde sirve para conectar el mouse

.Puertos USB: Sirve para conectar dispositivos y periféricos 

.Puerto Firewire: Sirve para conectar dispositivos digitales(cámaras, videocámaras, etc...)

.Puerto VGA: Sirve para conectar el monitor

.Puerto DVI: Sirve para conectar pantallas digitales

.Puerto HDMI: Sirve para trasmititr video en alta definición

.Puerto RJ45: Sirve para conectar a una red o a internet

.Salida Estéreo(Negro): Sirve para conectar los altavocez traseros

.Salida Estéreo(Amarillo): Sirve para conectar el altavoz central SUBWOOFER

.Salida Estéreo(Azul): Sirve para capturar audio

.Salida Estéreo(Verde): Sirve para conectar altavoces o auriculares

.Salida Estéreo(Blanco): Sirve para conectar los altavocez delanteros

.Entrada Mono: Sirve para conectar el micrófono

#### Diferencias entre un Hacker y un Cracker 

-Hacker: Solo es una forma de llamar a alguien con un alto conocimiento en informatica con el nivel de poder proteger, vulnerar, evaluar distintos aspectos de un computador dentro de un sitema.

-Cracker: Es quien realmente desarrolla y comete los ciberdelítos

-Equipo de Ciberseguridad: Son mantenidos por los hackers ya que son quienes evalúan y hacen los triajes, organizan, diseñan y planifican los análisis, pruebas y respuestas ante los accidentes de seguridad. Se divide en 3 equipos:

.Red Team: Hacen pruebas de ataque, injectan malware o intentan romper criptografias. Son los que hacen las pruebas agresivas contra un equipo, todo en un ambiente controlado y autorizado.

.Purple Team: Tienen como misión evaluar lo que sucede en el ataque y lo que debe ser remediado en la protección, son los estadistas que analizan para poder dar una respuesta adecuada para cada incidente de seguridad que suceda

.Blue Team: Su función en proteger los sistemas haciendo un hardening, instalando antivírus, diseñar sistemas de conección, etc. Para que los procesos puedan ser identíficados y detener a los no fiables.

#### C&C (Comand & Control) y direccionamiento

En el campo de seguridad informática la estructura C&C consta de servidores y otros elementos que son utilizados para controlar el malware en remoto con un operador, a través de scripts o sistemas automáticos. Siempre estará como un sistema de administración de malware. Esto se observa en el monitor de recursos.

El C&C muchas veces se utiliza para minería de datos y por lo tanto utiliza los recursos del ordenador en remoto para ejecutar esas acciones.

Como ejemplo las botnet, que pueden ser miles de equipos infectados que están todos coordinados  a través de un Comand & Control. Los servidores de C&C pueden ser directamente operados por operadores humanos o por varios equipos de crackers.

Importante mirar las conecciones que se establecen, donde y los periódos de tiempo. Si no se mira al momento no hay problema, hay los logs del sistema donde se puede ver información de actividades que ya han sucedido y podemos evaluar como ha transcurrido en el tiempo sobre diferentes aspectos. 

El redireccionamiento es mayormente aplicado en páginas web falsas o sitios oficiales modificados por atacantes, para redireccionar algunos de sus enlaces a servidores controlados por los ciberdelincuentes, y de esa manera robar datos de usuarios, contraseñas o cualquier otra finalidad deseada suplantando o llevando el trafico de red a un sitio determinado.

###  Búsqueda de Malware

#### Mito y Realidad sobre el Malware

Lo principal es reconocer que hay muchas fantasías entorno al malware, y que, dentro de la realidad actual, existe una gran variedad de riesgos que exponen cada vez más a los usuarios de medios informáticos a estos actos delictivos. Por eso es importante eliminar ciertas creencias erróneas y ser consciente de nuestra vulnerabilidad y para ello nombrar estos siete MITOS:

   1. Los firewalls protegen de los virus.

Realidad: Aunque los firewalls representan una barrera aceptable entre tu equipo y este software, no es infalible. Ahora, cualquier virus competente puede desactivar el firewall. Aunque este alerte y prevenga algunos ataques, no puede limpiar, ni proteger a los equipos.

   2. Los virus afectan el hardware de tu computadora.

Realidad: No existe malware que pueda dañar las partes físicas de un equipo. Por más “peligroso” que un virus sea, ninguno puede hacer que una computadora sufra daño a nivel material, lo que si existe es un hardware (Killer USB) que puede causar daño físico por sobrecarga de voltaje al puerto del ordenador y un archivo de datos malicioso que puede saturar tu disco duro con 4.5 petabytes, llamado “Bomba ZIP”.

   3. No existen virus para Mac, solo para Windows.

Realidad: Las amenazas que existen para Windows, existen para Mac, aunque no sean tan comunes. Mac tiene un nivel de seguridad integrado que protege a sus equipos en un nivel básico-medio, así, el infectar estas computadoras no es tan sencillo. Incluso existe malware para IOS y Android, lo que no existe, es un único virus multiplataforma, que ataque a todos por igual.

   4. Puedes darte cuenta si tu computadora ha sido infectada por un virus.

Realidad: La mayoría de estos programas malignos pueden dar pistas del daño. Hoy en día, muchos pueden vivir dentro de un equipo sin que el usuario tenga la más mínima idea de que algo sucede.

   5. Las compañías de antivirus son las que crean el Malware.

Realidad: Esta teoría salió en 1988 y nunca ha podido ser probada. Aunque sonaría lógico por algunas razones, a estas compañías no les conviene invertir tiempo y dinero en crear algo que, después, tendrán que esforzarse en destruir.

   6. Los archivos de personas conocidas siempre son seguros.

Realidad: El hecho de que sea un contacto conocido, no significa que ellos no hayan sido atacados. Muchos usuarios, sin darse cuenta, cargan con equipos y cuentas infectadas. Así, el malware pasa desapercibido y logra llegar a otros usuarios. Es recomendable hacer una verificación de todo lo que llega a nuestras bandejas de entrada. (La “Ingeniería Social” es técnica de hacking muy utilizada, que se aprovecha de este mito)

   7. Un antivirus es capaz de proteger al usuario de cualquier tipo de Malware.

Realidad: Es imposible que un antivirus esté al corriente con los virus que salen a diario. Aunque tener un antivirus marca una gran diferencia, nunca se puede tener un margen de protección del 100%

#### Metadatos, Firma y Descripción

Existen diversas definiciones sobre los metadatos, sin embargo puede resumirse en la siguiente: “Conjunto estructurado de datos que describen a otros datos, a su estructura interna y a sus servicios, cuyo propósito es incrementar la identificación y la individualidad de cada archivo o paquete de datos”

-Firma y Descripción: Al momento de verificar un software o un proceso en nuestro ordenador, observaremos que existen nombres de fabricantes en cada uno de ellos o al menos en su mayoría, así como una descripcion del producto o el software asociado a cada proceso. También se denomina firma, a la traza o secuencia que se obtiene al ejecutar un código. Casi siempre identificado por un HASH.

-HASH: Es un algoritmo matemático que transforma cualquier bloque arbitrario de datos en una nueva serie de caracteres con una longitud fija. Independientemente de la longitud de los datos de entrada, el valor hash de salida tendrá siempre la misma longitud.

#### Análisis heurístico y Herramientas

Heurística es un conjunto de técnicas y procedimientos para determinar según la cantidad de puntos a favor o en contra, la condición o característica de un software o proceso. Es decir, se analizará qué es lo que pretende realizar ese ejecutable y al detectar que se trata de una acción maliciosa se bloqueará al instante.

-Herramientas (Local – Online):

.Local: Software instalado en nuestro ordenador para su protección (antivirus). Se puede hacer con herramientas de fabricante, pero solo nos dira si está infectado o no. Para recurrir los informes hay que acudir a los logs.

.Online: Aplicación Web que nos permite revisar archivos sin ejecutarlos en nuestro ordenador o que pueden remitirse a una web para su escaneo (Virus total). Podemos obtener informes muy amplios que no requieren de nuestros recursos o conocimientos.

Se recomienda tener dos o tres alternativas antes de hacer un triaje para asegurar un resultado más acertado.

### Análisis de archivos ejecutables

#### Paquetes, ruta de instalación y ruta de ejecución

Es una serie de programas que se distribuyen conjuntamente de forma que cada uno de ellos complemente o necesita de los otros. Otra definición indica que es una colección de archivos de código fuente o binarios con un conjunto de archivos de instrucciones que especifican qué hacer con cada uno de ellos. Todos los archivos van comprimidos según un formato especial que depende de la distribución. Se debe tener presente que descomprimir y desempaquetar no es lo mismo.

-Un paquete contiene:

.Datos: conjunto de archivos que serán instalados y/o manipulados. Son los archivos del programa, bibliotecas, etc.

.Cabecera: instrucciones para el proceso de instalación y configuración además de información como: datos técnicos del mismo paquete, dependencias, incompatibilidades, descripción, datos del responsable del paquete; y archivos con instrucciones para comprobar dependencias, preparación del sistema, etc.

-Ruta de Instalación: Es la ubicación designada por el sistema para realizar la instalación de un software. Esta “ruta” puede ser modificada por el usuario mediante instalaciones personalizadas.

-Ruta de Ejecución: Toda aplicación tiene un fichero .exe que es el ejecutable de la misma, por lo tanto, basta con hacer clic sobre este archivo para que la aplicación se lance automáticamente. Por defecto, en Windows 10 las aplicaciones instaladas las podemos encontrar bajo la ruta C:\Archivos de programa o C:\Archivos de programa (x86), siendo la unidad C: la unidad donde tenemos instalado el sistema operativo Windows. Esto está definido por las instrucciones predefinidas en el código y no es modificable por el usuario

#### Uso de Recursos

Un recurso del sistema, es cualquier componente físico o virtual de disponibilidad limitada dentro de un sistema informático. Cada dispositivo conectado a un sistema informático es un recurso. Cada componente interno del sistema es un recurso. Los recursos del sistema virtual incluyen archivos (concretamente manejos de archivos), conexiones de red (concretamente sockets de red) y áreas de memoria.

La gestión de recursos incluye tanto la prevención de fugas de recursos (no liberar un recurso cuando un proceso ha terminado de utilizarlo) como el tratamiento de la contención de recursos (cuando varios procesos desean acceder a un recurso limitado). Por ejemplo, los recursos informáticos (de capacidad) pueden ser: la memoria, la capacidad de almacenamiento e incluso la CPU con la que cuenta una computadora.

Un recurso libre es la capacidad de un recurso con la que cuenta una computadora en un determinado momento. Por ejemplo, el recurso de memoria RAM libre en un determinado momento puede ser 450 MB de un total de memoria de 1 GB. Un recurso también puede ser un dispositivo. Por ejemplo, una computadora que cuenta con una impresora, cuenta con ese recurso.

#### Establecimiento de conecciones

En informática, conexión puede referirse a:

-El punto exacto donde se realiza un enlace entre dispositivos o sistemas.

.También conexión puede hacer referencia al enlace completo establecido, no sólo el punto específico. En algunos contextos conexión puede ser sinónimo de acceso. Puede ser una conexión digital o analógica.

-Conexión Cableada

-Conexión inalámbrica

-Conexión a una red, con el objetivo de transferir datos usualmente en ambos sentidos.

.Conexión a internet.

.Conexión punto a punto.

.Conexión dial-up.

-Conexión a una base de datos.

-Conexión virtual o VPN

-Conectar un dispositivo a una computadora.

-Conexión a un servicio online como una red social, un programa de mensajería, etc. En este caso sinónimo de Iniciar sesión.

-Conexión por acceso remoto.

### Email y Phishing

#### Emails sospechosos y archivos infectados

Existen diversas formas de detectar un correo electrónico falso y evitar caer en cualquier estafa cibernética. Vamos a ver 5 maneras que te permitirán identificarlo:

.El dominio de la dirección de email no coincide con el de la empresa.

.Faltas de ortografía o de concordancia.

.El correo solicita información personal

.El asunto del correo es de máxima alerta

.Generalmente se incluyen archivos adjuntos.

-Como comprobar el auténtico remitente de un correo:

.Desde Gmail:

<Al dar a leer el correo, clicamos en la flecha situada a la derecha del asunto y entramos en Mostrar original.

<Al revisar el contenido, vemos que este correo no es maligno, pues en el campo de Received podemos revisar que es la IP desde donde he mandado el correo. Además, en la ID del mensaje (Message-ID) vemos que el correo viene del servidor mail.gmail.com.

<El código de Received viene a decir que se ha enviado desde esa IP a través de la web de Gmail a esa hora concreta del servidor.

.Desde Hotmail:

<Hacemos clic con el botón derecho sobre el asunto del correo y marcamos Ver código fuente del mensaje.

<Se trata del mismo correo que el caso anterior,solo que esta vez lo hemos reenviado, para ver los cambios. Porque no es lo mismo enviar un correo en el mismo servidor donde lo vas a recibir que a otro distinto. Podemos ver todos los patrones y compararlo mejor.

<En Received vemos el servidor de Google, junto con su IP y los datos del servidor de Microsoft. Podemos comprobar que este correo no es falso porque en todos los campos donde debe verse el servidor están correctos.

.Desde Microsoft Outlook:

<Teniendo abierto el correo, clicaremos con el boton derecho para que salga el sub menu y elegiremos “Ver código fuente”

<Se abrirá una ventana. Nos fijaremos en el cuadro de texto situado en la parte inferior de la misma. Como no se podrá ver toda la información, copiaremos el contenido y lo pondremos en un bloc de notas.

<Revisamos de nuevo los campos de Received, así como todo el encabezado en general.

.Archivos Infectados: 

<La mayoría de los incidentes de seguridad se inician al hacer click en algún enlace de página web comprometida en un archivo recibido y no verificado por el antivirus o por nosotros mismos.

<La forma de revisar los paquetes de datos o ficheros sospechosos es hacerles un scan con el antivirus instalado en local o subiéndolo a páginas especializadas como VIRUS TOTAL o la herramienta web de KASPERSKY entre otros.

->(|Este curso ha sido corto, pero lento. Que malos powerpoint de apoyo hace este profesor|)

#### Carrera Proyecto de clases Día 19: 02/11/2023

## "Curso de desarrollo seguro"

● Ciclo de desarrollo seguro de software

● Seguridad en el desarrollo

● Seguridad en los procesos y procedimientos

● Seguridad en la configuración del entorno

#### 

### Ciclo de desarrollo seguro de software

Seguridad: La protección de la información frente a las distintas amenazas al objeto de garantizar el buen funcionamiento.

-La seguridad tiene 4 principios: 

.Autenticidad

.Confidencialidad

.Integridad

.Disponibilidad

-La información, como el software, tiene un ciclo de vida:

.Creación

.Distribución

.Uso

.Mantenimiento

.Destrucción

-La seguridad:

.Requiere de un mantenimiento continuado

.Las personas son el factor fundamental

.Debe estar integrada en todos los procesos y procedimientos

.Requiere de la implicación de todos

#### Ciclo de desarrollo de software

¿Por qué desarrollar de manera segura?: El coste de arreglar un fallo de seguridad aumenta exponencialmente con el tiempo

La importancia de la seguridad para un negocio: Para evitar que se filtre información sensible o evitar el robo de cuentas por ejemplo

-Fases del secure SDLC

.Requisitos: Cada producto, servicio y característica que Microsoft desarrolla comienza con requisitos de seguridad y privacidad claramente definidos; son la base de aplicaciones seguras e informan de su diseño. Los equipos de desarrollo definen estos requisitos en función de factores como el tipo de datos que controlará el producto, las amenazas conocidas, los procedimientos recomendados, las regulaciones y los requisitos del sector, y las lecciones aprendidas de incidentes anteriores. Una vez definidos, los requisitos se definen, documentan y realizan un seguimiento claramente.

.Arquitectura y diseño: Una vez definidos los requisitos de seguridad, privacidad y funcionalidad, puede comenzar el diseño del software. Como parte del proceso de diseño, se crean modelos de amenazas para ayudar a identificar, clasificar y evaluar posibles amenazas según el riesgo. 

.Implementación: La implementación comienza con los desarrolladores que escriben código según el plan que crearon en las dos fases anteriores. Microsoft proporciona a los desarrolladores un conjunto de herramientas de desarrollo seguras para implementar de forma eficaz todos los requisitos de seguridad, privacidad y función del software que diseñan. 

.Testeo: Antes de que se pueda publicar cualquier código escrito, se requieren varias comprobaciones y aprobaciones para comprobar que el código se ajusta a SDL, cumple los requisitos de diseño y está libre de errores de codificación.

.Despliegue: Después de pasar todas las pruebas y revisiones de seguridad necesarias, las compilaciones no se publican inmediatamente para todos los clientes. 

.Mantenimiento

#### Requisitos:

-Fases de análisis y requisitos:

.Requisitos y objetivos de la aplicación

.Posibles problemas

.Tecnología

.Frameworks

.Lenguajes

.Funcionales y no funcionales

-Seguridad en los requisitos:

.Solventar vulnerabilidades conocidas

.Análisis de riesgos

.Tecnologías con mantenimiento y actualizaciones

.Frameworks extendidos y respaldados por la comunidad o alguna empresa

Tener en cuenta la seguridad desde esta primera fase es vital para ahorrar en el futuro

#### Arquitectura y diseño

-Fase de Arquitectura y diseño:

.Definición de servicios

.Interfaces

.Protocolos

.Sistemas

.Redes

.Flujo de datos

-Seguridad en la Arquitectura y el Diseño:

.Identificar vulnerabilidades en las tecnologías escogida y protegerlas

.Asegurar los recursos de datos

.Emplear protocolos de comunicación seguros

.Estudiar estándares y arquitecturas típicas

Una arquitectura segura es el primer paso hacia una aplicación segura

#### Implementación

-La fase de Implementación se basa únicamente en el desarrollo de la aplicación

-Seguridad en la Implementación:

.Seguir las buenas prácticas que veremos durante el curso

.Evitar el uso de funciones deprecated

.Controlar errores

.Controlar flujos de datos

.Mantener los procesos lo más simples posibles

#### Testeo

-Fase de Testeo:

.Plan de pruebas

.Tests unitarios

.Tests de integración

.Tests de los sistemas

.Automatización de tests

.Revisión de tests

-Seguridad en los tests:

.Testear las vulnerabilidades conocidas, debemos asegurarnos de que están protegidas

.Fuzz testing

.Pentesting básico

#### Despliegue

-Fase de Despliegue:

.Preparación del entorno de producción

.Configuración de servicios

.Configuración de sistemas

.Gestión de usuarios

.Gestión de operaciones

-Seguridad en el Despiegue:

.Configurar de manera segura cada servicio

.Configurar de manera segura cada sistema

.Gestiona de manera segura los permisos y operaciones

El entorno de testing es distinto del mundo real

#### Mantenimiento

-Fase de Mantenimiento:

.Revisión de bugs

.Nuevas funcionalidades

.Optimización de código

-Seguridad en el Mantenimiento:

.Versiones actualizadas de cada framework o librería

.Actualizar tecnologías

.Actualizar procedimientos

.Revisión de logs

->|(Este profesor da los puntos con alguna anotación propia tan corta y básica que me parece lo mismo que solo escribir el punto)|

#### Carrera Proyecto de clases Día 20: 04/11/2023

### Seguridad en el Desarrollo

#### Validación de Entradas

Cualquier dato introducido por un usuario es suceptible de ocasionar errores. Es de vital importancia controlar la inserción de datos a nuestro software

-SQLi - Inyección de código SQL:

.Ataque de inyección de código

.Permite a un atacante ejecutar código SQL sobre nuestra base de datos

-Validación de ficheros subidos:

.Si nuestro software o aplicación permite subir ficheros a un determinado servidor, debemos cuidar la seguridad de esta funcionalidad

.Un atacante podría tomar el control de nuestra máquina mediante este tipo de ataques

-Validación de Entradas:

.Realizar todas las validaciones en un sistema de confianza

.Especificar la codificación de caracteres para todas las entradas (UTF-8...)

.Identifica todas las entradas de datos y clasifícalas en confiables y no confiables. Valida las no confiables

.Crea una rutina centralizada de validación de entradas para tu aplicación

.Canonicaliza los datos antes de validarlos(codifica todos igual)

.Cualquier fallo de validación debe incurrir en el rechazo de la entrada

.Valida todos los datos que provenga del cliente

.Valida rangos de datos, tamaño de datos y tipos de datos

.Si es posible, valida los datos empleando una lista blanca

.Si es necesario para tu aplicación utilizar caracteres raros, asegurate de implementar controles de entrada y salida específicos para estos

#### Codificación de salidas:

-¿Qué lo diferencia de la validación de entradas?

.Las entradas de datos son impredecibles y esto hace imposible la validación de entrada perfecta

.Debido al funcionamiento de la aplicación, puede ser necesario admitir caracteres raros

.Los datos recibidos pueden ser empleados en muchos contextos (JS, CSS, HTML...)

Esas tres razones hacen necesario emplear la codificación de las salidas

-XSS - CROSS SITE SCRIPTING:

.Ataque de inyección de código

.Permite a un atacante ejecutar código javascript malicioso

-Codificación de Salidas:

.El mejor método para prevenir XSS y SQLi

.El objetivo principal es convertir entradas de datos no confiables en datos seguros que mostrar

.Hacer toda la codificación en un sistema de confianza

.Utilizar una rutina testeada y estándar para la codificación de cada tipo de datos

.Codificar todos los caracteres a menos que sean seguros para el intérprete previsto

.Sanitizar todas las salidas de datos no confiables destinadas a comandos o consultas: OS, SQL, XML o LDAP

#### Criptografía

-Por qué cifrar la información?

.Una de las máximas de la seguridad informática es la confidencialidad

.En el siglo XXI el valor está en los datos

.No queremos revelar información relevante de nuestro negocio ni de nuestros usuarios

.LOPD

.Todas las funciones criptográficas empleadas deben implementarse en un sistema de confianza

.Proteger los “secretos maestros” de accesos no autorizados

.Manejar el sistema ante errores de los módulos criptográficos

.Todos los números, nombres de archivo, GUIDs y cadenas que deban ser aleatorios/as y no adivinables, serán generados con un módulo testeado y aprobado que cumpla con ese requisito

.Los módulos criptográficos utilizados deben ser compatibles con FIPS 140-2 o algún estándar similar

.Debe establecerse una política y un proceso para la gestión de claves criptográficas

#### Buffer Overflow

-Historia:

.Documentado en 1972

.Explotado en 1988 por el Morris Worm

.Redescubierto y publicado en 1995 y 1996

.Usado para piratear la XBox

.Usado para piratear la PS2

->|(Bastante seguro que habrá más, pero el tipo tiene prisa supongo)|

-Qué es? :El excesivo relleno de una variable o recurso que resulta en un problema con el manejo de memoria, pudiendo incurrir en modificaciones de memoria, manipulación y acceso a direcciones de memoria y crasheos de programas.

-Buffer Overflow: 

.Audita tu código

.Conoce la documentación del lenguaje y sus vulnerabilidades conocidas: Estándares de desarrollo, funciones inseguras…

.Herramientas de compilación específicas: StackShield, StackGuard… 

### Seguridad en los procesos y procedimientos

#### Autenticación y Manejo de Contraseñas

-La importancia de la Autenticación:

.Uno de los principios de la seguridad es la propia autenticación

.La funcionalidad básica para asignar permisos de acceso a determinados recursos, según roles, grupos, dueños…

.Un fallo de autenticación podría ocasionar graves daños, alguien podría hacerse pasar por un usuario que no es

-Como asegurar la Autenticación:

.Deben usarse soluciones testadas y extendidas para cada lenguaje que simplifiquen este proceso y que cuenten con actualizaciones periódicas

.Debemos realizar todas comprobaciones en un sistema de confianza

.Centraliza todos los servicios de autenticación del software

.Todos los controles de autenticación deben fallar de manera segura

.Almacena las contraseñas hasheadas (no MD5) con sal y asegurate de que solo la aplicación puede escribir en esa tabla/colección

.No mostrar qué parte de la autenticación ha fallado: usuario o contraseña

.Utiliza el método HTTP POST para autenticar en caso de aplicación web

.Obliga a los usuarios a emplear contraseñas complejas que incluyan números, letras minúsculas, mayúsculas y símbolos y tengan cuantos más caracteres mejor

.No muestres la contraseña en la pantalla del usuario cuando la introduzca

.Limita el número de intentos de login fallidos y bloquea la cuenta si se sobrepasa

.Notifica a los usuarios cuando ocurra un reseteo de sus contraseñas y asegura este proceso tanto o más como la propia creación de usuarios

.No usar ningún mail de usuario para notificar que no estuviera previamente registrado

.Si es necesario, obliga a los usuarios a cambiar la contraseña cada cierto tiempo

.Cambia todas las contraseñas por defecto

.Usa doble factor de autenticación para recursos e información muy sensible

#### Manejo de Sesiones

-La importancia de las sesiones:

.Permiten guardar información relativa de cada usuario que opera usando nuestro software

.Debemos intentar registrar todas las operaciones que se realicen, así como el actor que la ejecuta

.Puede servir para trazar errores, mejorar la interfaz de usuario o comprobar un funnel de ventas

.Demasiada información relevante para no cuidarla

-Asegurando las sesiones:

.Usa los controles de manejo de sesión que implemente tu servidor o framework e identifica estas sesiones como las únicas válidas

.Los identificadores de sesión deben generarse en un sistema de confianza y de manera aleatoria

.Las funciones de logout deben eliminar la conexión de una sesión por completo y estar disponibles en todas las pantallas de la aplicación

.Termina las sesiones periódicamente, incluso aunque la sesión esté activa

.Tras cada re-autenticación debe crearse una nueva sesión, no mantener la antigua

.Los id de sesión solo deben estar presentes en la cookie

.Recicla los id de sesión periódicamente

.Configura el atributo secure para las cookies

#### Manejo de Errores y Log

-La importancia del Manejo de Errores y Log:

.Un error puede desvelar información sensible

.Un log guarda la traza de cualquier operación que se realice en nuestra aplicación

.La integridad del log es vital para la detección de ataques, malas prácticas o acciones no permitidas

.Un correcto manejo de errores mejora la experiencia de usuario en una aplicación

-Asegurando el Manejo de Errores y Log:

.No desveles información relevante en los errores como detalles del sistema, información de cuentas o ids de sesión

.No muestres mensajes de debug

.Implementa mensajes de error genéricos

.Libera la memoria en uso cuando ocurra un error

.Todos los sistemas de log deben implementarse en un sistema de confianza

.Asegúrate de que los mensajes de error que incluyan código no se ejecuten como tal en ninguna UI

.Restringe el acceso a los logs

.No almacenes información relevante en los logs como detalles del sistema, ids de sesión o contraseñas

.Valida la integridad de los logs usando hashes

-Que guardo en los Logs?

.Fallos de validación de entrada

.Intentos de autenticación

.Fallos de acceso de control

.Eventos de manipulación de datos

.Intentos de login con tokens expirados o inválidos

.Excepciones del sistema

.Funciones de administración, incluyendo cambios en la configuración de seguridad

.Fallos en conexiones TLS

.Fallos criptográficos

#### Seguridad en la configuración del entorno

### Control de Accesos

-Por qué controlar los accesos:

.Perseverar la confidencialidad de los datos

.Proteger la información de los usuarios

.Proteger recursos de nuestro software que solo deben ser accionados o usados por algunos roles o usuarios específicos

En definitiva, evitar que cualquier usuario no vea nada que no deba ver en nuestro software

-Como controlar los accesos:

.Emplear únicamente objetos de sistemas de mconfianza para tomar decisiones de autorización mde accesos

.Emplea un único componente en tu software que revise la autorización de accesos

.Los controles de accesos deben fallar de manera segura

.Rechaza cualquier acceso ante cualquier caída o error en la información de configuración de la seguridad

.Fuerza la autenticación para cualquier petición (aunque proceda del propio servidor)

.Si deben almacenarse datos sobre el estado en el cliente, usa encriptación y chequea la integridad en el servidor

.Limita el número de transacciones en el tiempo por usuario

.Desactiva las cuentas sin uso

.Minimizar los privilegios que se otorgan a cualquier usuario al mínimo posible

.Crea una política de control de accesos

-Restringe los accesos a:

.Ficheros o otros recursos

.URLs protegidas

.Funciones protegidas

.Referencias directas a objetos

.Servicios protegidos

.Datos de aplicación

.Atributos de usuarios y datos y políticas empleadas por los controles de acceso

.Información de configuración de seguridad

#### Protección de datos

-Los datos:

.Son el oro del siglo XXI ->|(Esta frase me ha gustado bastante)|

.En ellos reside el verdadero valor de nuestro software

.Las leyes exigen una alta protección para según qué tipo de datos

.Los usuarios demandan seguridad en sus datos y les preocupa de cara a usar una aplicación o no

.En aplicaciones de banca, solo un 7,7% de usuarios piensa que sus apps son seguras 

-Protege los datos:

.Usa el principio de mínimos privilegios

.Protege cualquier copia en caché o de seguridad de datos sensibles y eliminas las copias temporales

.Encripta la información secreta almacenada por el software

.Protege el código fuente

.Elimina comentarios del código visible para el usuario para evitar mostrar información del backend

.Elimina y restringe el acceso a documentación innecesaria de la aplicación

.No incluyas información sensible en los parámetros de las peticiones GET

.No autocompletes formularios sensibles

.No guardes en memoria caché la información de páginas con datos sensibles (Cache-Control:no-store)

.La aplicación debe soportar la eliminación de datos sensibles cuando estos no sean necesarios

.Implementa un control de accesos seguro, con una política robusta y bien configurado

#### Seguridad de Comunicaciones

-La interfaz de comunicación: Se define como una conexión funcional entre dos sistemas, programas, dispositivos o componentes de cualquier tipo que permite el intercambio de información

-Protege las comunicaciones:

.Implementa el cifrado para la transmisión de cualquier información sensible.

.Emplea TLS siempre o algún cifrado discreto cuando no sea posible

.El certificado TLS debe ser válido, no estar expirado y tener el nombre de dominio bien

.Una conexión TLS fallida no debe abrir una conexión insegura

.Emplea TLS para todas las conexiones que requieran autenticación

.Emplea TLS para conexiones a sistemas externos que impliquen el uso de información sensible

.Emplea una única implementación estándar TLS que esté bien configurada

#### Configuración del Sistema

-La configuración del Sistema: Entendemos por sistema a la máquina física o virtual que contiene nuestro software, así como todas las dependencias necesarias para que funciones correctamente

.Puede ser una red de sistemas conectados (microservicios)

.Puede ser un solo sistema con varios contenedores

-Asegura la configuración del Sistema:

.Asegúrate de que todos los servidores, frameworks y componentes están actualizados, parcheados y en su última versión estable

.Desactiva el directory listing

.Restringe los privilegios al mínimo para el servidor, los procesos y las cuentas de usuario

.Cuando ocurra una excepción del sistema, debe fallar de manera segura

.Elimina cualquier fichero o funcionalidad innecesaria

.Elimina cualquier código o comentario no pensado para un entorno de producción

.No muestres tu estructura de fichero en robots.txt, anida todos los ficheros a ocultar bajo un directorio

.Controla y define los métodos HTTP que permites en cada página, desactiva los innecesarios

.Elimina cabeceras innecesarias relacionadas con el sistema operativo

.Implementa un sistema de gestión de activos y registra el software y los componentes del sistema en él

.Implementa un software de control de cambios para gestionar y guardar los cambios del código en producción y desarrollo

.Separa y delimita los entornos de desarrollo y producción y limita y controla el acceso al primero

#### Seguridad en Bases de Datos

-Las Bases de Datos: 

.Son parte fundamental de casi cualquier software actual

.Existen muchas y de diversos tipos, pero todas basan su funcionamiento en los métodos CRUD: Guardar información, Leerla, Actualizarla y Eliminarla

.La información es parte fundamental de cualquier software, hay que salvaguardar su integridad

-Asegurando las Bases de Datos:

.Usa queries fuertemente parametrizadas

.Valida las entradas y codifica las salidas

.La aplicación debe tener los mínimos privilegios posibles cuando acceda a la BBDD

.Usa contraseñas seguras

.La configuración de la conexión con las BBDD no debe estar hardcodeada, debe estar en un fichero de configuración o en un sistema de confianza y cifrada

.Cierra la conexión ASAP (As Soon As Possible)

.Elimina y modifica cualquier password o configuración por defecto de la base de datos que la exponga

.Desactiva cualquier funcionalidad innecesaria de la base de datos

.Elimina cualquier contenido que viniera por defecto

.Elimina cualquier cuenta que viniera por defecto

#### Manejo de Ficheros

-Seguridad al Manejar y Trabajar Ficheros:

.El software no es más que un montón de código guardado en ficheros

.Las aplicaciones pueden requerir que los usuarios puedan subir ficheros de diversa índole

.Un fichero puede ser inofensivo o altamente peligroso, no debemos confiar en la buena fe del usuario o en el origen de su fichero

.No entregar información dada por el usuario directamente a una función

.Requerir autenticación antes de subir cualquier fichero

.Limitar y validar los tipos de los fichero subidos

.No guardar ficheros en el mismo contexto de la aplicación, deben ir a la BBDD o a otro servidor

.No permitir subir ningún fichero que pueda interpretar un servidor web

.Desactiva la ejecución de ficheros en cualquier directorio que no lo requiera

.Crea una lista blanca de tipos de ficheros subidos y nombres que tienen permiso para ser leídos o ejecutados

.No envíes o muestres nunca rutas absolutas al usuario

.Asegúrate de que los recursos y ficheros de la aplicación son de solo lectura

.Escanea los fichero subidos en busca de malware

#### Manejo de Memoria

-Asegura la Memoria: 

.La memoria de un computador nos permite ejecutar los procesos de nuestro software, almacenar información en caché de rápido acceso y almacenar información a largo plazo

.Es fundamental cuidar la memoria de nuestros sistemas para un buen funcionamiento

.El cloud computing ha incrementado la preocupación por el buen uso de la memoria, ya que esta cuesta dinero

.Emplea controles de entrada y salida para datos no confiables

.Revisa que los buffer son tan grandes como deben ser

.Si usas funciones como strncpy(), cuida que el buffer de destino tenga la misma longitud que el origen

.Trunca las cadenas de entrada antes de pasarlas a funciones de copia o concatenación

.Libera la memoria cuando completes una función o proceso

.Evita el uso de funciones vulnerables (printf, strcpy...)

-En Resumen:

.El principio KISS: Keep It Simple Stupid ->(|Me encanta|)

.Mínimos privilegios

.Ninguna configuración por defecto

.Todo actualizado

.Siempre revisamos la seguridad en sistemas de confianza

.Desconfianza total en el usuario

.Conocer la tecnología, lenguaje o framework que usemos

#### Carrera Proyecto de clases Día 21: 11/11/2023

## "Curso de Introducción al Esquema Nacional de Seguridad (ENS)"

● 1. Introducción al Esquema Nacional de Seguridad

● 2. Marco organizativo

● 3. Marco operacional

● 4. Medidas de protección

● 5. Análisis de riesgos

● 6. Adecuación y mantenimiento

##

### Introducción al Esquema Nacional de Seguridad

#### Enfoque, objetivos, alcance y aplicabilidad

-Necesidad de regulación:

.Digitalización de las administraciones públicas

.Ley 11/2007 de Acceso Electrónico de los Ciudadanos a los Servicios Públicos → Administración electrónica

.Uso eficiente de las tecnologías de la información y comunicaciones

.Mantener la privacidad, confianza y eficacia en el mundo electrónico

-La finalidad del Esquema Nacional de Seguridad: es la creación de las condiciones necesarias de confianza en el uso de los medios electrónicos, a través de medidas para garantizar la seguridad de los sistemas, los datos, las comunicaciones, y los servicios electrónicos, que permita a los ciudadanos y a las Administraciones públicas, el ejercicio de derechos y el cumplimiento de deberes a través de estos medios.

-Creación del ENS:

.Recomendaciones de la Unión Europea en cuanto a administraciones públicas

.Acceso electrónico de los ciudadanos a servicios públicos

.Protección de datos de carácter personal y garantía de derechos digitales

.Régimen Jurídico de las Administraciones Públicas y del Procedimiento Administrativo Común

.Reutilización de la información en el sector público

-Alcance:

.Digitalización de las administraciones públicas

.Servicios esenciales

.Activos que afectan a estos servicios esenciales

.Sistema general de información

-Aplicabilidad:

.Determinación de la categoría de un sistema:

<Dimensiones de seguridad:

■ Disponibilidad (D)

■ Integridad (A)

■ Confidencialidad (C)

■ Autenticidad (A)

■ Trazabilidad (T)

.Determinación del nivel requerido en una dimensión

<Bajo: Se entenderá como perjuicio limitado:

■ La reducción de forma apreciable de la capacidad de la organización para atender eficazmente con sus obligaciones corrientes, aunque estas sigan desempeñándose.

■ El sufrimiento de un daño menor por los activos de la organización.

■ El incumplimiento formal de alguna ley o regulación, que tenga carácter de subsanable.

■ Causar un perjuicio menor a algún individuo, que aún siendo molesto pueda ser fácilmente reparable.

■ Otros de naturaleza análoga

<Medio: Se entenderá como perjuicio grave:

■ La reducción significativa la capacidad de la organización para atender eficazmente a sus obligaciones fundamentales, aunque estas sigan desempeñándose.

■ El sufrimiento de un daño significativo por los activos de la organización.

■ El incumplimiento material de alguna ley o regulación, o el incumplimiento formal que no tenga carácter de subsanable.

■ Causar un perjuicio significativo a algún individuo, de difícil reparación.

■ Otros de naturaleza análoga.

<alto: Se entenderá como perjuicio muy grave:

■ La anulación de la capacidad de la organización para atender a alguna de sus obligaciones fundamentales y que éstas sigan desempeñándose.

■ El sufrimiento de un daño muy grave, e incluso irreparable, por los activos de la organización.

■ El incumplimiento grave de alguna ley o regulación.

■ Causar un perjuicio grave a algún individuo, de difícil o imposible reparación.

■ Otros de naturaleza análoga.

.Determinación de la categoría de un sistema

<Básica: Si ninguna alcanza un nivel superior al bajo.

<media: Si alguna de sus dimensiones alcanza el nivel medio y ninguna alcanza el nivel alto.

<Alta: Si alguna de sus dimensiones alcanza el nivel alto.

.Aplicabilidad de los controles del ENS según la categoría definida:

          Nivel Básico          Nivel Medio          Nivel Alto          Código control                           Nombre control

             aplica                  =                   =                   mp.if.1                   Áreas separadas y con control de acceso

              n.a.                 aplica                =                   mp.if.9                        Instalaciones alternativas
              
             aplica                  +                   ++                  mp.com.3              Protección de la autenticidad y de la integridad

              n.a.                 aplica                +                    mp.s.8                Protección frente a la denegación de servicio

.Aplicabilidad de los controles del ENS según la entidad auditada: Algunos controles del ENS o requisitos no aplicarán para la evaluación y adecuación de la entidad por su naturaleza o tipo de actividad que desarrollan independientemente de la categoría establecida.

#### Activos y dependencias

-Los activos de la organización:

.El Esquema Nacional de Seguridad aplica los controles al alcance de la información y los servicios de las administraciones públicas entre los ciudadanos y otras administraciones públicas.

.Estos servicios se ofrecen y gestionan a través de sistemas informáticos (carpetas compartidas, aplicaciones, servidores, páginas web, documentos, etc.).

.Estos sistemas informáticos están alojados en soportes y sistemas hardware físicos o virtuales.

.A su vez, estos soportes y sistemas conforman una arquitectura de red y sistemas

-Los Activos Esenciales: 

.Empadronamiento

.Autoloquidaciones

-Loa Activos de Soporte

.Página web 

.Carpetas compartidas 

.app de autoloquidaciones

.Servidor web 

.Servidor app 

.Servidor dominio

.Red Ayto

#### Concepto de Madurez:

-Controles del ENS: El Esquema Nacional de Seguridad está conformado por un total de 75 controles o también llamadas medidas de seguridad

.Se dividen en 3 grupos:

<Marco organizativo: Constituido por un conjunto de medidas relacionadas con la organización global de seguridad

<Marco operacional: Constituido por las medidas a tomar para proteger la operación del sistema con un conjunto integral de componentes para un fin

<Marco de protección: Se centrarán en activos concretos según su naturaleza, con el nivel requerido en cada dimensión de seguridad

.Orden: Identificación de servicios esenciales (alcance) -> Establecer el nivel de las dimensiones de seguridad -> Establecer la categoría del sistema general -> Establecer la aplicabilidad de controles

-Madurez de un control:

. Cada control está implantado en la entidad según un nivel de madurez

. Efectividad de un proceso según su grado de profesionalización

                       Nivel                                                Descripción
                L0-Inexistente (0%)                                La medida no se está aplicando.
              L1-Inicial/ad hoc (10%)                          El proceso existe pero no se gestiona.
         L2-Repetible, pero intuitivo (50%)             El proceso tiene cierta planificación y pautas a seguir.
              L3-Proceso definido (80%)                       El proceso está actualizado y establecido.
            L4-Gestionado y medible (90%)                         El proceso se revisa y monitorea.
                 L5-Optimizado (100%)                  El proceso entra dentro de la dinámica de mejora continua.

.Ejemplo: Cortafuegos

<No aplica: No hay interconexión y, por tanto, el cortafuegos no es necesario.

<L0 (0%): El sistema está interconectado pero el cortafuegos requerido no ha sido implantado en la interconexión.

<L1 (10%): El cortafuegos está implantado en la interconexión con los valores por defecto y sin realizar ningún mantenimiento sobre el mismo.

<L2 (50%): El cortafuegos es revisado temporalmente sin tener un procedimiento establecido para ello.

<L3 (80%): El cortafuegos es revisado de la forma y con la periodicidad establecida en el procedimiento documentado.

<L4 (90%): El procedimiento de gestión del cortafuegos es analizado temporalmente para determinar su eficacia y eficiencia.

<L5 (100%): El procedimiento de gestión del cortafuegos es mejorado periódicamente en función de los análisis de eficacia y eficiencia. 

.Niveles mínimos de madurez según categoría del sistema:

                Categoría del sistema                          Nivel mínimo de madurez requerido
                       BÁSICA                               L2 – Reproducible, pero intuitivo (50%)
                       MEDIA                                      L3 – Proceso definido (80%)
                       ALTA                                      L4 – Gestionado y medible (90%)

### Marco Organizativo

#### Politica de seguridad

-Definición de política de seguridad: Conjunto de directrices plasmadas en documento escrito que rigen la forma en que una organización gestiona y protege la información y los servicios que considera críticos.

.La política de seguridad es la piedra angular del ENS y primer objetivo a conseguir en caso de no disponer de ella.

.Todos los órganos superiores de Administraciones Públicas deberán contar con su política de seguridad.

-Contenido de la política de seguridad:

.Elaboración de la política de seguridad teniendo en cuenta los principios básicos del ENS:

<Artículo 5. La seguridad como un proceso integral.

<Artículo 6. Gestión de la seguridad basada en los riesgos.

<Artículo 7. Prevención, reacción y recuperación.

<Artículo 8. Líneas de defensa.

<Artículo 9. Reevaluación periódica.

<Artículo 10. La seguridad como función diferenciada.

-Normativa de seguridad: Descripción general de cómo afrontar los temas en materia de seguridad

.Norma: Uso correcto y responsabilidades

.Guía: Ayuda en la aplicación de medidas

.Procedimiento: Paso a paso de una tarea concreta

.Uso correcto de los equipos, servicios e instalaciones.

.Uso indebido y medidas disciplinarias

-Procedimientos de seguridad y proceso de autorización:

.Requisito de existir procedimientos de seguridad escritos

.Proceso formal de autorización y solicitud de autorización:

<Instalaciones, entrada de equipos en producción, aplicaciones, comunicaciones, medios telemáticos, soportes de información, equipos móviles y portátiles, servicios de terceros

#### Comité de Seguridad:

-Comité de Seguridad TIC:

.La organización de la seguridad estará gestionada por un comité de seguridad TIC y por los distintos responsables designados.

.Órgano colegiado cuyos miembros ostentan roles especializados en la organización de la seguridad.

.Máxima autoridad respecto a decisiones de seguridad

-Funciones del Comité de Seguridad TIC:

.Funciones generales:

<Elaborar la Política de Seguridad Corporativa que deberá ser aprobada por la Dirección de la entidad.

<Aprobar el marco normativo y medidas técnicas a implementar de acuerdo al Plan de Implantación de la seguridad de las TIC en la organización.

<Coordinar todas las funciones de seguridad de la organización.

<Velar por el cumplimiento de la normativa legal y sectorial de aplicación.

<Velar por el alineamiento de las actividades de seguridad con los objetivos de la organización.

<Coordinar los Planes de Continuidad de las diferentes áreas, para asegurar una actuación sin fisuras en caso de que deban ser activados

<Coordinar y aprobar, en su caso, las propuestas de proyectos recibidas de los diferentes ámbitos de seguridad, encargándose de gestionar un control y presentación regular del progreso de los proyectos y anuncio de las posibles desviaciones.

<Recibir las inquietudes en materia de seguridad de la Dirección de la entidad y transmitirlas a los responsables departamentales pertinentes, recabando de ellos las correspondientes respuestas y soluciones que, una vez coordinadas, habrán de ser comunicadas a la Dirección.

<Recabar, a través del Responsable de Seguridad de las TIC (CISO), informes regulares del estado de la seguridad de la organización y de los posibles incidentes, para poder adoptar las decisiones oportunas.

<Coordinar y dar respuesta a las inquietudes de los diferentes Administradores del Sistema/Administradores Especialistas en Seguridad (AS/AES), transmitidas habitualmente a través del Responsable de Seguridad de las TIC (CISO) o del Responsable del Sistema (RSIS).

<Definir, dentro de la Política de Seguridad Corporativa, la asignación de roles y los criterios para alcanzar las garantías pertinentes en lo relativo a segregación de funciones.

<Resolver los conflictos de responsabilidad que puedan aparecer entre los diferentes responsables y/o entre diferentes áreas de la organización, elevándolo a la Dirección en aquellos casos en los que no tenga suficiente autoridad para decidir

.Funciones específicas de seguridad de la información

<Atender las inquietudes de la Dirección de la entidad y de los diferentes departamentos, en materia de seguridad de la información.

<Informar regularmente del estado de la seguridad de la información a la Dirección.

<Promover la mejora continua del sistema de gestión de la seguridad de la información (SGSI).

<Elaborar la estrategia de evolución de la organización en lo que respecta a seguridad de la información.

<Coordinar los esfuerzos de las diferentes áreas en materia de seguridad de la información, para asegurar que los esfuerzos son consistentes, que están alineados con la estrategia decidida en la materia, evitando duplicidades.

<Revisar regularmente la Política de Seguridad de la Información, para su aprobación por la Dirección.

<Aprobar la Normativa de Seguridad de la información.

<Elaborar y aprobar los requisitos de formación y cualificación de responsables, operadores y usuarios, desde el punto de vista de seguridad de la información.

<Supervisar y aprobar la gestión de riesgos de seguridad de la información, el Plan de Tratamiento de Riesgos (PTR) y los principales riesgos residuales asumidos por la organización, recomendando a la Dirección posibles actuaciones.

<Monitorizar el desempeño de los procesos de gestión de incidentes de seguridad y recomendar posibles actuaciones respecto de ellos.

<Promover la realización de las auditorías periódicas que permitan verificar el cumplimiento de las obligaciones del organismo en materia de seguridad.

<Aprobar planes de mejora de la seguridad de la información de la organización.

<Priorizar las actuaciones en materia de seguridad cuando los recursos sean limitados.

<Velar porque la seguridad de la información se tenga en cuenta en todos los proyectos desde su especificación inicial hasta su puesta en operación.

-Integrantes del Comité de Seguridad TIC:

.Presidente del Comité (moderación, desempate)

.Vocales (voz, voto)

.Secretaría del Comité (convocatoria, actas)

.Delegado de protección de datos

.Invitados Personal técnico especializado (voz, sin voto)

#### Roles y Responsabilidades

-Responsable de información:

.Nivel de gobierno

.Determina los requisitos de seguridad de la información

.Una o varias personas

.Ayudar a determinar los requisitos de seguridad de la información, identificando los niveles de seguridad de dicha información mediante la valoración del impacto sobre ésta de los incidentes que pudieran producirse.

.Proporcionar la información necesaria para realizar los preceptivos análisis de riesgos, con la finalidad de establecer las salvaguardas a implantar. Para ello, contará con la ayuda de la persona responsable del sistema.

.En relación con los análisis de riesgos de los sistemas de información, aceptar los riesgos residuales de las informaciones manejadas que sean de su competencia.

-Responsable del servicio:

.Nivel de gobierno

.Determina los requisitos de seguridad de los servicios prestados

.Una o varias personas

.Ayudar a determinar los requisitos de seguridad de los servicios a prestar, identificando los niveles de seguridad de los mismos mediante la valoración del impacto sobre éstos de los incidentes que pudieran producirse.

.En el ámbito de cada servicio, proporcionar la información necesaria para realizar los preceptivos análisis de riesgos, con la finalidad de establecer las salvaguardas a implantar. Para ello, contará con la ayuda de la persona responsable del sistema.

-Responsable de seguridad:

.Nivel de supervisión

.Determina las decisiones de seguridad para satisfacer los requisitos establecidos para la información y los servicios

.Una persona

.Elaborará la normativa de seguridad que se presentará al Comité de Seguridad TIC- para su aprobación.

.Labores de soporte, asesoramiento e información al Comité de Seguridad TIC de la entidad, así como de ejecución de las decisiones y acuerdos adoptados por éste.

.Diseño y ejecución de los programas de actuación propios de la entidad, incluyendo, entre otros, planes directores de seguridad, proyectos de desarrollo normativo, auditorías de cumplimiento y planes de adecuación legal.

.Conocer los cambios tecnológicos que puedan afectar a los sistemas de información, pudiendo tener consecuencias para la organización. En este caso deberá alertar al Comité de Seguridad TIC y proponer las medidas oportunas.

.La correcta ejecución de las instrucciones emanadas del Comité de Seguridad TIC.

.La presentación regular de informes sobre el estado de seguridad de los servicios TIC al Comité de Seguridad TIC

.La preparación de informes en caso de incidentes excepcionalmente graves y en caso de desastres.

.Definición, implantación y mantenimiento de los controles de carácter organizativo para la protección de los datos, aplicaciones y sistemas, así como la elaboración del Análisis de Riesgos de la entidad, análisis que será presentado al Comité de Seguridad TIC para su aprobación. Este análisis deberá actualizarse regularmente dependiendo de la criticidad del sistema.

.La inspección de las verificaciones regulares de seguridad aprobadas por el Comité. El resultado de estas inspecciones se presentará al Comité de Seguridad TIC para su conocimiento y aprobación. Si como resultado de la inspección aparecen incumplimientos, propondrá medidas correctoras que presentará al Comité de Seguridad TIC para su aprobación, responsabilizándose de que sean llevadas a cabo.

.Definición y ejecución de los programas formativos y de concienciación relacionadas con buenas prácticas de seguridad TIC.

-Responsables de seguridad -> delegados:

.El Responsable de seguridad delegará funciones pero no responsabilidad

.Normalmente se encargan de seguridad de sistemas de información concretos (como departamentos)

-Responsable del sistema:

.Nivel operativo

.Operar y aplicar las medidas determinadas de las decisiones de seguridad

.Una o varias personas (internos o externos si los sistemas están delegados a otra entidad)

.Desarrollar, operar y mantener el sistema de información durante todo su ciclo de vida, incluyendo sus especificaciones, instalación y verificación de su correcto funcionamiento.

.Definir la topología y la gestión del sistema de información, estableciendo los criterios de uso y los servicios disponibles en el mismo.

.Cerciorarse de que las medidas de seguridad se integren adecuadamente en el marco general de seguridad.

-Responsable de seguridad física:

.Nivel operativo

.Adoptará las medidas de seguridad que le competan, dentro de las determinadas por el Responsable de Seguridad e informará a éste de su grado de implantación, eficacia e incidentes.

.Persona física u órgano colegiado (interno o externo si la seguridad física está delegada a otra entidad)

.Nivel de ejecución

.Ejecutar e implantar las medidas de seguridad.

.Dependencia o del responsable de sistema o de responsable de seguridad.

.Una o varias personas (internos o externos si la seguridad está delegada a otra entidad)

-Administradores de seguridad:

.El Administrador de seguridad delegará funciones pero no responsabilidad

#### Carrera Proyecto de clases Día 22: 12/11/2023

### Marco Operacional

#### Planificación de la seguridad

-Marco operacional: protección de la operación del sistema

-Actividades previas a la puesta en explotación:

.Proceso integral de la seguridad desde el primer momento

.Gestión de la seguridad basada en los riesgos de la entidad

-Maduración de medidas puramente organizativa y documental

Arquitectura de seguridad (op.pl.2):

.Documentación y descripción de la visión global:

<B: Información de instalaciones, sistemas, líneas de defensa, identificación de usuarios.

<M: Sistema de gestión.

<A: Control interno del sistema.

-Adquisición de nuevos componentes (op.pl.3):

.Proceso formal de adquisición de nuevos componentes del sistema:

<¿Conclusiones del análisis de riesgos?

<¿Acorde a la arquitectura de seguridad?

<¿Cumple con las necesidades?

■ Técnicas

■ Formación

■ Financiación

-Dimensionamiento y gestión de nuevas capacidades (op.pl.4):

.Estudio previo de necesidades:

<procesamiento, almacenamiento, comunicación, formación, personal, instalaciones, etc.

-Componentes certificados (op.pl.5):

.Uso de sistemas, aplicaciones, equipos con certificaciones reconocidas de seguridad según los criterios exigibles.

<La categoría alta de un sistema requiere de componentes con certificación segura y reconocidos por el Esquema Nacional de Evaluación y Certificación de la Seguridad de las Tecnologías de la Información.

#### Acceso a la información

-Marco operacional: protección de la operación del sistema

-Actividades preparatorias para dar (o no) acceso a un recurso

.Comodidad de uso VS protección

-Identificación (op.acc.1):

.Identificación del usuario en el sistema:

<Identificación única

-Se puede saber quién ha hecho algo y qué ha hecho:

Trazabilidad

Confidencialidad

Autenticidad

-Requisitos de acceso (op.acc.2):

.Los recursos se protegen con algún mecanismo que impide su utilización

.Derecho de acceso según las decisiones de determinada persona responsable del recurso

.Control del acceso

-Segregación de funciones y tareas (op.acc.3):

.Separación de el desarrollo de una operación, el mantenimiento y la auditoría

<Contemplar la incompatibilidad de realización de tareas

-Proceso de gestión de derechos de acceso (op.acc.4):

.Mínimo privilegio posible

.Acceso a información necesaria

.Permiso de autorización solo por el personal con competencia

-Mecanismo de autenticación (op.acc.5):

.“algo que se sabe”

.“algo que se tiene”

.“algo que se es”

-Acceso local (op.acc.6):

.¿Cómo se accede desde los puestos de trabajo?:

<B: ¿Intentos de acceso?

<B: ¿registro de intentos?

<M: ¿informa el sistema del último acceso?

<A: ¿Acceso limitado por horario?

-Acceso remoto (op.acc.7):

.¿Cómo se accede desde fuera de las instalaciones?

<Se aplican mismas medidas que op.acc.6 y adicionalmente medidas de seguridad de comunicaciones (mp.com.2)

<Autorización previa de qué se puede hacer remotamente

#### Explotación de Servicios Internos y Externos

-Explotación de Servicios Internos:

.Marco operacional: protección de la operación del sistema

.Uso correcto y gestión de los activos tecnológicos de la entidad

<Inventario, mantenimiento, protección, cambios, actividad

.Inventario de activos (op.exp.1):

<Inventario actualizado de los activos e identificación del responsable de cada uno

.Configuración de seguridad (op.exp.2):

<Retirada de cuentas o contraseñas estándar

<Mínima funcionalidad posible

<Seguridad por defecto

.Gestión de la configuración (op.exp.3):

<Gestión y monitorización continua del punto anterior

.Mantenimiento (op.exp.4):

<Seguir pautas de mantenimiento e instalación del fabricante

<Procedimiento de actualizaciones según riesgo

.Gestión de cambios (op.exp.5):

<Control continuo de cambios (control anterior más estricta y controlada)

■ Seguimiento de nuevas versiones

■ Aprobación

■ Entornos PRE-PRO

.Protección frente a código dañino (op.exp.6):

<Mecanismos de prevención y reacción frente a malware

■ Gusanos, troyanos, spyware, etc.

.Gestión de incidentes (op.exp.7):

<Procedimiento de gestión de incidentes

■ reporte, organización, medidas, recursos, análisis posterior

.Registro de actividad de los usuarios (op.exp.8):

<¿Quién? ¿Cuándo? ¿Sobre qué?:

■ B: Se activan los registros

■ M: Se activan y revisan

■ A: Sistema automático de recolección y correlación (SIEM)

.Registro de la gestión de incidentes (op.exp.9):

<Se guarda información del incidente y todas sus consecuencias

<Registro de evidencias para posible uso a nivel judicial

<Revisión de eventos auditables

.Protección de registros de actividad (op.exp.10):

<Especial cuidado a la hora de proteger los registros de actividad

■ periodo de retención

■ control de acceso a los mismos

■ gestión correcta de copias de seguridad

.Protección de claves criptográficas (op.exp.11):

<Protección de claves durante su ciclo de vida

■ Generación, transporte, almacenamiento, destrucción

<B: separación de medios de generación de medios de operación

<M y A: Algoritmos acreditados por el CCN

-Explotación de Servicios Externos:

.Marco operacional: protección de la operación del sistema

.Uso correcto y gestión de los activos tecnológicos subcontratados con terceros:

<La entidad también es responsable de los riesgos de estos servicios

.Contratación y acuerdos a nivel de servicio (op.ext.1):

<Establecer en el contrato o acuerdo las características del servicio y los requisitos a nivel de seguridad.

■ Responsabilidades

■ Consecuencias de incumplimiento

<Ya puede venir exigido por la otra empresa si tiene que cumplir con nivel medio aunque la nuestra no sea necesario

.Gestión diaria (op.ext.2):

<Medición rutinaria de los acuerdos del control anterior.

.Medios alternativos (op.ext.3):

<Provisión del servicio por medios alternativos en caso de indisponibilidad

■ Por ejemplo: doble línea de telecomunicaciones o alta redundancia de servidores en la nube.

#### Continuidad de Servicio y Monitorización

-Marco operacional: protección de la operación del sistema

-Continuación del servicio ante cualquier incidente

-Monitorización del sistema para prevenir incidentes

.Análisis de impacto (op.cont.1):

<Realización de análisis de impacto que permita determinar:

■ disponibilidad de cada servicio

■ elementos críticos para la prestación de servicio

.Plan de continuidad (op.cont.2):

<Acciones a realizar en caso de interrupción

■ Funciones, responsabilidades, actividades

■ Alternativas y evidencia de acuerdo en firme de las mismas

■ Formación respecto al papel en el plan

■ Integrado con otros planes de la empresa

.Pruebas periódicas (op.cont.3):

<Revisión periódica del plan de continuidad

■ Localizar y corregir deficiencias

.Detección de intrusión (op.mon.1):

<Disponer de herramientas de detección y de prevención de intrusión (IDS, IPS) → Firewalls UTM

.Sistema de métricas (op.mon.2):

<Medición y seguimiento de proyectos de seguridad con criterios cualitativos y cuantitativos

■ B: Grado de implantación de medidas de seguridad

■ M: Métricas para la eficacia sistema de gestión de incidentes

■ A: Métricas para la eficacia del sistema de seguridad TIC

.Sistema de métricas (op.mon.2)

### Medidas de Protección

#### Protección de Instalacciones

-Áreas separadas y con control de acceso (mp.if.1):

.La infraestructura sigue un reparto de zonas separadas según su función y se controla el acceso a dichas zonas

-Identificación de las personas (mp.if.2):

.Control de acceso a los locales y con registro de entrada-salida

-Acondicionamiento de los locales (mp.if.3):

.Condiciones de temperatura y humedad

.Protección frente a las amenazas del análisis de riesgos

.Protección del cableado

-Energía eléctrica (mp.if.4):

.Se garantiza el suministro de potencia

.Se garantiza el correcto funcionamiento de las luces de emergencia

-Protección frente a incendios (mp.if.5):

-Protección frente a inundaciones (mp.if.6):

.Referencia a normativa industrial seguida en la instalación y adecuación del edificio para incendios e inundaciones

-Registro de entrada y salida de equipamiento (mp.if.7):

.Identificar equipamiento que sale y entra, quién autoriza, fecha, tiempo estimado, etc

-Instalaciones alternativas (mp.if.9):

.Existencia y disponibilidad de instalaciones alternativas

.Mismas garantías de seguridad que las habituales

#### Gestión del Personal

-Caracterización del puesto de trabajo (mp.per.1):

.Responsabilidades de seguridad según el puesto de trabajo

.Requisitos para ocupar el puesto de trabajo y en la selección de personal

-Deberes y obligaciones (mp.per.2):

.Deberes y responsabilidades en el puesto de trabajo en materia de seguridad:

<Medidas disciplinarias, periodo de aplicación

<Aplicable en personal contratado a través de terceros

-Concienciación (mp.per.3):

.Recordar normativa de seguridad

.Recordar procedimiento de gestión de incidentes

-Formación (mp.per.4):

.Gestionar correctamente la información

.Saber detectar y reaccionar a diferentes tipos de incidentes

-Personal alternativo (mp.per.9):

.Personal que se haga cargo de funciones en caso de indisponibilidad del personal habitual

.Personal alternativo = personal habitual en cuanto a garantías de seguridad

#### Protección de Equipos

-Puesto de trabajo despejado (mp.eq.1):

.Política de escritorio limpio

.Solo la actividad que se está realizando en dicho momento

.M: Material no usado→ guardado en lugar cerrado

-Bloqueo de puesto de trabajo (mp.eq.2):

.Bloqueo al cabo de un tiempo de inactividad requiriendo autenticación

.A: Cierre de sesiones abiertas

-Protección de portátiles (mp.eq.3):

.Inventario de equipos portátiles que salen de la instalación y la persona responsable del mismo (op.exp.1 Inventario de activos, mp.if.7 entrada y salida de equipamiento)

-Procedimiento de información de cualquier incidente (op.exp.7):

.Limitación de la información accesible

.Limitación de almacenamiento de información sensible

.A: Detectores de violación de seguridad

.A: Información de nivel alto cifrada

-Medios alternativos (mp.eq.9):

.Equipos de trabajo alternativos en caso de fallo de los habituales

.Establecimiento de un tiempo máximo de entrada en funcionamiento

#### Protección de las comunicaciones

-Perímetro seguro (mp.com.1):

.Sistema de cortafuegos que separe la red interna del exterior

.Todo el tráfico pasará por el cortafuegos

.A: Cortafuegos formado por dos o más equipos de diferente fabricante en cascada y sistemas redundantes de alta disponibilidad

-Protección de la confidencialidad (mp.com.2):

.Uso de VPN cuando se acceda desde fuera de la red con cifrado acreditado

.A: Uso de dispositivos hardware preferentemente

.A: Productos certificados (op.pl.5)

-Protección de autenticidad y la integridad (mp.com.3):

.Mecanismos para asegurar la autenticación

.M: Uso de VPN cuando se acceda desde fuera de la red con cifrado acreditado

.A: Uso de dispositivos hardware preferentemente

.A: Productos certificados (op.pl.5)

-Segregación de redes (mp.com.4):

.Segmentación de usuarios para acotar el acceso a la información → VLAN

-Medios alternativos (mp.com.9):

.Redes alternativas en caso de fallo de los habituales

.Establecimiento de un tiempo máximo de entrada en funcionamiento

#### Protección de Soportes: 

-Etiquetado (mp.si.1):

.Etiqueta sin revelar contenido pero indicando nivel de seguridad

.Capacidad para correlacionar la etiqueta con la identificación del soporte

-Criptografía (mp.si.2):

.Especial importancia en soportes portátiles

.Aplicación de mecanismos de cifrado para garantizar confidencialidad e integridad en caso de pérdida

.A: Algoritmos y productos certificados (op.pl.5)

-Custodia (mp.si.3) y Transporte (mp.si.4):

.Control y registro de correcto uso y acceso al soporte

.Alineado con control de acceso (mp.if.1) y entrada-salida de equipamiento (mp.if.7)

-Borrado y destrucción (mp.si.5):

.Reutilización o desecho → Borrado seguro de información

.Borrado seguro = Borrado a bajo nivel

.M: Destrucción del soporte en caso de no permitir borrado seguro

.M: Productos certificados (op.pl.5)

#### Desarrollo Seguro

-Desarrollo (mp.sw.1):

.Entornos diferentes: DESARROLLO - PRE - PRO

.Metodología de desarrollo reconocida con integración de la seguridad

-Aceptación y puesta en servicio (mp.sw.2):

.Antes de pasar a producción:

<Criterios de aceptación de seguridad

<No afecta a la seguridad de otros elementos

.Pruebas y testeo con datos no reales

.M: Análisis de vulnerabilidades y pentesting

.A: Auditoría

#### Protección de la Información

-Datos de carácter personal (mp.info.1):

.Cuando un sistema trate datos de carácter personal, deben de cumplirse los requisitos que se indica en la Ley Orgánica de Protección de Datos y Garantía de Derechos Digitales (LOPDGDD)

-Calificación de la información (mp.info.2):

.Según la política de seguridad, el responsable de información determina la calificación de la misma

.M: Descripción de los criterios para etiquetar a la información según su nivel de seguridad.

-Cifrado de la información (mp.info.3):

.Información con nivel alto se cifra durante su almacenamiento y transmisión

.Seguir las indicaciones de mp.com.2 (confidencialidad de la comunicación) y mp.si.2 (criptografía)

-Firma electrónica (mp.info.4):

.Integridad y autenticidad de los documentos a través de firma electrónica durante su almacenamiento y transmisión

.M y A: Aumento de los requisitos de validación

-Sellos de tiempo (mp.info.5):

.Integridad de la información cuando se requiere de información temporal sobre la misma

.Orientado a datos usados como evidencia electrónica

-Limpieza de documentos (mp.info.6):

.Retirada de información en campos ocultos, meta-datos, revisiones, comentarios, etc.

.Especialmente importante cuando el documento se hace público

-Copias de seguridad (mp.info.9):

.Mismo nivel de seguridad que los datos originales

.Abarcar:

<Información de trabajo

<Información de aplicaciones

<Datos de configuración

<Claves

#### Protección de los Servicios

-Protección del correo electrónico (mp.s.1):

.Medidas de seguridad que se utilizan para evitar incidentes:

<SPAM

<Malware (especialmente phishing)

.Se incluye el uso seguro de correo electrónico en la formación y normas de uso para los empleados

-Protección de servicios y aplicaciones web (mp.s.2):

.Medidas de seguridad que se utilizan para evitar incidentes:

<Manipulación de URL

<Bypass de acceso a la aplicación

<Manipulación de cookies

<Escalado de privilegios

<Ataques XSS (Cross Site Scripting)

.A: Certificados cualificados de autenticación

-Protección frente a denegación de servicio (mp.s.8):

.Ataques DoS y DDoS:

<Control de peticiones

<Balanceamiento de carga

.A: Sistemas para detectar el ataque

.A: Procedimiento para reaccionar al ataque

-Medios alternativos (mp.s.9):

.Disponibilidad de medios alternativos para prestar el servicio de las aplicaciones con las mismas garantías que los medios habituales

### Analisís de Riesgos

#### Activos y Amenazas

-Análisis de riesgos:

.BÁSICA: informal

.MEDIA: semi-informal

.ALTA: formal

-Metodología: MAGERIT

-Pasos:

.Fase 1: Definir el Alcance:

<Alcance:

■ Informal, semi-formal, formal

■ Activos y amenazas tenidos en cuenta

.Fase 2: Identificar los Activos

<Valoración de los activos: Necesidad de proteger

■ Valor propio o valor acumulado: acumulación de los activos dependientes superiores

■ Valoración cualitativa o cuantitativa

■ Valoración según las dimensiones de seguridad

<Confidencialidad: ¿qué daño causaría que lo conociera quien no debe?

<Integridad: ¿qué perjuicio causaría que estuviera dañado o corrupto?

<Disponibilidad: ¿qué perjuicio causaría no tenerlo o no poder utilizarlo?

<Autenticidad: ¿qué perjuicio causaría no saber exactamente quien hace o ha hecho cada cosa?

<Trazabilidad: ¿qué daño causaría no saber a quién se le presta tal servicio? ¿quién hace qué y cuándo? ¿qué daño causaría no saber quién accede a qué datos y qué hace con ellos?

.Fase 3: Identificar Amenazas

<Origen:

■ Natural: fuego, inundaciones, etc.

■ Industrial: eléctrico

■ Defectos de aplicación: bugs (vulnerabilidades)

■ Causadas por personal: intencional/no intencional

.Fase 4: Identificar Vulnerabilidades y Salvaguardas

<Identificar vulnerabilidades de los activos:

■ Puntos débiles conocidos

<Identificar salvaguardas:

■ Medidas de seguridad que tenemos actualmente implantadas en los activos

.Fase 5: Evaluar el Riesgo

<Para cada activo, para cada amenaza, para cada dimensión de seguridad

<Riesgo repercutido: Impacto en el valor propio del activo X probabilidad

<Riesgo acumulado: Impacto proporcional a las dependencias del activo X probabilidad

.Fase 6: Tratar el Riesgo

<Tratamiento del riesgo:

■ Transferir el riesgo (seguros, cláusulas, etc). Ojo! No se transfiere la responsabilidad.

■ Eliminar el riesgo (en caso de no ser necesario)

■ Asumir el riesgo

■ Implantar salvaguardas (mitigar)

#### Carrera Proyecto de clases Día 23: 14/11/2023

#### Herramienta Pilar

-Análisis y gestión de riesgos

-Digitalización del seguimiento del ENS

-Análisis de impacto y continuidad de operaciones

-PILAR (CCN-STIC 470): Análisis y gestión de riesgos e impacto

-PILAR Basic (CCN-STIC 472): PYME y administración local → Análisis y gestión de riesgos

-μPILAR (CCN-STIC 473): Análisis de riesgo rápido

-Se puede Instalar:

.Aplicación Java

.Windows: ejecutable (.exe)

.Linux: Archivo java (.jar) con app y librerías

.Mac OS: Archivo java (.jar) → pilar.app

-Estructura:

.D. Proyecto:

<Datos del proyecto

<Dominios de seguridad:

■ Los activos se ubican dentro de algún dominio de seguridad. Cada activo pertenece a un dominio y sólo a un dominio.

■ Un dominio de seguridad es una colección de activos uniformemente protegidos, típicamente bajo una única autoridad para diferenciar entre zonas en el sistema de información.

■ Por ejemplo: instalaciones centrales, sucursales, comerciales trabajando con portátiles pueden ser diferentes dominios de seguridad de una entidad

<Subconjunto de clases de activos:

■ Tipos de activos

■ On/Off: Ocultar/mostrar para poder crear un activo de esa clase

■ Cargadas por biblioteca

.A. Análisis de riesgos:

<Capa estándar:

■ Activos esenciales

■ Servicios

■ Equipamiento

■ Servicios subcontratados

■ Instalaciones

■ Personal

<Grupos de activos

■ Aplicaciones

■ Equipos

■ Comunicaciones

■ Elementos auxiliares

<Seleccionar, modificar y aplicar de forma sencilla las clases de activos creados

.R. Informes

<Medidas de seguridad

<Riesgo acumulado

.E. Perfiles de seguridad:

<valoración de controles

-Detección de amenazas: Gracias a determinar correctamente las clases de activos PILAR puede asociar automáticamente las amenazas que afectan a un activo

-Valoración de amenazas:

.Cuantificación de las amenazas sobre los activos

.Se auto carga del archivo TSV – Threat Standard Values

### Adecuación y mantenimiento

#### Implantación de medidas técnicas
